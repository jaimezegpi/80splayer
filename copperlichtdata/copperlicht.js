/**
  * CopperCube player implemented using the CopperLicht 3D Engine, (c) by Nikolaus Gebhardt, Ambiera e.U.
  * http://www.ambiera.com/coppercube
  */
function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function da(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,o={};function ea(a,b){this.ye=this.pj=this.oh=null;a=document.getElementById(a);if(a==null)o.km=false;else{if(this.oh=a.parentNode){this.Gh=document.createElement("div");this.oh.appendChild(this.Gh);this.wp=a=document.createTextNode("Loading...");this.Gh.appendChild(a)}b&&ga(this)}}function ga(a){if(a.pj==null){a.pj=document.createElement("div");a.oh.appendChild(a.pj);var b=document.createTextNode("FPS: 0");a.Wm=b;a.pj.appendChild(b);a.frames=0;a.sm=(new Date).getTime()}}
ea.prototype.print=function(a){o.km!=false&&ha(this,a,false)};function ia(a,b){if(a.Gh)if(b==null)a.Gh.style.display="none";else{a.Gh.style.display="block";a.wp.nodeValue=b}}function la(a,b,c){ha(a,b,true,c)}function ma(a,b){setTimeout(function(){throw new Error(b);},0)}
function ha(a,b,c,d){if(!(o.km==false&&c!=true)){if(a.ye==null){a.ye=document.createElement("div");a.ye.className="cldebug";a.oh.appendChild(a.ye)}if(d){a.ye.appendChild(document.createElement("br"));c=document.createElement("div");a.ye.appendChild(c);c.innerHTML=b}else{a.ye.appendChild(document.createElement("br"));b=document.createTextNode(b);a.ye.appendChild(b)}}}o.km=true;o.na=null;function na(a,b){this.rj=a;this.qb=false;this.Sq=b;if(!this.qb&&typeof XMLHttpRequest!="undefined")try{this.qb=new XMLHttpRequest}catch(c){this.qb=false}if(!this.qb&&window.cq)try{this.qb=window.cq()}catch(d){this.qb=false}this.load=function(e,f){if(this.qb==false)la(o.na,"Your browser doesn't support AJAX");else{var g=this;try{this.qb.open("GET",this.rj,true);if(this.Sq)this.qb.responseType="arraybuffer"}catch(j){if(f)f(j.message);else{la(o.na,"Could not open file "+this.rj+": "+j.message);var k=
navigator.appVersion;k!=null&&k.indexOf("Trident")!=-1&&la(o.na,"<i>Use a web server to run files in IE. Or start them from CopperCube.</i>",true)}return}this.qb.onreadystatechange=function(){if(g.qb.readyState==4){var p=false;if(g.qb.status!=200&&g.qb.status!=0&&g.qb.status!=null)if(f){f("");p=true}else la(o.na,"Could not open file "+g.rj+" (status:"+g.qb.status+")");!p&&e&&e(g.qb.response)}};try{this.qb.send(null)}catch(n){f?f(""):la(o.na,"Could not open file "+g.rj)}}};this.abort=function(){try{this.qb.abort()}catch(e){}}}
;o.PI=3.14159265359;o.gr=1/3.14159265359;o.br=1.570796326795;o.fr=3.141592653589793;o.Bd=3.14159265359/180;o.ue=57.29577951307855;o.Tp=1.0E-8;o.Ii=function(a){return a*o.ue};o.ko=function(a){return a*o.Bd};o.ra=function(a){return a<1.0E-8&&a>-1.0E-8};o.Ge=function(a){return a+1.0E-8>=1&&a-1.0E-8<=1};o.D=function(a,b){return a+1.0E-8>=b&&a-1.0E-8<=b};o.sc=function(a,b,c){if(a<b)return b;if(a>c)return c;return a};o.fq=function(a){return a-Math.floor(a)};
o.uq=function(a,b,c){if(a>b){if(a>c)return a;return c}if(b>c)return b;return c};o.rr=function(a,b,c){if(a<b){if(a<c)return a;return c}if(b<c)return b;return c};o.Wd=function(a){return(a&4278190080)>>>24};o.ad=function(a){return(a&16711680)>>16};o.Zc=function(a){return(a&65280)>>8};o.Yc=function(a){return a&255};o.If=function(a,b,c,d){a&=255;b&=255;c&=255;d&=255;return a<<24|b<<16|c<<8|d};o.jo=function(a){var b=new oa;b.Pf=o.Wd(a)/255;b.pc=o.ad(a)/255;b.kc=o.Zc(a)/255;b.gc=o.Yc(a)/255;return b};
o.qo=function(a,b,c){var d=1-c;return o.If(o.Wd(a)*c+o.Wd(b)*d,o.ad(a)*c+o.ad(b)*d,o.Zc(a)*c+o.Zc(b)*d,o.Yc(a)*c+o.Yc(b)*d)};o.Wo=function(a){if(a>0)return 1;if(a<0)return-1;return 0};function oa(){this.gc=this.kc=this.pc=this.Pf=1}m=oa.prototype;m.e=function(){var a=new oa;a.Pf=this.Pf;a.pc=this.pc;a.kc=this.kc;a.gc=this.gc;return a};m.Pf=1;m.pc=1;m.kc=1;m.gc=1;function r(){return(new Date).getTime()};function t(a,b,c){if(a!=null){this.c=a;this.b=b;this.d=c}}m=t.prototype;m.c=0;m.b=0;m.d=0;m.set=function(a,b,c){this.c=a;this.b=b;this.d=c};m.e=function(){return new t(this.c,this.b,this.d)};m.va=function(a){a.c=this.c;a.b=this.b;a.d=this.d};m.substract=function(a){return new t(this.c-a.c,this.b-a.b,this.d-a.d)};function sa(a,b){a.c-=b.c;a.b-=b.b;a.d-=b.d}t.prototype.add=function(a){return new t(this.c+a.c,this.b+a.b,this.d+a.d)};t.prototype.qa=function(a){this.c+=a.c;this.b+=a.b;this.d+=a.d};
function ua(a,b){a.c+=b.c;a.b+=b.b;a.d+=b.d;return a}t.prototype.normalize=function(){var a=this.c*this.c+this.b*this.b+this.d*this.d;if(!(a>-1.0E-7&&a<1.0E-7)){a=1/Math.sqrt(a);this.c*=a;this.b*=a;this.d*=a}};function va(a,b){var c=a.c*a.c+a.b*a.b+a.d*a.d;if(!(c>-1.0E-7&&c<1.0E-7)){c=b/Math.sqrt(c);a.c*=c;a.b*=c;a.d*=c}}function wa(a,b){a.c=b.c;a.b=b.b;a.d=b.d}t.prototype.D=function(a){return o.D(this.c,a.c)&&o.D(this.b,a.b)&&o.D(this.d,a.d)};
function xa(a){return o.ra(a.c)&&o.ra(a.b)&&o.ra(a.d)}t.prototype.getLength=function(){return Math.sqrt(this.c*this.c+this.b*this.b+this.d*this.d)};t.prototype.xb=function(a){var b=a.c-this.c,c=a.b-this.b;a=a.d-this.d;return Math.sqrt(b*b+c*c+a*a)};function ya(a,b){var c=b.c-a.c,d=b.b-a.b;a=b.d-a.d;return c*c+d*d+a*a}function za(a){return a.c*a.c+a.b*a.b+a.d*a.d}function y(a,b){return new t(a.c*b,a.b*b,a.d*b)}function Ca(a,b){a.c*=b;a.b*=b;a.d*=b}function Da(a,b){a.c*=b;a.b*=b;a.d*=b;return a}
function Ea(a,b){a.c*=b.c;a.b*=b.b;a.d*=b.d}function Fa(a,b){return new t(a.c*b.c,a.b*b.b,a.d*b.d)}function Ga(a,b){return new t(a.c/b.c,a.b/b.b,a.d/b.d)}function Ha(a,b){return new t(a.b*b.d-a.d*b.b,a.d*b.c-a.c*b.d,a.c*b.b-a.b*b.c)}t.prototype.ka=function(a){return this.c*a.c+this.b*a.b+this.d*a.d};
function Ja(a){var b=new t;b.b=o.Ii(Math.atan2(a.c,a.d));if(b.b<0)b.b+=360;if(b.b>=360)b.b-=360;var c=Math.sqrt(a.c*a.c+a.d*a.d);b.c=o.Ii(Math.atan2(c,a.b))-90;if(b.c<0)b.c+=360;if(b.c>=360)b.c-=360;return b}function Ka(a,b){b*=o.Bd;var c=Math.cos(b);b=Math.sin(b);var d=a.c,e=a.d;a.c=d*c-e*b;a.d=d*b+e*c}function La(a,b,c){var d=1-c;return new t(b.c*d+a.c*c,b.b*d+a.b*c,b.d*d+a.d*c)}t.prototype.toString=function(){return"(x: "+this.c+" y:"+this.b+" z:"+this.d+")"};
function Ma(){this.$=new t;this.P=new t}Ma.prototype.$=null;Ma.prototype.P=null;function Na(a){return a.P.substract(a.$)}Ma.prototype.getLength=function(){return Na(this).getLength()};function Oa(a,b){if(a==null)this.b=this.c=0;else{this.c=a;this.b=b}}Oa.prototype.c=0;Oa.prototype.b=0;Oa.prototype.set=function(a,b){this.c=a;this.b=b};function z(){this.C=new t;this.M=new t}z.prototype.C=null;z.prototype.M=null;z.prototype.e=function(){var a=new z;a.C=this.C.e();a.M=this.M.e();return a};function Pa(a){a=a.C.add(a.M);Ca(a,0.5);return a}function Qa(a){return a.M.substract(a.C)}
function Ta(a){var b=Pa(a);a=b.substract(a.M);var c=[];c.push(new t(b.c+a.c,b.b+a.b,b.d+a.d));c.push(new t(b.c+a.c,b.b-a.b,b.d+a.d));c.push(new t(b.c+a.c,b.b+a.b,b.d-a.d));c.push(new t(b.c+a.c,b.b-a.b,b.d-a.d));c.push(new t(b.c-a.c,b.b+a.b,b.d+a.d));c.push(new t(b.c-a.c,b.b-a.b,b.d+a.d));c.push(new t(b.c-a.c,b.b+a.b,b.d-a.d));c.push(new t(b.c-a.c,b.b-a.b,b.d-a.d));return c}
function Ua(a,b,c){var d=c.substract(b),e=d.getLength();d.normalize();b=y(b.add(c),0.5);c=e*0.5;e=y(Qa(a),0.5);a=Pa(a).substract(b);if(Math.abs(a.c)>e.c+c*Math.abs(d.c)||Math.abs(a.b)>e.b+c*Math.abs(d.b)||Math.abs(a.d)>e.d+c*Math.abs(d.d))d=false;else{b=e.b*Math.abs(d.d)+e.d*Math.abs(d.b);if(Math.abs(a.b*d.d-a.d*d.b)>b)d=false;else{b=e.c*Math.abs(d.d)+e.d*Math.abs(d.c);if(Math.abs(a.d*d.c-a.c*d.d)>b)d=false;else{b=e.c*Math.abs(d.b)+e.b*Math.abs(d.c);d=Math.abs(a.c*d.b-a.b*d.c)>b?false:true}}}return d}
function A(a,b){var c=b.c,d=b.b;b=b.d;if(c>a.M.c)a.M.c=c;if(d>a.M.b)a.M.b=d;if(b>a.M.d)a.M.d=b;if(c<a.C.c)a.C.c=c;if(d<a.C.b)a.C.b=d;if(b<a.C.d)a.C.d=b}function Va(a,b){return a.C.c<=b.M.c&&a.C.b<=b.M.b&&a.C.d<=b.M.d&&a.M.c>=b.C.c&&a.M.b>=b.C.b&&a.M.d>=b.C.d}z.prototype.Qg=function(a){return a.c>=this.C.c&&a.c<=this.M.c&&a.b>=this.C.b&&a.b<=this.M.b&&a.d>=this.C.d&&a.d<=this.M.d};z.prototype.reset=function(a,b,c){this.M.set(a,b,c);this.C.set(a,b,c)};function Wa(){this.j=new t(0,1,0);Xa(this,new t(0,0,0))}Wa.prototype.Ya=0;Wa.prototype.j=null;Wa.prototype.e=function(){var a=new Wa(false);a.j=this.j.e();a.Ya=this.Ya;return a};function Xa(a,b){a.Ya=-b.ka(a.j)}Wa.prototype.normalize=function(){var a=1/this.j.getLength();this.j=y(this.j,a);this.Ya*=a};
function Ya(a,b,c,d){var e=new t,f=new t;var g=a.j.getLength(),j=a.j.ka(b.j),k=b.j.getLength(),n=g*k-j*j;if(Math.abs(n)<1.0E-8)b=false;else{n=1/n;k=(k*-a.Ya+j*b.Ya)*n;g=(g*-b.Ya+j*a.Ya)*n;Ha(a.j,b.j).va(f);a=y(a.j,k);b=y(b.j,g);a.add(b).va(e);b=true}if(b)return c.nm(e,f,d);return false}Wa.prototype.nm=function(a,b,c){var d=this.j.ka(b);if(d==0)return false;d=-(this.j.ka(a)+this.Ya)/d;a.add(y(b,d)).va(c);return true};Wa.prototype.xb=function(a){return a.ka(this.j)+this.Ya};
function Za(a,b){return a.j.ka(b)<=0};function B(a,b,c){this.V=a?a:new t;this.da=b?b:new t;this.ea=c?c:new t}B.prototype.V=null;B.prototype.da=null;B.prototype.ea=null;B.prototype.e=function(){return new B(this.V,this.da,this.ea)};function db(a){var b=new Wa(false),c=a.V,d=a.ea;b.j=Ha(a.da.substract(c),d.substract(c));b.j.normalize();Xa(b,c);return b}B.prototype.Qg=function(a){return eb(this,a,this.V,this.da,this.ea)&&eb(this,a,this.da,this.V,this.ea)&&eb(this,a,this.ea,this.V,this.da)};
function eb(a,b,c,d,e){a=e.substract(d);b=Ha(a,b.substract(d));c=Ha(a,c.substract(d));return b.ka(c)>=0}function fb(a){return Ha(a.da.substract(a.V),a.ea.substract(a.V))}B.prototype.nm=function(a,b){var c=fb(this);c.normalize();var d=c.ka(b);if(o.ra(d))a=null;else{var e=this.V.ka(c);c=-(c.ka(a)-e)/d;a=a.add(y(b,c))}if(a==null)return null;if(this.Qg(a))return a;return null};B.prototype.va=function(a){this.V.va(a.V);this.da.va(a.da);this.ea.va(a.ea)};function D(a){if(a==null)a=true;this.L=this.B=this.K=this.J=this.I=this.n=this.A=this.w=this.H=this.t=this.q=this.v=this.G=this.s=this.u=this.p=0;this.Pa=false;if(a){this.L=this.n=this.q=this.p=1;this.Pa=true}}function gb(a){if(a.Pa)return true;a.Pa=o.Ge(a.p)&&o.ra(a.u)&&o.ra(a.s)&&o.ra(a.G)&&o.ra(a.v)&&o.Ge(a.q)&&o.ra(a.t)&&o.ra(a.H)&&o.ra(a.w)&&o.ra(a.A)&&o.Ge(a.n)&&o.ra(a.I)&&o.ra(a.J)&&o.ra(a.K)&&o.ra(a.B)&&o.Ge(a.L);return a.Pa}
function hb(a){if(a.Pa)return true;return o.Ge(a.p)&&o.ra(a.u)&&o.ra(a.s)&&o.ra(a.G)&&o.ra(a.v)&&o.Ge(a.q)&&o.ra(a.t)&&o.ra(a.H)&&o.ra(a.w)&&o.ra(a.A)&&o.Ge(a.n)&&o.ra(a.I)&&o.Ge(a.L)}D.prototype.D=function(a){return o.D(this.p,a.p)&&o.D(this.u,a.u)&&o.D(this.s,a.s)&&o.D(this.G,a.G)&&o.D(this.v,a.v)&&o.D(this.q,a.q)&&o.D(this.t,a.t)&&o.D(this.H,a.H)&&o.D(this.w,a.w)&&o.D(this.A,a.A)&&o.D(this.n,a.n)&&o.D(this.I,a.I)&&o.D(this.J,a.J)&&o.D(this.K,a.K)&&o.D(this.B,a.B)&&o.D(this.L,a.L)};
function ib(a){return new t(a.p,a.q,a.n)}function jb(a,b){var c=b.e();b.c=c.c*a.p+c.b*a.v+c.d*a.w;b.b=c.c*a.u+c.b*a.q+c.d*a.A;b.d=c.c*a.s+c.b*a.t+c.d*a.n}function kb(a,b,c){b.c=c.c*a.p+c.b*a.v+c.d*a.w;b.b=c.c*a.u+c.b*a.q+c.d*a.A;b.d=c.c*a.s+c.b*a.t+c.d*a.n}function lb(a,b){return new t(b.c*a.p+b.b*a.v+b.d*a.w+a.J,b.c*a.u+b.b*a.q+b.d*a.A+a.K,b.c*a.s+b.b*a.t+b.d*a.n+a.B)}function mb(a,b){var c=b.c*a.u+b.b*a.q+b.d*a.A+a.K,d=b.c*a.s+b.b*a.t+b.d*a.n+a.B;b.c=b.c*a.p+b.b*a.v+b.d*a.w+a.J;b.b=c;b.d=d}
function nb(a,b){return new t(b.c+a.J,b.b+a.K,b.d+a.B)}
function F(a,b){var c=new D(false);if(a.Pa){b.va(c);return c}if(b.Pa){a.va(c);return c}c.p=a.p*b.p+a.v*b.u+a.w*b.s+a.J*b.G;c.u=a.u*b.p+a.q*b.u+a.A*b.s+a.K*b.G;c.s=a.s*b.p+a.t*b.u+a.n*b.s+a.B*b.G;c.G=a.G*b.p+a.H*b.u+a.I*b.s+a.L*b.G;c.v=a.p*b.v+a.v*b.q+a.w*b.t+a.J*b.H;c.q=a.u*b.v+a.q*b.q+a.A*b.t+a.K*b.H;c.t=a.s*b.v+a.t*b.q+a.n*b.t+a.B*b.H;c.H=a.G*b.v+a.H*b.q+a.I*b.t+a.L*b.H;c.w=a.p*b.w+a.v*b.A+a.w*b.n+a.J*b.I;c.A=a.u*b.w+a.q*b.A+a.A*b.n+a.K*b.I;c.n=a.s*b.w+a.t*b.A+a.n*b.n+a.B*b.I;c.I=a.G*b.w+a.H*b.A+
a.I*b.n+a.L*b.I;c.J=a.p*b.J+a.v*b.K+a.w*b.B+a.J*b.L;c.K=a.u*b.J+a.q*b.K+a.A*b.B+a.K*b.L;c.B=a.s*b.J+a.t*b.K+a.n*b.B+a.B*b.L;c.L=a.G*b.J+a.H*b.K+a.I*b.B+a.L*b.L;return c}
function ob(a,b){if(a.Pa){a.va(b);return true}var c=(a.p*a.q-a.u*a.v)*(a.n*a.L-a.I*a.B)-(a.p*a.t-a.s*a.v)*(a.A*a.L-a.I*a.K)+(a.p*a.H-a.G*a.v)*(a.A*a.B-a.n*a.K)+(a.u*a.t-a.s*a.q)*(a.w*a.L-a.I*a.J)-(a.u*a.H-a.G*a.q)*(a.w*a.B-a.n*a.J)+(a.s*a.H-a.G*a.t)*(a.w*a.K-a.A*a.J);if(c>-1.0E-7&&c<1.0E-7)return false;c=1/c;b.p=c*(a.q*(a.n*a.L-a.I*a.B)+a.t*(a.I*a.K-a.A*a.L)+a.H*(a.A*a.B-a.n*a.K));b.u=c*(a.A*(a.s*a.L-a.G*a.B)+a.n*(a.G*a.K-a.u*a.L)+a.I*(a.u*a.B-a.s*a.K));b.s=c*(a.K*(a.s*a.H-a.G*a.t)+a.B*(a.G*a.q-a.u*
a.H)+a.L*(a.u*a.t-a.s*a.q));b.G=c*(a.u*(a.H*a.n-a.t*a.I)+a.s*(a.q*a.I-a.H*a.A)+a.G*(a.t*a.A-a.q*a.n));b.v=c*(a.t*(a.w*a.L-a.I*a.J)+a.H*(a.n*a.J-a.w*a.B)+a.v*(a.I*a.B-a.n*a.L));b.q=c*(a.n*(a.p*a.L-a.G*a.J)+a.I*(a.s*a.J-a.p*a.B)+a.w*(a.G*a.B-a.s*a.L));b.t=c*(a.B*(a.p*a.H-a.G*a.v)+a.L*(a.s*a.v-a.p*a.t)+a.J*(a.G*a.t-a.s*a.H));b.H=c*(a.s*(a.H*a.w-a.v*a.I)+a.G*(a.v*a.n-a.t*a.w)+a.p*(a.t*a.I-a.H*a.n));b.w=c*(a.H*(a.w*a.K-a.A*a.J)+a.v*(a.A*a.L-a.I*a.K)+a.q*(a.I*a.J-a.w*a.L));b.A=c*(a.I*(a.p*a.K-a.u*a.J)+
a.w*(a.u*a.L-a.G*a.K)+a.A*(a.G*a.J-a.p*a.L));b.n=c*(a.L*(a.p*a.q-a.u*a.v)+a.J*(a.u*a.H-a.G*a.q)+a.K*(a.G*a.v-a.p*a.H));b.I=c*(a.G*(a.q*a.w-a.v*a.A)+a.p*(a.H*a.A-a.q*a.I)+a.u*(a.v*a.I-a.H*a.w));b.J=c*(a.v*(a.n*a.K-a.A*a.B)+a.q*(a.w*a.B-a.n*a.J)+a.t*(a.A*a.J-a.w*a.K));b.K=c*(a.w*(a.s*a.K-a.u*a.B)+a.A*(a.p*a.B-a.s*a.J)+a.n*(a.u*a.J-a.p*a.K));b.B=c*(a.J*(a.s*a.q-a.u*a.t)+a.K*(a.p*a.t-a.s*a.v)+a.B*(a.u*a.v-a.p*a.q));b.L=c*(a.p*(a.q*a.n-a.t*a.A)+a.u*(a.t*a.w-a.v*a.n)+a.s*(a.v*a.A-a.q*a.w));b.Pa=a.Pa;return true}
function pb(a){var b=new D(false);if(ob(a,b)){b.va(a);return true}return false}function qb(a){var b=new D(false);b.p=a.p;b.u=a.v;b.s=a.w;b.G=a.J;b.v=a.u;b.q=a.q;b.t=a.A;b.H=a.K;b.w=a.s;b.A=a.t;b.n=a.n;b.I=a.B;b.J=a.G;b.K=a.H;b.B=a.I;b.L=a.L;b.Pa=a.Pa;return b}
function rb(a,b,c){a.Pa=false;switch(b){case 0:a.p=c;break;case 1:a.u=c;break;case 2:a.s=c;break;case 3:a.G=c;break;case 4:a.v=c;break;case 5:a.q=c;break;case 6:a.t=c;break;case 7:a.H=c;break;case 8:a.w=c;break;case 9:a.A=c;break;case 10:a.n=c;break;case 11:a.I=c;break;case 12:a.J=c;break;case 13:a.K=c;break;case 14:a.B=c;break;case 15:a.L=c;break}}D.prototype.e=function(){var a=new D(false);this.va(a);return a};
D.prototype.va=function(a){a.p=this.p;a.u=this.u;a.s=this.s;a.G=this.G;a.v=this.v;a.q=this.q;a.t=this.t;a.H=this.H;a.w=this.w;a.A=this.A;a.n=this.n;a.I=this.I;a.J=this.J;a.K=this.K;a.B=this.B;a.L=this.L;a.Pa=this.Pa};function tb(a,b,c,d,e){b=1/Math.tan(b/2);a.p=b/c;a.u=0;a.s=0;a.G=0;a.v=0;a.q=b;a.t=0;a.H=0;a.w=0;a.A=0;a.n=e/(e-d);a.I=1;a.J=0;a.K=0;a.B=-d*e/(e-d);a.L=0;a.Pa=false}
function ub(a,b,c,d){c=c.substract(b);c.normalize();d=Ha(d,c);d.normalize();var e=Ha(c,d);a.p=d.c;a.u=e.c;a.s=c.c;a.G=0;a.v=d.b;a.q=e.b;a.t=c.b;a.H=0;a.w=d.d;a.A=e.d;a.n=c.d;a.I=0;a.J=-d.ka(b);a.K=-e.ka(b);a.B=-c.ka(b);a.L=1;a.Pa=false}function vb(a,b){var c=y(b,o.Bd);b=Math.cos(c.c);var d=Math.sin(c.c),e=Math.cos(c.b),f=Math.sin(c.b),g=Math.cos(c.d);c=Math.sin(c.d);a.p=e*g;a.u=e*c;a.s=-f;var j=d*f;f=b*f;a.v=j*g-b*c;a.q=j*c+b*g;a.t=d*e;a.w=f*g+d*c;a.A=f*c-d*g;a.n=b*e;a.Pa=false}
function wb(a){var b=-Math.asin(a.s),c=Math.cos(b);b*=o.ue;var d,e;if(Math.abs(c)>1.0E-8){var f=1/c;d=a.n*f;e=a.t*f;c=Math.atan2(e,d)*o.ue;d=a.p*f;e=a.u*f}else{c=0;d=a.q;e=-a.v}a=Math.atan2(e,d)*o.ue;if(c<0)c+=360;if(b<0)b+=360;if(a<0)a+=360;return new t(c,b,a)}function xb(a,b){a.J=b.c;a.K=b.b;a.B=b.d;a.Pa=false}function yb(a,b){a.p=b.c;a.q=b.b;a.n=b.d;a.Pa=false}function zb(a,b){var c=Ta(b),d;for(d=0;d<8;++d)mb(a,c[d]);a=c[0];b.C=a.e();b.M=a.e();for(d=1;d<8;++d)A(b,c[d])}
D.prototype.toString=function(){return this.p+" "+this.u+" "+this.s+" "+this.G+"\n"+this.v+" "+this.q+" "+this.t+" "+this.H+"\n"+this.w+" "+this.A+" "+this.n+" "+this.I+"\n"+this.J+" "+this.K+" "+this.B+" "+this.L};function Ab(a,b,c,d){this.d=this.b=this.c=0;this.za=1;if(a!=null)this.c=a;if(b!=null)this.b=b;if(c!=null)this.d=c;if(d!=null)this.za=d}m=Ab.prototype;m.c=0;m.b=0;m.d=0;m.za=0;m.e=function(){var a=new Ab;this.va(a);return a};m.va=function(a){a.c=this.c;a.b=this.b;a.d=this.d;a.za=this.za};function Bb(a,b){return new Ab(a.c*b,a.b*b,a.d*b,a.za*b)}Ab.prototype.qa=function(a){this.c+=a.c;this.b+=a.b;this.d+=a.d;this.za+=a.za;return this};
function Cb(a,b,c,d){var e=b.ka(c);if(e<0){b=Bb(b,-1);e*=-1}if(e+1>0.05)if(1-e>=0.05){var f=Math.acos(e),g=1/Math.sin(f);e=Math.sin(f*(1-d))*g;d=Math.sin(f*d)*g}else{e=1-d;d=d}else{c=new Ab(-b.b,b.c,-b.za,b.d);e=Math.sin(o.PI*(0.5-d));d=Math.sin(o.PI*d)}b=Bb(b,e).qa(Bb(c,d));a.c=b.c;a.b=b.b;a.d=b.d;a.za=b.za}Ab.prototype.ka=function(a){return this.c*a.c+this.b*a.b+this.d*a.d+this.za*a.za};
function Db(a){var b=new D(false),c=a.c,d=a.b,e=a.d;a=a.za;b.p=1-2*d*d-2*e*e;b.v=2*c*d+2*e*a;b.w=2*c*e-2*d*a;b.J=0;b.u=2*c*d-2*e*a;b.q=1-2*c*c-2*e*e;b.A=2*e*d+2*c*a;b.K=0;b.s=2*c*e+2*d*a;b.t=2*e*d-2*c*a;b.n=1-2*c*c-2*d*d;b.B=0;b.G=0;b.H=0;b.I=0;b.L=1;b.Pa=false;return b}function Eb(a,b){var c=a.za*a.za,d=a.c*a.c,e=a.b*a.b,f=a.d*a.d;b.d=Math.atan2(2*(a.c*a.b+a.d*a.za),d-e-f+c);b.c=Math.atan2(2*(a.b*a.d+a.c*a.za),-d-e+f+c);b.b=Math.asin(o.sc(-2*(a.c*a.d-a.b*a.za),-1,1))}
function Fb(a,b,c,d){var e=b*0.5;b=Math.sin(e);var f=Math.cos(e);e=c*0.5;c=Math.sin(e);var g=Math.cos(e);e=d*0.5;d=Math.sin(e);var j=Math.cos(e);e=g*j;j=c*j;g=g*d;c=c*d;a.c=b*e-f*c;a.b=f*j+b*g;a.d=f*g-b*j;a.za=f*e+b*c;a.normalize()}Ab.prototype.normalize=function(){var a=this.c*this.c+this.b*this.b+this.d*this.d+this.za*this.za;if(a!=1){a=a=1/Math.sqrt(a);this.c*=a;this.b*=a;this.d*=a;this.za*=a}};Ab.prototype.toString=function(){return"(x: "+this.c+" y:"+this.b+" z:"+this.d+" w:"+this.za+")"};function Gb(){this.Xa=[];for(var a=0;a<Hb;++a)this.Xa.push(new Wa)}Gb.prototype.Xa=null;var Hb=6;
Gb.prototype.Bk=function(a){var b;b=this.Xa[2];b.j.c=a.G+a.p;b.j.b=a.H+a.v;b.j.d=a.I+a.w;b.Ya=a.L+a.J;b=this.Xa[3];b.j.c=a.G-a.p;b.j.b=a.H-a.v;b.j.d=a.I-a.w;b.Ya=a.L-a.J;b=this.Xa[5];b.j.c=a.G-a.u;b.j.b=a.H-a.q;b.j.d=a.I-a.A;b.Ya=a.L-a.K;b=this.Xa[4];b.j.c=a.G+a.u;b.j.b=a.H+a.q;b.j.d=a.I+a.A;b.Ya=a.L+a.K;b=this.Xa[0];b.j.c=a.G-a.s;b.j.b=a.H-a.t;b.j.d=a.I-a.n;b.Ya=a.L-a.B;b=this.Xa[1];b.j.c=a.s;b.j.b=a.t;b.j.d=a.n;b.Ya=a.B;for(a=a=0;a<Hb;++a){b=this.Xa[a];var c=-(1/b.j.getLength());b.j=y(b.j,c);b.Ya*=
c}};function Ib(a){var b=new t;Ya(a.Xa[0],a.Xa[5],a.Xa[2],b);return b}function Jb(a){var b=new t;Ya(a.Xa[0],a.Xa[5],a.Xa[3],b);return b}function Kb(a){var b=new t;Ya(a.Xa[0],a.Xa[4],a.Xa[3],b);return b}function Lb(a){var b=new t;Ya(a.Xa[0],a.Xa[4],a.Xa[2],b);return b}Gb.prototype.ob=function(a){var b=new z;b.reset(a.c,a.b,a.d);A(b,Ib(this));A(b,Jb(this));A(b,Lb(this));A(b,Kb(this));return b};
function Mb(a,b){b=Ta(b);for(var c=0;c<6;++c){for(var d=false,e=0;e<8;++e){var f;f=a.Xa[c];f=f.j.ka(b[e])+f.Ya;f=f<-1.0E-6?1:f>1.0E-6?0:2;if(f!=0){d=true;break}}if(!d)return false}return true};function Nb(a){if(a){this.f=new t;this.j=new t;this.oa=4294967295;this.Ba=new Oa;this.Eg=new Oa}}m=Nb.prototype;m.f=null;m.j=null;m.oa=0;m.Ba=null;m.Eg=null;function Qb(){this.l="";this.mc=false;this.lg=this.mg=this.ge=this.he=this.Xh=this.Fa=this.kd=null}Qb.prototype.Qb=function(){if(this.kd)return this.kd.width;if(this.he!=null)return this.he;return 0};Qb.prototype.Pb=function(){if(this.kd)return this.kd.height;if(this.ge!=null)return this.ge;return 0};function Rb(){this.eb="";this.bc=null;this.ca=false;this.i="SetOverlayText"}Rb.prototype.h=function(a,b){var c=new Rb;c.eb=this.eb;c.bc=this.bc;c.ca=this.ca;if(c.bc==a)c.bc=b;return c};
Rb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ca)c=a;else if(this.bc!=-1)c=Sb(b,this.bc);if(c&&c.Bm){var d=this.eb.indexOf("$");if(d!=-1){a=this.eb;for(var e=0,f=true;f;){f=false;d=a.indexOf("$",e);if(d!=-1){e=d+1;var g=a.indexOf("$",d+1);if(g!=-1){f=true;var j=a.substr(d+1,g-(d+1));if(j=Tb(j,false,b)){d=a.substr(0,d);d+=Ub(j);e=d.length+1;d+=a.substr(g+1,a.length-g);a=d}}}}c.Bm(a)}else c.Bm(this.eb)}}};
function Vb(){this.xj=0;this.qf=null;this.ca=false;this.i="MakeSceneNodeInvisible"}Vb.prototype.h=function(a,b){var c=new Vb;c.xj=this.xj;c.qf=this.qf;c.ca=this.ca;if(c.qf==a)c.qf=b;return c};Vb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ca)c=a;else if(this.qf!=-1)c=Sb(b,this.qf);if(c)switch(this.xj){case 0:c.X=false;break;case 1:c.X=true;break;case 2:c.X=!c.X;break}}};function Wb(){this.Tc=this.Sd=false;this.i="ChangeSceneNodePosition"}
Wb.prototype.h=function(a,b){var c=new Wb;c.te=this.te;c.Pc=this.Pc;c.Oc=this.Oc;c.ca=this.ca;c.mf=this.mf;c.ha=this.ha?this.ha.e():null;c.Xi=this.Xi?this.Xi.e():null;c.Sd=this.Sd;c.Tc=this.Tc;if(c.Pc==a)c.Pc=b;if(c.Oc==a)c.Oc=b;return c};
Wb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ca)c=a;else if(this.Pc!=-1)c=Sb(b,this.Pc);if(c){var d=null;switch(this.te){case 0:d=this.ha.e();break;case 1:d=c.f.add(this.ha);break;case 2:var e=null;if(this.mf)e=a;else if(this.Oc!=-1)e=Sb(b,this.Oc);if(e)d=e.f.add(this.ha);break;case 3:d=this.ha.getLength();a=c.Y;b=new t(1,0,0);jb(a,b);if(c.k()=="camera")b=c.ga.substract(c.f);va(b,d);d=c.f.add(b);break;case 4:a=new z;a.reset(this.ha.c,this.ha.b,this.ha.d);A(a,this.Xi);d=new t;d.c=
a.C.c+Math.random()*(a.M.c-a.C.c);d.b=a.C.b+Math.random()*(a.M.b-a.C.b);d.d=a.C.d+Math.random()*(a.M.d-a.C.d);break;case 5:d=b.Zk.add(this.ha);break}if(d!=null)if(this.Sd&&this.Tc>0){a=new Xb;a.$=c.f.e();a.P=d;a.pd=this.Tc;a.ph=true;Yb(a);Zb(c,a)}else c.f=d}}};function $b(){this.i="ChangeSceneNodeRotation"}$b.prototype.h=function(a,b){var c=new $b;c.Hl=this.Hl;c.ug=this.ug;c.ca=this.ca;c.ha=this.ha?this.ha.e():null;c.Yj=this.Yj;c.Wl=this.Wl;if(c.ug==a)c.ug=b;return c};
$b.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ca)c=a;else if(this.ug!=-1)c=Sb(b,this.ug);if(c){b=null;switch(this.Hl){case 0:b=this.ha.e();break;case 1:b=c.S.add(this.ha);break}if(b)if(this.Yj){a=new ac;b=b;var d=c.S,e=this.Wl;a.yn=true;a.we=b.e();a.Nm=d.e();a.Gl=a.Na+e;Zb(c,a)}else c.S=b}}};function bc(){this.i="ChangeSceneNodeScale"}bc.prototype.h=function(a,b){var c=new bc;c.Jl=this.Jl;c.vg=this.vg;c.ca=this.ca;c.ha=this.ha?this.ha.e():null;if(c.vg==a)c.vg=b;return c};
bc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ca)c=a;else if(this.vg!=-1)c=Sb(b,this.vg);if(c)switch(this.Jl){case 0:c.ma=this.ha.e();break;case 1:c.ma=Fa(c.ma,this.ha);break}}};function fc(){this.i="ChangeSceneNodeTexture"}fc.prototype.h=function(a,b){var c=new fc;c.od=this.od;c.bc=this.bc;c.ca=this.ca;c.Hg=this.Hg;c.Tk=this.Tk;if(c.bc==a)c.bc=b;return c};
fc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ca)c=a;else if(this.bc!=-1)c=Sb(b,this.bc);if(c)if(c.k()=="2doverlay")c.Fa=this.Hg;else{a=c.$c();if(this.od==0)for(b=0;b<a;++b){var d=c.uc(b);d.db=this.Hg}else if(this.od==1){d=c.uc(this.Tk);if(d!=null)d.db=this.Hg}}}};function gc(){this.i="ExecuteJavaScript"}gc.prototype.h=function(){var a=new gc;a.Wk=this.Wk;return a};gc.prototype.execute=function(a){o.lm=a;eval(this.Wk);o.lm=null};function hc(){this.i="OpenWebpage"}
hc.prototype.h=function(){var a=new hc;a.Zl=this.Zl;a.ga=this.ga;return a};hc.prototype.execute=function(){window.open(this.Zl,this.ga)};function ic(){this.i="SetSceneNodeAnimation"}ic.prototype.h=function(a,b){var c=new ic;c.tg=this.tg;c.ca=this.ca;c.Yb=this.Yb;c.Gk=this.Gk;if(c.tg==a)c.tg=b;return c};ic.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ca)c=a;else if(this.tg!=-1)c=Sb(b,this.tg);if(c){a=c;a.k()=="animatedmesh"&&jc(a,this.Gk,this.Yb)}}};
function kc(a){this.Aa=a;this.i="SwitchToScene"}kc.prototype.h=function(){var a=new kc;a.pf=this.pf;return a};kc.prototype.execute=function(){this.Aa&&lc(this.Aa,this.pf,true)};function mc(a){this.Aa=a;this.i="SetActiveCamera"}mc.prototype.h=function(a,b){var c=new mc;c.Rf=this.Rf;if(c.Rf==a)c.Rf=b;return c};mc.prototype.execute=function(a,b){if(a&&b){a=null;if(this.Rf!=-1)a=Sb(b,this.Rf);a!=null&&a.k()=="camera"&&this.Aa&&nc(this.Aa,a)}};
function oc(){this.Sd=false;this.Tc=0;this.i="SetCameraTarget"}oc.prototype.h=function(){var a=new oc;a.te=this.te;a.Pc=this.Pc;a.Oc=this.Oc;a.ca=this.ca;a.mf=this.mf;a.ha=this.ha?this.ha.e():null;a.Sd=this.Sd;a.Tc=this.Tc;return a};
oc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ca)c=a;else if(this.Pc!=-1)c=Sb(b,this.Pc);var d=c;if(d.k()=="camera"){var e=d.ga.e();switch(this.te){case 0:e=this.ha.e();break;case 1:e=c.f.add(this.ha);break;case 2:var f=null;if(this.mf)f=a;else if(this.Oc!=-1)f=Sb(b,this.Oc);if(f)e=f.f.add(this.ha);break}if(e!=null)if(this.Sd&&this.Tc>0){a=new Xb;a.$=d.ga.e();a.P=e;a.pd=this.Tc;a.ph=true;a.dh=true;Yb(a);Zb(c,a)}else{pc(d,e);c=J(d,"camerafps");c!=null&&qc(c,e)}}}};
function rc(){this.bj=this.ie=this.fi=0;this.sf=-1;this.Uc=100;this.i="Shoot";this.rf=-1;this.dk=false;this.Zg=this.bh=null;this.ck=new t}rc.prototype.h=function(a,b){var c=new rc;c.fi=this.fi;c.ie=this.ie;c.bj=this.bj;c.sf=this.sf;c.Uc=this.Uc;c.rf=this.rf;c.dk=this.dk;c.bh=this.bh;c.Zg=this.Zg?this.Zg.h(a,b):null;c.ck=this.ck.e();if(c.sf==a)c.sf=b;if(c.rf==a)c.rf=b;return c};
rc.prototype.execute=function(a,b){if(a&&b){var c=new Ma,d=false,e=null,f=null,g=sc(b,"gameai");if(this.rf!=-1){a=Sb(b,this.rf);if(a!=null){d=true;e=a;c.$=Pa(a.ob());c.$.qa(this.ck);mb(a.Y,c.$);f=b.ba;if(this.dk&&f){a=new Ma;a.$=O(f);a.P=f.ga;f=Na(a);va(f,this.Uc);a.P=a.$.add(f);tc(this,a,g,this.Uc,b);uc(this,a,g,this.Uc,e,b);c.P=a.P}else{f=a.Y;if(this.bh){a=new D;vb(a,this.bh);f=F(f,a)}c.P.set(1,0,0);jb(f,c.P);c.P.qa(c.$)}}}else if(a!=null){e=a;if((f=J(a,"gameai"))&&f.Kk){c=f.Lk;d=true}}if(!d)if(f=
b.ba){e=f;c.$=O(f);c.P=f.ga;d=true}if(d){d=Na(c);va(d,this.Uc);c.P=c.$.add(d);tc(this,c,g,this.Uc,b);if(this.fi==1){g=null;if(this.sf!=-1)g=Sb(b,this.sf);if(g){g=g.h(b.Ma,-1,-1);vc(b.Ma,g);if(g!=null){g.f=c.$;P(g);g.X=true;g.Ha=-1;g.l="";b=Na(c);b=Ja(b);g.S=b;b=this.bj;if(b==0)b=1;d=new Xb;d.$=c.$;d.P=c.P;d.pd=c.getLength()/b;d.ph=true;Yb(d);d.Mn=true;d.Fn=e;d.En=this.ie;d.lj=true;d.Qf=this.Zg;d.th=this.Uc/b;Zb(g,d)}}}else if(this.fi==0){e=uc(this,c,g,this.Uc,e,b);if(e!=null){b.Zk=c.P.e();(c=J(e,
"gameai"))&&wc(c,this.ie,e)}}}}};function tc(a,b,c,d,e){if(c.length!=0)if(a=J(c[0],"gameai"))if(a=a.ia){e=xc(zc.prototype,e,b.$,b.P,a,true);if(e<d){d=Na(b);va(d,e);b.P=b.$.add(d)}}}function uc(a,b,c,d,e,f){a=d;d=null;for(var g=0;g<c.length;++g)if(c[g]!==e){var j=J(c[g],"gameai");if(!(j&&!(j.Wb>0))){j={};j.Ja=0;if(Ac(zc.prototype,f,c[g],b,false,false,null,j))if(j.Ja<a){a=j.Ja;d=c[g]}}}if(d){c=Na(b);va(c,a);b.P=b.$.add(c)}return d}function Bc(){this.i="SetOrChangeAVariable"}
Bc.prototype.h=function(){var a=new Bc;a.Ob=this.Ob;a.tl=this.tl;a.Df=this.Df;a.Td=this.Td;return a};
Bc.prototype.execute=function(a,b){if(a&&b)if(this.Ob!=null){a=Tb(this.Ob,true,b);if(a!=null){var c=null;if(this.Df==1){c=Tb(this.Td,false,b);if(c==null)return}if(c==null){c=new Cc;Dc(c,this.Td)}switch(this.tl){case 0:c=c;if(c!=null){a.fc=c.fc;a.Sc=c.Sc;a.lc=c.lc;a.jc=c.jc}break;case 1:Ec(a,Q(a)+Q(c));break;case 2:Ec(a,Q(a)-Q(c));break;case 3:c=Q(c);Ec(a,c!=0?Q(a)/c:0);break;case 4:c=Q(c);Fc(a,c!=0?Math.floor(Q(a)/c):0);break;case 5:Ec(a,Q(a)*Q(c));break;case 6:Fc(a,Math.floor(Q(a)*Q(c)));break}Gc(a,
b)}}};function Hc(){this.i="IfVariable"}Hc.prototype.h=function(a,b){var c=new Hc;c.Ob=this.Ob;c.dj=this.dj;c.Df=this.Df;c.Td=this.Td;c.o=this.o?this.o.h(a,b):null;c.mi=this.mi?this.mi.h(a,b):null;return c};
Hc.prototype.execute=function(a,b){if(a&&b)if(this.Ob!=null){var c=Tb(this.Ob,true,b);if(c!=null){var d=null;if(this.Df==1){d=Tb(this.Td,false,b);if(d==null)return}if(d==null){d=new Cc;Dc(d,this.Td)}b=false;switch(this.dj){case 0:case 1:b=c.fc==0&&d.fc==0?Ub(c)==Ub(d):o.D(Q(c),Q(d));if(this.dj==1)b=!b;break;case 2:b=Q(c)>Q(d);break;case 3:b=Q(c)<Q(d);break}if(b)this.o&&this.o.execute(a);else this.mi&&this.mi.execute(a)}}};function Ic(){this.ei=null;this.ca=false;this.i="RestartBehaviors"}
Ic.prototype.h=function(a,b){var c=new Ic;c.ei=this.ei;c.ca=this.ca;if(c.ca==a)c.ca=b;return c};Ic.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ca)c=a;else if(this.ei!=-1)c=Sb(b,this.ei);if(c)for(a=0;a<c.ja.length;++a){b=c.ja[a];b!=null&&b.reset()}}};function Jc(){this.i="PlaySound"}Jc.prototype.h=function(a,b){var c=new Jc;c.Qc=this.Qc;c.pg=this.pg;c.wl=this.wl?this.wl.e():null;c.pe=this.pe;c.Ih=this.Ih;c.ef=this.ef;c.Kg=this.Kg;c.og=this.og;c.Nb=this.Nb;if(c.Qc==a)c.Qc=b;return c};
Jc.prototype.execute=function(a,b){if(!(b==null||this.Nb==null))this.Mc=Kc(o.Vd,this.Nb,this.ef,this.Kg)};function Lc(){this.i="StopSpecificSound"}Lc.prototype.h=function(){var a=new Lc;a.Nb=this.Nb;return a};Lc.prototype.execute=function(a,b){b==null||this.Nb==null||Mc(o.Vd,this.Nb.l)};function Nc(){this.i="StopSound"}Nc.prototype.h=function(){var a=new Nc;a.In=this.In;a.Rp=this.Rp;return a};
Nc.prototype.execute=function(){for(var a=o.Vd,b=0;b<a.Fb.length;++b){var c=a.Fb[b];c.Ai=true;c.src.cc.pause()}a.Fb=[]};function Oc(){this.i="StoreLoadVariable"}Oc.prototype.h=function(){var a=new Oc;a.Dj=this.Dj;a.Ob=this.Ob;return a};function Pc(a,b,c,d){a=new Date;a.setDate(a.getDate()+d);c=escape(c)+("; expires="+a.toUTCString());document.cookie=b+"="+c}
function Qc(a,b){a=document.cookie.split(";");for(var c=0;c<a.length;++c){var d=a[c],e=d.indexOf("="),f=d.substr(0,e);f=f.replace(/^\s+|\s+$/g,"");if(f==b)return unescape(d.substr(e+1))}return null}Oc.prototype.execute=function(a,b){if(!(this.Ob==null||this.Ob=="")){a=Tb(this.Ob,this.Dj,b);if(a!=null)try{this.Dj?Dc(a,Qc(this,a.getName())):Pc(this,a.getName(),Ub(a),99)}catch(c){}}};function Rc(a){this.Pe=[];this.ua=a}
Rc.prototype.execute=function(a){for(var b=0;b<this.Pe.length;++b)this.Pe[b].execute(a,this.ua)};function Sc(a,b){b!=null&&a.Pe.push(b)}function Tc(a,b){for(var c=0;c<a.Pe.length;++c){var d=a.Pe[c];if(d.i==b)return d}return null}Rc.prototype.h=function(a,b){for(var c=new Rc(this.ua),d=0;d<this.Pe.length;++d){var e=this.Pe[d];e.h!=null&&Sc(c,e.h(a,b))}return c};function Uc(a){this.Aa=a;this.i="RestartScene"}Uc.prototype.h=function(){var a=new Uc;a.pf=this.pf;return a};
Uc.prototype.execute=function(){this.Aa&&this.Aa.ym(this.pf)};function Vc(){this.i="ActionDeleteSceneNode"}Vc.prototype.h=function(a,b){var c=new Vc;c.xg=this.xg;c.Ok=this.Ok;c.Sl=this.Sl;if(c.xg==a)c.xg=b;return c};Vc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Ok)c=a;else if(this.xg!=-1)c=Sb(b,this.xg);c!=null&&Wc(b,c,this.Sl)}};function Xc(){this.i="ActionCloneSceneNode"}
Xc.prototype.h=function(a,b){var c=new Xc;c.wg=this.wg;c.Jk=this.Jk;c.o=this.o?this.o.h(a,b):null;if(c.wg==a)c.wg=b;return c};Xc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Jk)c=a;else if(this.wg!=-1)c=Sb(b,this.wg);if(c){a=c.Ha;var d=-1;d=Yc(b);a=c.h(c.ub,a,d);if(a!=null){a.Ha=d;vc(c.ub,a);b.Ji(c,a);if(c=c.cb)if(c=c.h(a)){a.cb=c;b.zd&&Zc(b.zd,c)}this.o&&this.o.execute(a)}}}};function $c(a){this.i="ActionPlayMovie";this.Aa=a}
$c.prototype.h=function(a,b){var c=new $c;c.ef=this.ef;c.cj=this.cj;c.Xl=this.Xl;c.Qc=this.Qc;c.pg=this.pg;c.el=this.el;c.Vi=this.Vi?this.Vi.h(a,b):null;c.Ui=this.Ui?this.Ui.h(a,b):null;if(c.Qc==a)c.Qc=b;return c};
$c.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.pg)c=a;else if(this.Qc!=-1)c=Sb(b,this.Qc);a:{a=this.Aa;var d=this.Xl;b=this.Vi;for(var e=this.Ui,f=0;f<a.Tg.length;++f){var g=a.Tg[f];if(g.filename==d){a=g;break a}}if(this.cj==0){d=new ad(d,a.T);d.tk=b;d.uk=e;a.Tg.push(d);a=d}else a=null}if(a!=null)switch(this.cj){case 0:a.play(this.ef);if(c)if(c.k()=="2doverlay")c.Fa=a.Pi;else{c=c.uc(this.el);if(c!=null)c.db=a.Pi}break;case 1:a.pause();break;case 2:a.stop();break}}};
function ad(a,b){this.filename=a;this.td=null;this.zm=b;this.uk=this.tk=this.Pi=null;this.vr=this.Fi=this.Po=false;this.state=0;this.pm=this.Jo=false;this.Tq=function(){this.state=2;this.td.play();this.Po=true;var c=this.Pi,d=bd(this.zm,this.td,true);c.Fa=d.Fa;c.he=d.he;c.ge=d.ge;c.mg=d.mg;c.lg=d.lg};this.Uq=function(){this.state=0;this.Fi=true};this.dq=function(){this.state=0;this.pm=this.Fi=true};this.play=function(c){if(!(this.state==2||this.state==1)){if(this.td)if(this.state==3){this.td.play();
this.state=2;this.Fi=false;return}else if(this.state==0){this.td.currentTime=0;this.td.play();this.state=2;this.Fi=false;return}var d=document.createElement("video"),e=this;this.td=d;this.Jo=c;d.addEventListener("canplaythrough",function(){e.Tq()},true);d.addEventListener("ended",function(){e.Uq()},true);d.addEventListener("error",function(){e.dq()},true);d.preload="auto";d.src=a;d.style.display="none";if(this.Jo)d.loop=true;this.state=1;c=document.createElement("canvas");if(c!=null){c.width=16;c.height=
16;this.Pi=bd(this.zm,c,true)}}};this.pause=function(){if(this.state==2){this.td.pause();this.state=3}};this.stop=function(){if(this.state==2){this.td.pause();this.state=0}};this.Rq=function(){this.Po&&this.state==2&&cd(this.zm,this.Pi,this.td)};this.oq=function(){if(this.state==0)return true;return this.Fi}};function dd(){this.i=0;this.rc=this.db=null;this.Gf=true;this.Dc=this.Tb=false;this.fe=true}dd.prototype.Bk=function(a){if(a){this.i=a.i;this.Gf=a.Gf;this.db=a.db;this.rc=a.rc;this.Tb=a.Tb;this.Dc=a.Dc;this.fe=a.fe}};dd.prototype.e=function(){var a=new dd;a.i=this.i;a.$l=this.$l;a.Gf=this.Gf;a.db=this.db;a.rc=this.rc;a.Tb=this.Tb;a.Dc=this.Dc;a.fe=this.fe;return a};function ed(a){return a.i==fd||a.i==gd||a.i==hd||a.i==id||a.i==jd}m=dd.prototype;m.i=0;m.db=null;m.rc=null;m.Gf=true;m.$l=true;m.Tb=false;
m.fe=true;m.Dc=false;var fd=12,gd=13,jd=16,hd=14,id=26;function kd(){this.g=new z;this.N=new dd;this.fa=[];this.m=[];this.Va=null;this.Sj=this.Rj=false;this.yd=this.Rd=null}m=kd.prototype;m.g=null;m.N=null;m.fa=null;m.m=null;m.Va=null;m.Rd=null;m.yd=null;m.update=function(a,b){if(a)this.Rj=true;else if(b)this.Sj=true;else this.Va=null};function ld(a){if(!a.m||a.m.length==0)a.g.reset(0,0,0);else{var b=a.m[0];a.g.C=b.f.e();a.g.M=b.f.e();for(var c=1;c<a.m.length;++c){b=a.m[c];A(a.g,b.f)}}}
kd.prototype.h=function(){var a=new kd;a.g=this.g.e();a.N=this.N.e();if(this.m)for(var b=0;b<this.m.length;++b)a.m.push(this.m[b]);if(this.fa)for(b=0;b<this.fa.length;++b)a.fa.push(this.fa[b]);if(this.Rd)for(b=0;b<this.Rd.length;++b)a.Rd.push(this.Rd[b].e());if(this.yd)for(b=0;b<this.yd.length;++b)a.yd.push(this.yd[b].e());return a};function md(){this.g=new z;this.pa=[]}md.prototype.vd=function(a){this.pa.push(a)};function nd(a){var b=0;if(a.pa)for(var c=0;c<a.pa.length;++c)if(a.pa[c].fa)b+=a.pa[c].fa.length;return b/3}md.prototype.h=function(){var a=new md;a.g=this.g.e();if(this.pa)for(var b=0;b<this.pa.length;++b)this.pa[b]&&a.pa.push(this.pa[b].h());return a};o.xp=function(){this.fl=[]};function od(a,b){for(var c=0;c<a.fl.length;++c){var d=a.fl[c];if(d.l==b)return d}return null}o.Lp=function(){this.l="";this.Hh=new D;this.Z=[];this.fh=[];this.kf=[];this.xe=[];this.of=[];this.Ff=[];this.ii=new z;this.tj=new D;this.Xe=new D;this.dg=new D;this.xc=new t(0,0,0);this.Sb=new t(1,1,1);this.yc=new Ab;this.yh=new D;this.Zm=false;this.Ro=this.So=this.Ko=-1};o.Pp=function(){this.Oi=this.Ri=this.xi=0;this.Kn=new t;this.Jn=new t};
o.Op=function(){this.frame=0;this.scale=new t};o.Mp=function(){this.frame=0;this.position=new t};o.Np=function(){this.frame=0;this.rotation=new Ab};o.Oh=function(){this.l="";this.Cc=this.P=this.xd=0};o.Oh.prototype.l="";o.Oh.prototype.xd=0;o.Oh.prototype.P=0;o.Oh.prototype.Cc=0;o.Ol=function(){this.l="";this.wd=[];this.ed=0;this.$a=[];this.sa=[];this.nf=[];this.Nk=0;this.on=this.Ed=false;this.Zq=this.vp=this.Yk=0;this.rb=new z;this.Zf=1;this.kk=[];this.Fm=true;this.jl=[]};o.Ol.prototype.vd=function(a){this.$a.push(a)};
o.Ol.prototype.ob=da("rb");function pd(a,b,c){if(!(b==null&&c!=null))if(b==null)for(b=0;b<a.nf.length;++b)pd(a,a.nf[b],null);else{b.tj=c==null?b.Hh.e():F(c.tj,b.Hh);b.dg=b.Hh.e();b.Xe=b.tj.e();if(gb(b.yh)){b.yh=b.tj.e();pb(b.yh)}for(c=0;c<b.Z.length;++c)pd(a,b.Z[c],b)}}
function qd(a,b,c,d,e,f,g,j){var k=-1;e=k=-1;var n=c.kf;e=c.xe;c=c.of;var p;if(n.length){k=-1;if(k==-1)for(g=0;g<n.length;++g){p=n[g];if(p.frame>=b){k=g;break}}if(k!=-1)if(a.Zf==0||k==0){p=n[k];p.position.e()}else if(a.Zf==1){p=n[k];n=n[k-1];g=b-p.frame;k=n.frame-b;wa(d,ua(Da(Da(n.position.substract(p.position),1/(g+k)),g),p.position))}}if(e.length){k=-1;if(k==-1)for(g=0;g<e.length;++g){d=e[g];if(d.frame>=b){k=g;break}}if(k!=-1)if(a.Zf==0||k==0){d=e[k];d.scale.e()}else if(a.Zf==1){d=e[k];e=e[k-1];
g=b-d.frame;k=e.frame-b;wa(f,ua(Da(Da(e.scale.substract(d.scale),1/(g+k)),g),d.scale))}}if(c.length){e=-1;if(e==-1)for(g=0;g<c.length;++g){f=c[g];if(f.frame>=b){e=g;break}}if(e!=-1)if(a.Zf==0||e==0){f=c[e];f.rotation.e()}else if(a.Zf==1){f=c[e];a=c[e-1];g=b-f.frame;k=a.frame-b;Cb(j,f.rotation,a.rotation,g/(g+k))}}}function rd(a,b,c){if(b==null)for(b=0;b<a.nf.length;++b)rd(a,a.nf[b],null);else{b.Xe=c==null||b.Zm?b.dg.e():F(c.Xe,b.dg);for(c=0;c<b.Z.length;++c)rd(a,b.Z[c],b)}}
function sd(a,b,c,d){if(b.Ff.length){c=F(b.Xe,b.yh);for(var e=new t,f=new t,g=a.$a,j,k=0;k<b.Ff.length;++k){var n=b.Ff[k];j=n.Kn;e.c=j.c*c.p+j.b*c.v+j.d*c.w+c.J;e.b=j.c*c.u+j.b*c.q+j.d*c.A+c.K;e.d=j.c*c.s+j.b*c.t+j.d*c.n+c.B;d&&kb(c,f,n.Jn);j=g[n.xi];j=j.m[n.Ri];if(a.kk[n.xi][n.Ri]){j.f.qa(y(e,n.Oi));d&&j.j.qa(y(f,n.Oi))}else{a.kk[n.xi][n.Ri]=true;j.f=y(e,n.Oi);if(d)j.j=y(f,n.Oi)}}}for(c=0;c<b.Z.length;++c)sd(a,b.Z[c],b,d)}
function td(a,b){if(!b)return null;var c=a.jl.length;b=b.toLowerCase();for(var d=0;d<c;++d){var e=a.jl[d];if(e.l&&e.l.toLowerCase()==b)return e}return null};function ud(){this.Wa=[];this.T=null;this.Uj=""}
function vd(a,b,c){if(b==null||b=="")return null;var d=wd(a,b);if(d!=null)return d;if(c){d=new Qb;d.l=b;xd(a,d);d.kd=new Image;d.kd.onload=function(){var e=d,f=a.T;if(f!=null){var g=f.U,j=g.createTexture(),k=e.kd;if((k.width&k.width-1)!=0||(k.height&k.height-1)!=0){var n=document.createElement("canvas");if(n!=null){n.width=yd(f,k.width);n.height=yd(f,k.height);n.getContext("2d").drawImage(k,0,0,k.width,k.height,0,0,n.width,n.height);k=n}}g.bindTexture(g.TEXTURE_2D,j);zd(f,j,k);g.generateMipmap(g.TEXTURE_2D);
g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_NEAREST);g.bindTexture(g.TEXTURE_2D,null);f.Hm=true;e.Fa=j;e.mc=true}};d.kd.src=d.l;return d}return null}function wd(a,b){for(var c=0;c<a.Wa.length;++c){var d=a.Wa[c];if(d.l==b)return d}return null}function xd(a,b){if(b!=null){wd(a,b.l)!=null&&o.na.print("ERROR! Cannot add the texture multiple times: "+b.l);a.Wa.push(b)}};function Ad(a){this.Yn=a;this.Zp=a.length;this.Oa=0;this.jr=null;this.kr=8;this.bo=false}function Bd(a){return a.Zp-a.Oa}function Cd(a,b){return a.Yn.charCodeAt(b)&255}function R(a){return Dd(a,1)!=0}function Ed(a,b){for(var c=0,d=a.Oa,e=d+b;e>d;)c=c*256+Cd(a,--e);a.Oa+=b;return c}function Dd(a,b){a=Ed(a,b);if(a&1<<b*8-1)a=(~a+1)*-1;return a}function S(a){return Dd(a,4)}
function W(a){var b;var c=a.Yn,d=a.Oa;b=c.charCodeAt(d+3)&255;var e=c.charCodeAt(d+2)&255,f=c.charCodeAt(d+1)&255;d=c.charCodeAt(d+0)&255;c=(b<<1&255|e>>7)-127;e=(e&127)<<16|f<<8|d;b=e==0&&c==-127?0:(1-2*(b>>7))*(1+e*Math.pow(2,-23))*Math.pow(2,c);a.Oa+=4;return b}Ad.prototype.wa=function(a,b){this.bo=a||0;this.buffer=[];if(b){for(var c=a=b.length,d=this.buffer=new Array(a);c;d[a-c]=b.charCodeAt(--c));this.bo&&d.reverse()}};Ad.prototype.reset=function(){this.Oa=0;return this};function Fd(){this.U=this.canvas=null;this.height=this.width=0;this.Hm=false;this.La=new D;this.qd=new D;this.ia=new D;this.Rb=new oa;this.Rb.pc=0;this.Rb.kc=0;this.Rb.gc=0;this.tr=this.ur=null;this.ab=[];this.lb=[];this.ib=[];this.mb=[];this.nb=[];this.qe=30;this.ek=this.Ph=this.xl=this.qn=this.pn=null;this.bf=[];this.Xc=this.nj=null;this.lo=false;this.Hi=true;this.mh=null;this.Cd=this.$f=false;this.Vb=new oa;this.wh=0.01;this.ui=1;this.vi=4;this.Ll=false;this.nd=this.Ml=null}Fd.prototype.Ph=null;
Fd.prototype.Qb=da("width");function Gd(a){var b=a.Hm;a.Hm=false;return b}Fd.prototype.Pb=da("height");
function Hd(a,b){if(b!=null){var c=a.U;if(c!=null){var d=null;try{d=a.Ll?a.nb[b.i]:a.Cd?b.Dc?a.mb[b.i]:a.ib[b.i]:b.Dc?a.lb[b.i]:a.ab[b.i]}catch(e){}if(d!=null){a.Xc=d;c.useProgram(d);if(a.Ph!=null)try{a.Ph(b.i)}catch(f){}d.Cm!=null&&d.Cm();if(d.eo){c.enable(c.BLEND);c.blendFunc(d.fo,d.co)}else c.disable(c.BLEND);!b.Gf||b.i==fd||b.i==gd||b.i==jd?c.depthMask(false):c.depthMask(true);b.$l?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST);c.depthFunc(a.$f?c.GREATER:c.LEQUAL);b.fe?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE);
if(b.db&&b.db.mc){c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,b.db.Fa);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,b.Tb?c.CLAMP_TO_EDGE:c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,b.Tb?c.CLAMP_TO_EDGE:c.REPEAT)}else{c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,null)}c.uniform1i(c.getUniformLocation(d,"texture1"),0);if(b.rc&&b.rc.mc){c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,b.rc.Fa)}else{c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,null)}c.uniform1i(c.getUniformLocation(d,
"texture2"),1)}}}}
function Id(a,b,c){if(b!=null)if(a.U!=null){if(b.Va==null)Jd(a,b);else if(b.Sj){if(!(b.m.length==0||b.fa.length==0))if(b.Va.bp<b.m.length||b.Va.wk<b.fa.length){b.Va=null;Jd(a,b)}else if(b.Va!=null){for(var d=a.U,e=b.m.length,f=b.Va.Lo,g=b.Va.bq,j=0;j<e;++j){var k=b.m[j];f[j*3+0]=k.f.c;f[j*3+1]=k.f.b;f[j*3+2]=k.f.d;g[j*4+0]=o.ad(k.oa)/255;g[j*4+1]=o.Zc(k.oa)/255;g[j*4+2]=o.Yc(k.oa)/255;g[j*4+3]=o.Wd(k.oa)/255}d.bindBuffer(d.ARRAY_BUFFER,b.Va.zk);d.bufferSubData(d.ARRAY_BUFFER,0,f);d.bindBuffer(d.ARRAY_BUFFER,
b.Va.em);d.bufferSubData(d.ARRAY_BUFFER,0,g);if(b.Va.wk<b.fa.length){e=b.fa.length;f=new WebGLUnsignedShortArray(e);for(g=0;g<e;g+=3){f[g+0]=b.fa[g+0];f[g+1]=b.fa[g+2];f[g+2]=b.fa[g+1]}b.Va.vk=d.createBuffer();d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.Va.vk);d.bufferData(d.ELEMENT_ARRAY_BUFFER,f,d.STATIC_DRAW);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,null)}b.Va.wk=b.fa.length;b.Va.bp=b.m.length}}else b.Rj&&Kd(a,b);b.Rj=false;b.Sj=false;b=b.Va;c=c;d=a.U;e=b.Gm&&b.dm;d.enableVertexAttribArray(0);d.enableVertexAttribArray(1);
d.enableVertexAttribArray(2);d.enableVertexAttribArray(3);d.enableVertexAttribArray(4);d.bindBuffer(d.ARRAY_BUFFER,b.zk);d.vertexAttribPointer(0,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.$o);d.vertexAttribPointer(1,2,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.ap);d.vertexAttribPointer(2,2,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Fo);d.vertexAttribPointer(3,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.em);d.vertexAttribPointer(4,4,d.FLOAT,false,0,0);if(e){d.enableVertexAttribArray(5);
d.enableVertexAttribArray(6);d.bindBuffer(d.ARRAY_BUFFER,b.Gm);d.vertexAttribPointer(5,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.dm);d.vertexAttribPointer(6,3,d.FLOAT,false,0,0)}d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.vk);g=new D(false);a.La.va(g);g=F(g,a.qd);g=F(g,a.ia);f=a.Xc;f.Ao!=null&&d.uniformMatrix4fv(f.Ao,false,Ld(a,g));if(f.zo!=null){g=new D(true);g=F(g,a.qd);g=F(g,a.ia);pb(g);g=qb(g);d.uniformMatrix4fv(f.zo,false,Ld(a,g))}if(f.xo!=null){g=new D(true);g=F(g,a.qd);g=F(g,a.ia);d.uniformMatrix4fv(f.xo,
false,Ld(a,g))}f.yo!=null&&d.uniformMatrix4fv(f.yo,false,Ld(a,qb(a.ia)));f.wo!=null&&Md(a,f,e,e);f.to!=null&&a.U.uniform4f(f.to,a.Vb.pc,a.Vb.kc,a.Vb.gc,1);f.uo!=null&&a.U.uniform1f(f.uo,a.wh);a.Ll&&Od(a,f);if(f.vo!=null){g=r()*a.ui/500%1E3;a.U.uniform1f(f.vo,g);a.U.uniform1f(f.tq,a.vi)}if(c==null)c=b.wk;d.drawElements(d.TRIANGLES,c,d.UNSIGNED_SHORT,0);if(e){d.disableVertexAttribArray(5);d.disableVertexAttribArray(6)}}}
function Kd(a,b){if(b.Va!=null){a=a.U;for(var c=b.m.length,d=b.Va.Lo,e=0;e<c;++e){var f=b.m[e];d[e*3+0]=f.f.c;d[e*3+1]=f.f.b;d[e*3+2]=f.f.d}a.bindBuffer(a.ARRAY_BUFFER,b.Va.zk);a.bufferSubData(a.ARRAY_BUFFER,0,d)}}
function Jd(a,b){if(b.Va==null){a=a.U;var c={},d=b.m.length,e=new WebGLFloatArray(d*3),f=new WebGLFloatArray(d*3),g=new WebGLFloatArray(d*2),j=new WebGLFloatArray(d*2),k=new WebGLFloatArray(d*4),n=null,p=null;if(b.Rd)n=new WebGLFloatArray(d*3);if(b.yd)p=new WebGLFloatArray(d*3);for(var q=0;q<d;++q){var h=b.m[q];e[q*3+0]=h.f.c;e[q*3+1]=h.f.b;e[q*3+2]=h.f.d;f[q*3+0]=h.j.c;f[q*3+1]=h.j.b;f[q*3+2]=h.j.d;g[q*2+0]=h.Ba.c;g[q*2+1]=h.Ba.b;j[q*2+0]=h.Eg.c;j[q*2+1]=h.Eg.b;k[q*4+0]=o.ad(h.oa)/255;k[q*4+1]=o.Zc(h.oa)/
255;k[q*4+2]=o.Yc(h.oa)/255;k[q*4+3]=o.Wd(h.oa)/255}if(n&&p)for(q=0;q<d;++q){h=b.Rd[q];n[q*3+0]=h.c;n[q*3+1]=h.b;n[q*3+2]=h.d;h=b.yd[q];p[q*3+0]=h.c;p[q*3+1]=h.b;p[q*3+2]=h.d}q=b.fa.length;h=new WebGLUnsignedShortArray(q);for(var w=0;w<q;w+=3){h[w+0]=b.fa[w+0];h[w+1]=b.fa[w+2];h[w+2]=b.fa[w+1]}c.zk=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.zk);a.bufferData(a.ARRAY_BUFFER,e,a.DYNAMIC_DRAW);c.Lo=e;c.$o=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.$o);a.bufferData(a.ARRAY_BUFFER,g,a.STATIC_DRAW);
c.ap=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.ap);a.bufferData(a.ARRAY_BUFFER,j,a.STATIC_DRAW);c.Fo=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Fo);a.bufferData(a.ARRAY_BUFFER,f,a.STATIC_DRAW);if(n&&p){c.Gm=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Gm);a.bufferData(a.ARRAY_BUFFER,n,a.STATIC_DRAW);c.dm=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.dm);a.bufferData(a.ARRAY_BUFFER,p,a.STATIC_DRAW)}a.bindBuffer(a.ARRAY_BUFFER,null);c.em=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.em);
a.bufferData(a.ARRAY_BUFFER,k,a.STATIC_DRAW);c.bq=k;a.bindBuffer(a.ARRAY_BUFFER,null);c.vk=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.vk);a.bufferData(a.ELEMENT_ARRAY_BUFFER,h,a.STATIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);c.U=a;c.wk=q;c.bp=d;b.Va=c;b.Rj=false;b.Sj=false}}
function Od(a,b){var c=a.U;if(a.nd&&b.Bo){var d=new D(true);d=F(d,a.nd);d=F(d,a.ia);c.uniformMatrix4fv(b.Bo,false,Ld(a,d))}if(a.Ml){c.activeTexture(c.TEXTURE2);c.bindTexture(c.TEXTURE_2D,a.Ml.Fa)}else{c.activeTexture(c.TEXTURE2);c.bindTexture(c.TEXTURE_2D,null)}c.uniform1i(c.getUniformLocation(b,"shadowmap"),2)}
function Md(a,b,c,d){var e=new ArrayBuffer(16*Float32Array.BYTES_PER_ELEMENT),f=new WebGLFloatArray(e);e=new ArrayBuffer(20*Float32Array.BYTES_PER_ELEMENT);var g=new WebGLFloatArray(e);e=new D(true);if(!c&&(a.bf!=null&&a.bf.length>0||a.nj!=null))ob(a.ia,e);for(c=0;c<4;++c){var j=c*4;if(a.bf!=null&&c<a.bf.length){var k=a.bf[c],n=lb(e,k.Vh);f[j]=n.c;f[j+1]=n.b;f[j+2]=n.d;n=1;n=d?1/(k.Ea*k.Ea):k.hh;f[j+3]=n;g[j]=k.oa.pc;g[j+1]=k.oa.kc;g[j+2]=k.oa.gc}else{f[j]=1;f[j+1]=0;f[j+2]=0;f[j+3]=1;g[j]=0;g[j+
1]=0;g[j+2]=0}g[j+3]=1}g[16]=a.Rb.pc;g[17]=a.Rb.kc;g[18]=a.Rb.gc;g[19]=1;a.U.uniform4fv(b.wo,f);a.U.uniform4fv(b.sq,g);if(b.ro!=null){d=a.nj;f=null;f=d&&d.Ga?d.Ga.e():new t(1,0,0);Ca(f,-1);jb(e,f);f.normalize();a.U.uniform3f(b.ro,f.c,f.b,f.d,1);d?a.U.uniform4f(b.so,d.oa.pc,d.oa.kc,d.oa.gc,1):a.U.uniform4f(b.so,0,0,0,1)}}
function Pd(a,b,c,d,e,f,g){if(!(d<=0||e<=0||a.width==0||a.height==0)){var j=true;if(g==null||g==false)j=false;g=a.U;g.enableVertexAttribArray(0);g.disableVertexAttribArray(1);g.disableVertexAttribArray(2);g.disableVertexAttribArray(3);g.disableVertexAttribArray(4);c=a.height-c;var k=2/a.width,n=2/a.height;b=b*k-1;c=c*n-1;d*=k;e*=n;k=new WebGLFloatArray(12);k[0]=b;k[1]=c;k[2]=0;k[3]=b+d;k[4]=c;k[5]=0;k[6]=b+d;k[7]=c-e;k[8]=0;k[9]=b;k[10]=c-e;k[11]=0;b=new WebGLUnsignedShortArray(6);b[0]=0;b[1]=2;b[2]=
1;b[3]=0;b[4]=3;b[5]=2;c=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,c);g.bufferData(g.ARRAY_BUFFER,k,g.STATIC_DRAW);g.vertexAttribPointer(0,3,g.FLOAT,false,0,0);d=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,d);g.bufferData(g.ELEMENT_ARRAY_BUFFER,b,g.STATIC_DRAW);a.Xc=a.pn;g.useProgram(a.Xc);g.uniform4f(g.getUniformLocation(a.Xc,"vColor"),o.ad(f)/255,o.Zc(f)/255,o.Yc(f)/255,j?o.Wd(f)/255:1);g.depthMask(false);g.disable(g.DEPTH_TEST);if(j){g.enable(g.BLEND);g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA)}else g.disable(g.BLEND);
g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0);g.deleteBuffer(c);g.deleteBuffer(d)}}
function Qd(a,b,c,d,e,f,g,j,k,n,p){if(!(f==null||f.mc==false||d<=0||e<=0||a.width==0||a.height==0)){if(k==null)k=1;if(n==null)n=1;var q=true;if(g==null||g==false)q=false;g=a.U;g.enableVertexAttribArray(0);g.enableVertexAttribArray(1);g.disableVertexAttribArray(2);g.disableVertexAttribArray(3);g.disableVertexAttribArray(4);c=a.height-c;var h=2/a.width,w=2/a.height;b=b*h-1;c=c*w-1;d*=h;e*=w;h=new WebGLFloatArray(12);h[0]=b;h[1]=c;h[2]=0;h[3]=b+d;h[4]=c;h[5]=0;h[6]=b+d;h[7]=c-e;h[8]=0;h[9]=b;h[10]=c-
e;h[11]=0;b=new WebGLFloatArray(8);b[0]=0;b[1]=0;b[2]=k;b[3]=0;b[4]=k;b[5]=n;b[6]=0;b[7]=n;k=new WebGLUnsignedShortArray(6);k[0]=0;k[1]=2;k[2]=1;k[3]=0;k[4]=3;k[5]=2;n=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,n);g.bufferData(g.ARRAY_BUFFER,h,g.STATIC_DRAW);g.vertexAttribPointer(0,3,g.FLOAT,false,0,0);c=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,c);g.bufferData(g.ARRAY_BUFFER,b,g.STATIC_DRAW);g.vertexAttribPointer(1,2,g.FLOAT,false,0,0);b=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,
b);g.bufferData(g.ELEMENT_ARRAY_BUFFER,k,g.STATIC_DRAW);a.Xc=j==null?a.qn:j;g.useProgram(a.Xc);g.depthMask(false);g.disable(g.DEPTH_TEST);if(q){g.enable(g.BLEND);g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA)}else g.disable(g.BLEND);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,f.Fa);if(p){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST)}else{g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,
g.TEXTURE_MIN_FILTER,g.LINEAR)}g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.activeTexture(g.TEXTURE1);g.bindTexture(g.TEXTURE_2D,null);g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0);g.deleteBuffer(c);g.deleteBuffer(n);g.deleteBuffer(b);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,f.Fa);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_NEAREST)}}
function Rd(a,b,c,d,e,f,g){if(!(f==null||f.mc==false||d<=0||e<=0||a.width==0||a.height==0)){var j=a.U;a.Xc=a.xl;j.useProgram(a.Xc);j.uniform4f(j.getUniformLocation(a.Xc,"vColor"),o.ad(g)/255,o.Zc(g)/255,o.Yc(g)/255,o.Wd(g)/255);Qd(a,b,c,d,e,f,true,a.xl,f.mg/f.he,f.lg/f.ge)}}function Sd(a){a.bf=[];a.nj=null}function Td(a,b){a.bf.push(b)}function Ud(a,b){a.nj=b}
function Vd(a){if(!(a.canvas==null||a.U==null))if(!(a.width==a.canvas.width&&a.height==a.canvas.height)){a.width=a.canvas.width;a.height=a.canvas.height;var b=a.U;b.viewport&&b.viewport(0,0,a.width,a.height)}}
Fd.prototype.gb=function(a){this.canvas=a;this.U=null;try{a=["webgl","experimental-webgl","moz-webgl","webkit-3d","3d"];for(var b=0;b<a.length;b++)try{this.U=this.canvas.getContext(a[b],{alpha:false});if(this.U!=null)break}catch(c){}}catch(d){}if(this.U==null)return false;else{if(typeof WebGLFloatArray=="undefined"&&typeof Float32Array!="undefined")try{WebGLFloatArray=Float32Array;WebGLUnsignedShortArray=Uint16Array}catch(e){la(o.na,"Error: Float32 array types for webgl not found.")}if(typeof WebGLFloatArray==
"undefined"&&typeof CanvasFloatArray!="undefined")try{WebGLFloatArray=CanvasFloatArray;WebGLUnsignedShortArray=CanvasUnsignedShortArray}catch(f){la(o.na,"Error: canvas array types for webgl not found.")}a=this.U;a.getProgramParameter||(a.getProgramParameter=a.getProgrami);a.getShaderParameter||(a.getShaderParameter=a.getShaderi);a=this.U;this.Hi=false;var g=b=X(this,this.ec,this.Kf),j=X(this,this.ec,this.gm),k=X(this,this.ec,this.iq),n=X(this,this.ec,this.Kf,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),
p=X(this,this.ec,this.pk,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),q=X(this,this.fp,this.pk,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),h=X(this,this.ec,this.Kf,true,a.ONE,a.ONE_MINUS_SRC_COLOR),w=X(this,this.Ek,this.gm),u=X(this,this.Ek,this.gm,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),K=X(this,this.ep,this.Kf),C=X(this,this.dp,this.no),v=X(this,this.ec,this.oo);this.pn=X(this,this.Vq,this.lq);this.qn=X(this,this.cp,this.kq);this.xl=X(this,this.cp,this.gq);this.ab[0]=g;this.ab[1]=g;this.ab[2]=j;this.ab[3]=
j;this.ab[4]=j;this.ab[5]=k;this.ab[fd]=h;this.ab[gd]=n;this.ab[hd]=p;this.ab[11]=w;this.ab[jd]=u;this.ab[17]=C;this.ab[25]=v;this.ab[id]=q;this.ab[23]=K;g=X(this,this.ud,this.Kf);n=X(this,this.ud,this.Kf,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);p=X(this,this.ud,this.pk,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);q=X(this,this.gp,this.pk,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);h=X(this,this.ud,this.Kf,true,a.ONE,a.ONE_MINUS_SRC_COLOR);w=X(this,this.Ug,this.mo);u=X(this,this.Ug,this.mo,true,a.SRC_ALPHA,
a.ONE_MINUS_SRC_ALPHA);v=X(this,this.ud,this.oo);this.lb[0]=g;this.lb[1]=g;this.lb[2]=j;this.lb[3]=j;this.lb[4]=j;this.lb[5]=k;this.lb[fd]=h;this.lb[gd]=n;this.lb[hd]=p;this.lb[11]=w;this.lb[jd]=u;this.lb[17]=C;this.lb[25]=v;this.lb[id]=q;j=X(this,this.ec,this.Lf);k=X(this,this.ec,this.hm);n=X(this,this.ec,this.jq);p=X(this,this.ec,this.Lf,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);h=X(this,this.ec,this.zi,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);w=X(this,this.fp,this.zi,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);
u=X(this,this.ec,this.Lf,true,a.ONE,a.ONE_MINUS_SRC_COLOR);K=X(this,this.Ek,this.hm);C=X(this,this.Ek,this.hm,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);v=X(this,this.ep,this.Lf);var G=X(this,this.dp,this.no),H=X(this,this.ec,this.jm);this.ib[0]=j;this.ib[1]=j;this.ib[2]=k;this.ib[3]=k;this.ib[4]=k;this.ib[5]=n;this.ib[fd]=u;this.ib[gd]=p;this.ib[hd]=h;this.ib[11]=K;this.ib[jd]=C;this.ib[17]=G;this.ib[25]=H;this.ib[id]=w;this.ib[23]=v;j=X(this,this.ud,this.Lf);p=X(this,this.ud,this.Lf,true,a.SRC_ALPHA,
a.ONE_MINUS_SRC_ALPHA);h=X(this,this.ud,this.zi,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);w=X(this,this.gp,this.zi,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);u=X(this,this.ud,this.Lf,true,a.ONE,a.ONE_MINUS_SRC_COLOR);K=X(this,this.Ug,this.ok);C=X(this,this.Ug,this.ok,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);H=X(this,this.ud,this.jm);this.mb[0]=j;this.mb[1]=j;this.mb[2]=k;this.mb[3]=k;this.mb[4]=k;this.mb[5]=n;this.mb[fd]=u;this.mb[gd]=p;this.mb[hd]=h;this.mb[11]=K;this.mb[jd]=C;this.mb[17]=G;this.mb[25]=
H;this.mb[id]=w;j=X(this,this.Si,this.im);p=X(this,this.Si,this.im,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);h=X(this,this.Si,this.zi,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);u=X(this,this.Si,this.im,true,a.ONE,a.ONE_MINUS_SRC_COLOR);K=X(this,this.Ug,this.ok);C=X(this,this.Ug,this.ok,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);H=X(this,this.Si,this.jm);this.nb[0]=j;this.nb[1]=j;this.nb[2]=k;this.nb[3]=k;this.nb[4]=k;this.nb[5]=n;this.nb[fd]=u;this.nb[gd]=p;this.nb[hd]=h;this.nb[11]=K;this.nb[jd]=C;this.nb[17]=
G;this.nb[25]=H;this.nb[id]=q;this.Hi=true;for(q=0;q<this.qe;++q){if(this.ab[q]==null)this.ab[q]=b;if(this.lb[q]==null)this.lb[q]=b;if(this.ib[q]==null)this.ib[q]=b;if(this.mb[q]==null)this.mb[q]=b;if(this.nb[q]==null)this.nb[q]=b}a.useProgram(g);this.Xc=g;a.clearColor(0,0,1,1);a.clearDepth(1);a.depthMask(true);a.enable(a.DEPTH_TEST);a.disable(a.BLEND);a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);a.enable(a.CULL_FACE);a.cullFace(a.BACK);Vd(this)}return true};
function Wd(a,b,c){var d=a.U,e=d.createShader(b);if(e==null)return null;d.shaderSource(e,c);d.compileShader(e);if(!d.getShaderParameter(e,d.COMPILE_STATUS)){if(a.Hi){a="Error loading "+(b==d.VERTEX_SHADER?"vertex":"fragment")+" shader: "+d.getShaderInfoLog(e);o.na&&la(o.na,a)}return null}return e}function Xd(a,b,c,d,e,f,g){b=X(a,b,c,d,e,f);if(!b)return-1;b.Cm=g;a.qe+=1;a.ab[a.qe]=b;a.lb[a.qe]=b;a.ib[a.qe]=b;a.mb[a.qe]=b;a.nb[a.qe]=b;return a.qe}
function Yd(a,b){var c=null;try{c=a.ab[b]}catch(d){}return c}
function X(a,b,c,d,e,f,g){if(g==null)g=false;g=g;var j=a.U,k=b,n=c;if(k.indexOf("precision ")==-1)k="#ifdef GL_ES\t\t\t\t\t\t\t\t\t\t\t\t\n\tprecision mediump float;\t\t\t\t\t\t\t\t\t\n\t#endif\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n"+b;if(n.indexOf("precision ")==-1)n="#ifdef GL_ES\t\t\t\t\t\t\t\t\t\t\t\t\n\tprecision mediump float;\t\t\t\t\t\t\t\t\t\n\t#endif\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n"+c;b=Wd(a,j.VERTEX_SHADER,k);c=Wd(a,j.FRAGMENT_SHADER,n);if(!b||!c){a.Hi&&o.na.print("Could not create shader program");
g=null}else{n=j.createProgram();j.attachShader(n,b);j.attachShader(n,c);j.bindAttribLocation(n,0,"vPosition");j.bindAttribLocation(n,1,"vTexCoord1");j.bindAttribLocation(n,2,"vTexCoord2");j.bindAttribLocation(n,3,"vNormal");j.bindAttribLocation(n,4,"vColor");if(g){j.bindAttribLocation(n,5,"vBinormal");j.bindAttribLocation(n,6,"vTangent")}j.linkProgram(n);if(j.getProgramParameter(n,j.LINK_STATUS)){j.useProgram(n);j.uniform1i(j.getUniformLocation(n,"texture1"),0);j.uniform1i(j.getUniformLocation(n,
"texture2"),1)}else a.Hi&&o.na.print("Could not link program:"+j.getProgramInfoLog(n));g=n}if(g){g.eo=d?d:false;g.fo=e;g.co=f;a=a.U;g.Ao=a.getUniformLocation(g,"worldviewproj");g.zo=a.getUniformLocation(g,"normaltransform");g.xo=a.getUniformLocation(g,"modelviewtransform");g.yo=a.getUniformLocation(g,"worldtransform");g.wo=a.getUniformLocation(g,"arrLightPositions");g.sq=a.getUniformLocation(g,"arrLightColors");g.ro=a.getUniformLocation(g,"vecDirLight");g.so=a.getUniformLocation(g,"colorDirLight");
g.to=a.getUniformLocation(g,"fogColor");g.uo=a.getUniformLocation(g,"fogDensity");g.vo=a.getUniformLocation(g,"grassMovement");g.tq=a.getUniformLocation(g,"windStrength");g.Bo=a.getUniformLocation(g,"worldviewprojLight");g.Cm=null}return g}Fd.prototype.Hc=function(a){a&&a.va(this.ia)};function Ld(a,b){return new WebGLFloatArray([b.p,b.u,b.s,b.G,b.v,b.q,b.t,b.H,b.w,b.A,b.n,b.I,b.J,b.K,b.B,b.L])}
Fd.prototype.deleteTexture=function(a){if(a!=null){var b=this.U;b.deleteTexture(a.Fa);a.Fa=null;a.mc=false;a.Xh&&b.deleteFramebuffer(a.Xh);a.Xh=null}};
function Zd(a,b,c,d){var e=a.U;if(d)if(!e.getExtension("OES_texture_float"))return null;a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a);a.width=b;a.height=c;var f=e.createTexture();e.bindTexture(e.TEXTURE_2D,f);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);d?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,b,c,0,e.RGBA,e.FLOAT,null):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,b,c,0,e.RGBA,e.UNSIGNED_BYTE,null);var g=e.createRenderbuffer();
e.bindRenderbuffer(e.RENDERBUFFER,g);e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,b,c);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,f,0);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,g);e.bindTexture(e.TEXTURE_2D,null);e.bindRenderbuffer(e.RENDERBUFFER,null);e.bindFramebuffer(e.FRAMEBUFFER,null);e=new Qb;e.l="";e.Fa=f;e.kd=null;e.mc=true;e.he=b;e.ge=c;e.mg=b;e.lg=c;e.Xh=a;e.dr=d;return e}
function $d(a,b,c,d,e){var f=a.U;if(b!=null){f.bindFramebuffer(f.FRAMEBUFFER,b.Xh);f.viewport(0,0,b.he,b.ge)}else{f.bindFramebuffer(f.FRAMEBUFFER,null);f.viewport(0,0,a.width,a.height)}if(a.mh!=null){f.bindTexture(f.TEXTURE_2D,a.mh.Fa);f.generateMipmap(f.TEXTURE_2D)}a.mh=b;if(c||d){b=0;if(c){b|=f.COLOR_BUFFER_BIT;f.clearColor(o.ad(e)/255,o.Zc(e)/255,o.Yc(e)/255,1)}if(d){f.clearDepth(a.$f?0:1);b|=f.DEPTH_BUFFER_BIT}f.clear(b)}return true}
function cd(a,b,c,d){var e=a.U;b=b.Fa;e.bindTexture(e.TEXTURE_2D,b);var f=c.width,g=c.height;if(c.videoWidth)f=c.videoWidth;if(c.videoHeight)g=c.videoHeight;if((f&f-1)!=0||(g&g-1)!=0){var j=document.createElement("canvas");j.width=yd(a,f);j.height=yd(a,g);var k=j.getContext("2d");k.fillStyle="rgba(0, 255, 255, 1)";k.fillRect(0,0,j.width,j.height);d?k.drawImage(c,0,0,f,g,0,0,f,g):k.drawImage(c,0,0,f,g,0,0,j.width,j.height);c=j}zd(a,b,c);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);
e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.generateMipmap(e.TEXTURE_2D);e.bindTexture(e.TEXTURE_2D,null)}
function bd(a,b,c){var d=a.U,e=d.createTexture();d.bindTexture(d.TEXTURE_2D,e);var f=b.width,g=b.height;if(b.videoWidth)f=b.videoWidth;if(b.videoHeight)g=b.videoHeight;var j=f,k=g;if((f&f-1)!=0||(g&g-1)!=0){k=document.createElement("canvas");k.width=yd(a,f);k.height=yd(a,g);j=k.getContext("2d");c?j.drawImage(b,0,0,f,g,0,0,f,g):j.drawImage(b,0,0,f,g,0,0,k.width,k.height);b=k;j=k.width;k=k.height}zd(a,e,b);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,
d.NEAREST);d.generateMipmap(d.TEXTURE_2D);d.bindTexture(d.TEXTURE_2D,null);a=new Qb;a.l="";a.Fa=e;a.kd=null;a.mc=true;a.he=j;a.ge=k;a.mg=f;a.lg=g;return a}function yd(a,b){--b;for(a=1;a<32;a<<=1)b|=b>>a;return b+1}
function zd(a,b,c){b=a.U;try{b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,c)}catch(d){if(d.code!=null&&DOMException!=null&&DOMException.SECURITY_ERR!=null&&d.code==DOMException.SECURITY_ERR){a.lo==false&&la(o.na,"<i>A security setting in the browser prevented loading a texture.<br/>Workaround: run this from a webserver, change security settings, or allow the specific domain.</i>",true);a.lo=true}else try{b.texImage2D(b.TEXTURE_2D,0,c)}catch(e){}}}
function ae(a){if(a.ek==null){var b=null;b=new kd;var c=new Nb(true),d=new Nb(true),e=new Nb(true),f=new Nb(true),g=b.fa;g.push(0);g.push(2);g.push(1);g.push(0);g.push(3);g.push(2);g=b.m;g.push(c);g.push(d);g.push(e);g.push(f);c.Ba.c=1;c.Ba.b=1;c.f.set(1,-1,0);d.Ba.c=1;d.Ba.b=0;d.f.set(1,1,0);e.Ba.c=0;e.Ba.b=0;e.f.set(-1,1,0);f.Ba.c=0;f.Ba.b=1;f.f.set(-1,-1,0);a.ek=b}}function be(a,b,c,d){a.Ll=b;a.Ml=c;a.nd=d!=null?d.e():null}m=Fd.prototype;m.Vq="\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = vPosition;\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.cp="\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\tattribute vec4 vTexCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = vPosition;\t\t\t\t\t\t\t\t\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";m.lq="\t\t\t\t\t\tuniform vec4 vColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t         gl_FragColor = vColor;\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.gq="\t\t\t\tuniform vec4 vColor;\t\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        float alpha = texture2D(texture1, texCoord).r;\t\t        gl_FragColor = vec4(vColor.rgb, alpha);\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.ec="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv_color = vColor;\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.fp="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\tuniform mat4 worldtransform;\t\t\t\t\t\t\t\t\n\tuniform float grassMovement;\t\t\t\t\t\t\t\t\n\tuniform float windStrength;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv_color = vColor;\t\t\t\t\t\t\t\t\t\t\t\tvec4 grasspos = vPosition;\t\t\t\t\t\t\t\t\tgrasspos.x += sin(grassMovement + ((worldtransform[3].x + vPosition.x) / 10.0)) * (1.0 - vTexCoord1.y) * windStrength;\t        gl_Position = worldviewproj * grasspos;\t\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.Im="\t\t\t\t\t\tvec3 n = normalize(vec3(vNormal.xyz));\t\t\t\t\t\t\tvec4 currentLight = vec4(0, 0, 0, 1.0);\t\t\t\t\t\t\tfor(int i=0; i<4; ++i)\t\t\t\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec3 lPos = vec3(arrLightPositions[i].xyz);\t\t\t\t\t\tvec3 vertexToLight = lPos - vec3(vPosition.xyz);\t\t\t\tfloat distance = length( vertexToLight );\t\t\t\t\t\tfloat distanceFact = 1.0 / (arrLightPositions[i].w * distance); \t\t\tvertexToLight = normalize(vertexToLight); \t\t\t\t\t\tfloat angle = max(0.0, dot(n, vertexToLight));\t\t\t\t\tfloat intensity = angle * distanceFact;\t\t\t\t\t\t\tcurrentLight = currentLight + vec4(arrLightColors[i].x*intensity, arrLightColors[i].y*intensity, arrLightColors[i].z*intensity, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// directional light\t\t\t\t\t\t\t\t\t\n\t\tfloat dirlight = max(0.0, dot(n, vecDirLight));\t\t\t\t\tcurrentLight = currentLight + vec4(colorDirLight.x*dirlight, colorDirLight.y*dirlight, colorDirLight.z*dirlight, 1.0);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// ambient light\t\t\t\t\t\t\t\t\t\t\n\t\tcurrentLight = currentLight + arrLightColors[4];\t\t\t\tcurrentLight = max(currentLight, vec4(0.0,0.0,0.0,0.0));\n\t\t";
m.ud="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\tuniform vec3 vecDirLight; \t\t\t\t\t\t\t\t\t\n\tuniform vec4 colorDirLight; \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n"+
Fd.prototype.Im+"\tcurrentLight = currentLight * vec4(vColor.x, vColor.y, vColor.z, 1.0);\t\t\tv_color = min(currentLight, vec4(1.0,1.0,1.0,1.0));\t\t\t\tv_color.a = vColor.a;\t// preserve vertex alpha \n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";m.ep="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\tattribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\t\tv_color = vColor;\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.Ek="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 modelviewtransform;\t\t\t\t\t\t\t\n\tuniform mat4 worldtransform;\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tgl_Position = worldviewproj * vPosition;\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\tuse reflection\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 pos = normalize((modelviewtransform * vPosition).xyz);\t\t\t\t\t\n\t\tvec3 n = normalize((normaltransform * vec4(vNormal, 1)).xyz);\t\t\n\t\tvec3 r = reflect( pos.xyz, n.xyz );\t\t\t\t\t\t\t\n\t\tfloat m = sqrt( r.x*r.x + r.y*r.y + (r.z+1.0)*(r.z+1.0) ); \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\ttexture coordinates\t\t\t\t\t\t\t\t\n\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\n\t\tv_texCoord2.x = (r.x / (2.0 * m)  + 0.5);\t\t\t\t\t\t\n\t\tv_texCoord2.y = (r.y / (2.0 * m)  + 0.5);\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
m.Ug="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 modelviewtransform;\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\tuniform vec3 vecDirLight; \t\t\t\t\t\t\t\t\t\n\tuniform vec4 colorDirLight; \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\tuse reflection\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 pos = normalize((modelviewtransform * vPosition).xyz);\t\t\t\t\t\n\t\tvec3 nt = normalize((normaltransform * vec4(vNormal, 1)).xyz);\t\t\n\t\tvec3 r = reflect( pos.xyz, nt.xyz );\t\t\t\t\t\t\t\n\t\tfloat m = sqrt( r.x*r.x + r.y*r.y + (r.z+1.0)*(r.z+1.0) ); \n\t\t//\ttexture coordinates\t\t\t\t\t\t\t\t\n\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\n\t\tv_texCoord2.x = r.x / (2.0 * m)  + 0.5;\t\t\t\t\t\t\n\t\tv_texCoord2.y = r.y / (2.0 * m)  + 0.5;\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\n"+
Fd.prototype.Im+"\t\tv_color = min(currentLight, vec4(1.0,1.0,1.0,1.0));\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
m.gp="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 worldtransform;\t\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\tuniform vec3 vecDirLight; \t\t\t\t\t\t\t\t\t\n\tuniform vec4 colorDirLight; \t\t\t\t\t\t\t\t\n\tuniform float grassMovement;\t\t\t\t\t\t\t\t\n\tuniform float windStrength;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 grasspos = vPosition;\t\t\t\t\t\t\t\t\tgrasspos.x += sin(grassMovement + ((worldtransform[3].x + vPosition.x) / 10.0)) * (1.0 - vTexCoord1.y) * windStrength;\t        gl_Position = worldviewproj * grasspos;\t\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n"+Fd.prototype.Im+
"\tcurrentLight = currentLight * vec4(vColor.x, vColor.y, vColor.z, 1.0);\t\t\tv_color = min(currentLight, vec4(1.0,1.0,1.0,1.0));\t\t\t\tv_color.a = vColor.a;\t// preserve vertex alpha \n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";m.dp="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 worldtransform;\t\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\n    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t\n\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t\n    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\n\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\n\tattribute vec3 vBinormal;\t\t\t\t\t\t\t\t\t\n\tattribute vec3 vTangent;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t// Output:\t\t\t\t\t\t\t\t\t\t\t\t\t\n    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\n\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\n\tvarying vec3 v_lightVector[4];\t\t\t\t\t\t\t\t\n\tvarying vec3 v_lightColor[4];\t\t\t\t\t\t\t\t\n\tvarying vec3 ambientLight;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t\n    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n        gl_Position = worldviewproj * vPosition;\t\t\t\t\n        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\n\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec4 pos = vec4(dot(vPosition, worldtransform[0]), dot(vPosition, worldtransform[1]), dot(vPosition, worldtransform[2]), dot(vPosition, worldtransform[3]));\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// transform normal, binormal and tangent\t\t\t\t\t\n\t\tvec3 normal = vec3(dot(vNormal.xyz, worldtransform[0].xyz), dot(vNormal.xyz, worldtransform[1].xyz), dot(vNormal.xyz, worldtransform[2].xyz));\t\t\n\t\tvec3 tangent = vec3(dot(vTangent.xyz, worldtransform[0].xyz), dot(vTangent.xyz, worldtransform[1].xyz), dot(vTangent.xyz, worldtransform[2].xyz));     \n\t\tvec3 binormal = vec3(dot(vBinormal.xyz, worldtransform[0].xyz), dot(vBinormal.xyz, worldtransform[1].xyz), dot(vBinormal.xyz, worldtransform[2].xyz));     \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 temp = vec3(0.0, 0.0, 0.0);\t\t\t\t\t\t\n\t\tfor(int i=0; i<4; ++i) \t\t\t\t\t\t\t\t\t\n\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\tvec3 lightPos = vec3(arrLightPositions[i].xyz);\t\t\n\t\t\tvec3 vertexToLight = lightPos - vec3(pos.xyz); \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// transform the light vector 1 with U, V, W\t\t\n\t\t\ttemp.x = dot(tangent.xyz, vertexToLight);\t\t\t\t\n\t\t\ttemp.y = dot(binormal.xyz, vertexToLight);\t\t\t\t\n\t\t\ttemp.z = dot(normal.xyz, vertexToLight);\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// normalize light vector\t\t\t\t\t\n\t\t\ttemp = normalize(temp); \t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// move from -1..1 to 0..1 and put into output\t\t\n\t\t\ttemp = temp * 0.5;\t\t\t\t\t\t\t\n\t\t\ttemp = temp + vec3(0.5,0.5,0.5);\t\t\t\n\t\t\tv_lightVector[i] = temp;\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// calculate attenuation\t\t\t\t\t\n\t\t\tfloat distanceFact = 1.0 / sqrt(dot(vertexToLight, vertexToLight) * arrLightPositions[i].w); \n\t\t\tv_lightColor[i] = min(vec3(arrLightColors[i].x*distanceFact, arrLightColors[i].y*distanceFact, arrLightColors[i].z*distanceFact), vec3(1,1,1));\t\t\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// ambient light\n\t\tambientLight = arrLightColors[4].xyz;\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
m.kq="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord);\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.Kf="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord) * v_color;\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.pk="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord) * v_color;\t\t\tif(gl_FragColor.a < 0.5)\t\t\t\t\t\t\t\t\t\t\tdiscard;\t\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.gm="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tgl_FragColor = col1 * col2;\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.iq="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tgl_FragColor = col1 * col2 * 3.0;\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.mo="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 final = col1 * col2 * v_color;\t\t\t\t\t\t\t\tgl_FragColor = vec4(final.x, final.y, final.z, col1.w);\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.no="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\tvarying vec3 v_lightVector[4];\t\t\t\t\t\t\t\t\tvarying vec3 v_lightColor[4];\t\t\t\t\t\t\t\t\tvarying vec3 ambientLight;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 colorMapSample = texture2D(texture1, v_texCoord1);\t\t\tvec3 normalMapVector = texture2D(texture2, v_texCoord1).xyz;\t\t//normalMapVector -= vec3(0.5, 0.5, 0.5);\t\t\t\t\t\n\t\t//normalMapVector = normalize(normalMapVector); \t\t\t\n\t\tnormalMapVector *= vec3(2.0, 2.0, 2.0);\t\t\t\t\t\n\t\tnormalMapVector -= vec3(1.0, 1.0, 1.0);\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 totallight = vec3(0.0, 0.0, 0.0);\t\t\t\t\t\t\n\t\tfor(int i=0; i<4; ++i) \t\t\t\t\t\t\t\t\t\n\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// process light\t\t\t\t\t\t\t\t\t\n\t\t\t//vec3 lightvect = v_lightVector[i] + vec3(-0.5, -0.5, -0.5); \n\t\t\tvec3 lightvect = (v_lightVector[i] * vec3(2.0, 2.0, 2.0)) - vec3(1.0, 1.0, 1.0); \n\t\t\tlightvect = normalize(lightvect);\t\t\t\t\t\n\t\t\tfloat luminance = dot(lightvect, normalMapVector); // normal DOT light\t\t\n\t\t\tluminance = clamp(luminance, 0.0, 1.0);\t// clamp result to positive numbers\t\t\n\t\t\tlightvect = luminance * v_lightColor[i];\t// luminance * light color \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// add to previously calculated lights\t\t\t\t\n\t\t\ttotallight = totallight + lightvect;\t\t\t\t\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\ttotallight = totallight + ambientLight;\t\t\t\t\t\n\t\tgl_FragColor = colorMapSample * vec4(totallight.x, totallight.y, totallight.z, 0.0);\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
m.oo="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 color1 = texture2D(texture1, texCoord);\t\t\t\t\tvec4 color2 = texture2D(texture2, texCoord);\t\t\t\t\tcolor1 = ((1.0 - v_color.w) * color1) + (v_color.w * color2);\t// interpolate texture colors based on vertex alpha\t \n\t\tgl_FragColor = color1 * v_color;\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.Lf="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 tmpFragColor = texture2D(texture1, texCoord) * v_color;\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.hm="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 tmpFragColor = col1 * col2;\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.zi="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 tmpFragColor = texture2D(texture1, texCoord) * v_color;\t\t\t\t\t\t\t\t\tif(tmpFragColor.a < 0.5)\t\t\t\t\t\t\t\t\t\t\tdiscard;\t\t\t\t\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.jq="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 tmpFragColor = col1 * col2 * 3.0;\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.jm="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 color1 = texture2D(texture1, texCoord);\t\t\t\t\tvec4 color2 = texture2D(texture2, texCoord);\t\t\t\t\tcolor1 = ((1.0 - v_color.w) * color1) + (v_color.w * color2);\t// interpolate texture colors based on vertex alpha\t \n\t\tvec4 tmpFragColor = color1 * v_color;\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.ok="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 final = col1 * col2 * v_color;\t\t\t\t\t\t\t\tvec4 tmpFragColor = vec4(final.x, final.y, final.z, col1.w);\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.Wq="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";m.hq="\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// for debugging:\t\t\t\t\t\t\t\t\t\t\n        // gl_FragColor = vec4(0,(gl_FragCoord.z / gl_FragCoord.w / 150.0)*0.5 + 0.50.0 , 1.0);\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// we only need to write gl_FragCoord.z for float rtt, but dont use those and pack this into rgba for better compatibility: \n\t\t const vec4 bitShift = vec4(1.0, 256.0, 256.0*256.0, 256.0*256.0*256.0); \n\t\t const vec4 bitMask = vec4(1.0/256.0, 1.0/256.0, 1.0/256.0, 0.0); \n\t\t vec4 rgbavalue = fract(gl_FragCoord.z * bitShift);\t\n\t\t gl_FragColor = rgbavalue - (rgbavalue.gbaa * bitMask);\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// no packing\t\t\t\t\t\t\t\t\t\t\t\n\t\t//gl_FragColor = vec4(gl_FragCoord.z);\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.Si="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 worldviewprojLight; \t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\tuniform vec3 vecDirLight; \t\t\t\t\t\t\t\t\t\n\tuniform vec4 colorDirLight; \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec4 v_posFromLight;\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// Calculate position on shadow map\t\t\t\t\t\t\n\t\tv_posFromLight = worldviewprojLight * vPosition;\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 n = normalize(vec3(vNormal.xyz));\t\t\t\t\t\t\tvec4 currentLight = vec4(0, 0, 0, 1.0);\t\t\t\t\t\t\tfor(int i=0; i<4; ++i)\t\t\t\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec3 lPos = vec3(arrLightPositions[i].xyz);\t\t\t\t\t\tvec3 vertexToLight = lPos - vec3(vPosition.xyz);\t\t\t\tfloat distance = length( vertexToLight );\t\t\t\t\t\tfloat distanceFact = 1.0 / (arrLightPositions[i].w * distance); \t\t\tvertexToLight = normalize(vertexToLight); \t\t\t\t\t\tfloat angle = max(0.0, dot(n, vertexToLight));\t\t\t\t\tfloat intensity = angle * distanceFact;\t\t\t\t\t\t\tcurrentLight = currentLight + vec4(arrLightColors[i].x*intensity, arrLightColors[i].y*intensity, arrLightColors[i].z*intensity, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// directional light\t\t\t\t\t\t\t\t\t\n\t\tfloat dirlight = max(0.0, dot(n, vecDirLight));\t\t\tcurrentLight = currentLight + vec4(colorDirLight.x*dirlight, colorDirLight.y*dirlight, colorDirLight.z*dirlight, 1.0);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// ambient light\t\t\t\t\t\t\t\t\t\t\n\t\tcurrentLight = currentLight + arrLightColors[4];\t\t\t\tcurrentLight = max(currentLight, vec4(0.0,0.0,0.0,0.0));\t\t\tcurrentLight = currentLight * vec4(vColor.x, vColor.y, vColor.z, 1.0);\t\t\tv_color = min(currentLight, vec4(1.0,1.0,1.0,1.0));\t\t\t\tv_color.a = vColor.a;\t// preserve vertex alpha \n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
m.im="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D shadowmap;\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec4 v_posFromLight;\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfloat unpackFromRGBA(const in vec4 valuein) {\t\t\t\t\t\tconst vec4 bitShift = vec4(1.0, 1.0/256.0, 1.0/(256.0*256.0), 1.0/(256.0*256.0*256.0)); \t\treturn dot(valuein, bitShift);\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// diffuse texture\t\t\t\t\t\t\t\t\t\t\n\t\tvec4 diffuseColor = texture2D(texture1, v_texCoord1); // * v_color;\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// fog\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//float z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\n\t\t//float fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\t//vec4 outColor = mix(fogColor, diffuseColor, fogFactor);\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// shadow map lookup\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 shadowCoord = (v_posFromLight.xyz / v_posFromLight.w) * 0.5 + 0.5;\t\n\t\tvec4 shadowMapColor = texture2D(shadowmap, shadowCoord.xy);\t\n\t\tfloat shadowDepth = unpackFromRGBA(shadowMapColor);\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat distanceFromLight = v_posFromLight.z / v_posFromLight.w; \t\t\t\n\t\tfloat visibility = 1.0 - (smoothstep(0.001, 0.00001, shadowDepth - distanceFromLight) * 0.6); \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor = diffuseColor * visibility;\t\t\t\t\t\t\t\t\t\t\t\tgl_FragColor.a = diffuseColor.a;\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";function ce(){this.Pl=[];this.Fb=[];this.le=1}function de(a,b){for(var c=0;c<a.Pl.length;++c){var d=a.Pl[c];if(d.l==b)return d}return null}function ee(a,b,c){if(b==null||b=="")return null;var d=de(a,b);if(d!=null)return d;if(c){b=d=new fe(b);if(b!=null){de(a,b.l)!=null&&o.na&&o.na.print("ERROR! Cannot add the sound multiple times: "+b.l);a.Pl.push(b)}return d}return null}
function Kc(a,b,c,d){if(b==null)return null;var e=null;e=typeof b=="string"?ee(a,b,true):b;if(e==null||e.cc==null)return null;ge(a);for(b=0;b<a.Fb.length;)if(a.Fb[b].src===e){a.Fb[b].src.cc.pause();a.Fb.splice(b,1)}else++b;try{e.cc.currentTime=0}catch(f){}if(typeof d==="undefined")d=1;e.cc.volume=d*a.le;e.cc.play();var g=new he(e);g.Io=d;a.Fb.push(g);e.qm&&e.cc.removeEventListener("ended",e.qm,false);e.cc.qm=null;if(c){g.Co=true;a=function(){if(!g.Ai){try{this.currentTime=0}catch(j){}this.play()}};
e.cc.addEventListener("ended",a,false);e.cc.qm=a}return g}ce.prototype.stop=function(a){if(a){a.src.cc.pause();a.Ai=true;ge(this)}};function ie(a,b){a.le=b;if(a.le<0)a.le=0;if(a.le>1)a.le=1;try{for(b=0;b<a.Fb.length;++b){var c=a.Fb[b];c.src.cc.volume=c.Io*a.le}}catch(d){}}function ge(a){for(var b=0;b<a.Fb.length;)if(je(a.Fb[b]))a.Fb.splice(b,1);else++b}function Mc(a,b){for(var c=0;c<a.Fb.length;++c){var d=a.Fb[c];if(d&&d.src&&d.src.l==b){a.Fb.splice(c,1);d.Ai=true;d.src.cc.pause();return}}}o.Vd=new ce;
function fe(a){this.l=a;var b=null;try{b=new Audio;b.src=a}catch(c){}this.loaded=true;this.cc=b}function he(a){this.src=a;this.Co=this.Ai=false;this.Io=1;this.startTime=(new Date).getTime()}function je(a){if(a.Ai)return true;if(a.Co)return false;var b=(new Date).getTime(),c=a.src.duration;return c>0&&b>a.startTime+c};function ke(a,b,c,d,e,f,g){if((b==null||b==true)&&o.na==null)o.na=new ea(a,d);this.pp=a;this.$b=document.getElementById(this.pp);this.la=new le;this.T=null;this.sp=false;this.kg=null;this.fb=new ud;this.Ae=new o.xp;this.si=this.Fh=false;this.gn=0;this.Cc=60;this.sl=this.pl=this.ql=this.Lb=null;this.Gi=this.Qo=false;this.Tg=[];(this.po=g?true:false)&&me(this);this.zp=f==null?'Error: This browser does not support WebGL (or it is disabled).<br/>See <a href="www.ambiera.com/copperlicht/browsersupport.html">here</a> for details.':
f;this.bi=[];this.ai=[];this.Mh=false;this.Lj=this.Kj=this.Jb=this.Ib=0;this.Nh=true;this.yj=false;this.$k=this.Rl=0;this.Ej=null;e!=null&&ne(this,true,e);oe(this);if(c)this.Cc=c;var j=this;setInterval(function(){j.Ej!=null&&pe(j);if(o.na){++j.gn;var k=0,n=0;if(j.fb){k=j.fb;for(var p=n=0;p<k.Wa.length;++p)k.Wa[p].mc==false&&++n;k=n;n=j.fb.Wa.length}if(j.si&&k==0){j.si=false;qe(j)}if(j.Fh||k){p="Loading";if(k>0)p="Textures loaded: "+(n-k)+"/"+n;switch(j.gn%4){case 0:p+="   ";break;case 1:p+=".  ";
break;case 2:p+=".. ";break;case 3:p+="...";break}ia(o.na,p)}else ia(o.na,null)}},500);re(Z(),this)}function se(a){if(a.la==null)return null;return a.la.Og()}
function te(a){document.onkeydown=function(f){ue(a,f)};document.onkeyup=function(f){ve(a,f)};var b=a.$b;if(b!=null){b.onmousemove=function(f){we(a,f)};b.onmousedown=function(f){xe(a,f)};b.onmouseup=function(f){Ae(a,f)};b.onmouseover=function(){a.Nh=true};b.onmouseout=function(){a.Nh=false};Be(a);try{var c=function(f){(f=f)||(f=event);if(f)Ce(a,f.detail<0||f.wheelDelta>0?1:-1)};b.addEventListener("mousewheel",c,false);b.addEventListener("DOMMouseScroll",c,false)}catch(d){}try{c=function(f){a.yj=false;
Ae(a,f.changedTouches[0])&&De(a,f,true)};b.addEventListener("touchstart",function(f){if(f.touches!=null){a.yj=f.touches.length==2;if(a.yj)a.Rl=Ee(a,f)}xe(a,f.changedTouches[0])&&De(a,f,true)},false);b.addEventListener("touchend",c,false);b.addEventListener("touchcancel",c,false);b.addEventListener("touchleave",c,false);b.addEventListener("touchmove",function(f){if(a.yj&&f.touches!=null&&f.touches.length>=2){f=Ee(a,f);var g=f-a.Rl;a.Rl=f;Ce(a,g)}else we(a,f.changedTouches[0])&&De(a,f,true)},false)}catch(e){}}}
function Ee(a,b){a=b.touches;if(a[0].pageX==null)return 0;return Math.sqrt((a[0].pageX-a[1].pageX)*(a[0].pageX-a[1].pageX)+(a[0].pageY-a[1].pageY)*(a[0].pageY-a[1].pageY))}ke.prototype.load=function(a,b,c){if(!Fe(this)){ne(this,false,this.zp);return false}var d=this;this.Fh=true;(new na(a,a.indexOf(".ccbz")!=-1)).load(function(e){d.vm(e,a,b);c&&c()});return true};
function Fe(a){if(a.T!=null)return true;var b=a.$b;if(b==null)return false;var c=o.Fl!=null&&o.Fl.pr;a.T=new Fd;if(c||a.T.gb(b)==false)if(o.Fl!=null){a.T=new o.Fl;if(a.T.gb(b)==false)return false}else return false;if(a.fb)a.fb.T=a.T;te(a);var d=1E3/a.Cc,e=r();function f(){var g=r(),j=g-e;if(j>d){e=g-j%d;a.po&&Ge(a);He(a);if(o.na!=null){a.la.Og();g=o.na;if(g.Wm!=null){g.frames+=1;j=(new Date).getTime();if(j-g.sm>1E3){var k="FPS: "+(g.frames/(j-g.sm)*1E3).toFixed(2);g.Wm.nodeValue=k;g.sm=j;g.frames=
0}}}}window.requestAnimationFrame(f)}window.requestAnimationFrame(f);return true}function me(){document.body.style.margin="0";document.body.style.padding="0";document.body.style.overflow="hidden"}function Ge(a){var b=window.innerHeight||window.clientHeight;a.$b.setAttribute("width",(window.innerWidth||window.clientWidth)+"px");a.$b.setAttribute("height",b+"px")}
ke.prototype.vm=function(a,b,c){this.Fh=false;var d=new Ie;a=d.qq(a,b,this.fb,this.Ae,this);if(a!=null)if(!c||this.la==null||this.la!=null&&this.la.Mb.length==0){this.la=a;if(d.fn){this.bn=d.Ln;this.up=b}if(a.Sn)this.si=true;else qe(this)}else for(b=0;b<a.Mb.length;++b)this.la.am(a.Mb[b])};function qe(a){a.sk(a.la.Og());He(a);a.sl!=null&&a.sl()}
function He(a){if(!(a.la==null||a.T==null))if(!(a.Fh||a.si)){oe(a);Je(a);var b=a.la.Og();if(!a.sp&&b){for(var c=false,d=0;d<a.Tg.length;++d){var e=a.Tg[d];e.Rq();if(e.oq()){if(e.tk!=null&&!e.pm){var f=se(a);e.tk.execute(f.Ma,f);e.tk=null}if(e.uk!=null&&e.pm){f=se(a);e.uk.execute(f.Ma,f);e.uk=null}a.Tg.splice(d,1);--d}else c=true}c&&Ke(b);a.Lb&&a.Lb();d=a.T;b.Eh=d;if(b.Na==0)b.Na=r();b.Up=null;c=false;if(b.qh.length==0)e=false;else{e=r();f=false;for(var g=0;g<b.qh.length;){var j=b.qh[g];if(j.Pq<e){j.Ie.ub&&
j.Ie.ub.removeChild(j.Ie);b.qh.splice(g,1);f=true;b.zd&&j.Ie.cb&&Le(b.zd,j.Ie.cb)}else++g}e=f}if(e)c=true;if(b.Ma.Lb(b,r()))c=true;if(b.ba){e=new D(false);b.ba.La.va(e);e=F(e,b.ba.wb);e=!e.D(b.Cj)}else e=true;d=d?Gd(d):false;if(b.Rk||b.Wj==0&&(e||d)||b.Wj==1&&(e||c||d)||b.Wj==2||Me(Z())){b.Rk=false;c=true}else c=false;if(c){c=a.T;d=b.ih;if(c.U!=null){Vd(c);e=c.U;e.clearDepth(c.$f?0:1);e.depthMask(true);e.clearColor(o.ad(d)/255,o.Zc(d)/255,o.Yc(d)/255,1);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}a.ql&&
a.ql();c=a.T;b.zg=[];b.Ag=[];b.cf=[];b.Xj=[];b.Tj=[];b.Ma.Ka(b);b.ej=null;b.Qp=0;b.Dn&&Ne(b,c)&&be(c,true,b.tf,b.nd);for(d=d=0;d<b.Xj.length;++d){b.Hb=Oe;b.Xj[d].yb(c)}Pe(b,c);b.Hb=Qe;for(d=0;d<b.Tj.length;++d)b.Tj[d].yb(c);if(b.ba){b.ba.La.va(b.Cj);b.Cj=F(b.Cj,b.ba.wb)}b.Dn&&be(c,false,null,null);a.pl&&a.pl();b=o.Ca;b!=null&&Re(b,a.T);b=a.T;b.U!=null&&b.U.flush()}}Je(a)}}ke.prototype.am=function(a){if(this.la){this.la.Mb.push(a);this.la.Mb.length==1&&this.la.To(a)}};
function lc(a,b,c){if(!a.la)return false;var d=a.la.Mb;b=b;if(c)b=b.toLowerCase();for(var e=0;e<d.length;++e){var f=d[e].l;if(c)f=f.toLowerCase();if(b==f){a.sk(d[e]);return true}}return false}
ke.prototype.sk=function(a){if(!a)return false;var b=a.rk()=="panorama",c=a.rk()=="free",d=null;this.la.To(a);if(!a.Tn){a.Tn=true;var e=false,f=Se(a,"camera");if(f)for(var g=0;g<f.length;++g){var j=f[g];if(j&&j.Km){d=j;e=true;Te(d,this.T.width,this.T.height);break}}if(!e){e=4/3;if(this.T.width&&this.T.height)e=this.T.width/this.T.height;d=new Ue;Ve(d,e);vc(a.Ma,d);e=null;if(!b){e=new We(d,this);Zb(d,e)}if(c){if(a.Mk!=null)d.f=a.Mk.e();if(a.kj!=null)e!=null?qc(e,a.kj):pc(d,a.kj)}e&&Xe(e,!b)}a.ba=d;
a.zd=Ye(a,true);Ze(this,a.Ma,a.zd)}Z().sb=a;a.Wj=this.la.Wp;Ke(a);return true};function Je(a){if(a.kg!=null){var b=a.la.Og();if(b!=null)if(a.kg.r===b){a.T&&Te(a.kg,a.T.Qb(),a.T.Pb());b.ba=a.kg;a.kg=null}}}function ue(a,b){var c=se(a);if(c==null)return false;if(b==null)b=window.event;var d=false;c=c.ba;if(c!=null)d=c.Je(b);for(c=0;c<a.ai.length;++c)if(a.ai[c].Je(b))d=true;return De(a,b,d)}
function ve(a,b){var c=se(a);if(c==null)return false;if(b==null)b=window.event;var d=false;c=c.ba;if(c!=null)d=c.Ke(b);for(c=0;c<a.bi.length;++c)if(a.bi[c].Ke(b))d=true;return De(a,b,d)}function De(a,b,c){if(c){try{b.preventDefault()}catch(d){}return true}return false}function oe(a){for(var b=0,c=0,d=a.$b;d!=null;){b+=d.offsetLeft;c+=d.offsetTop;d=d.offsetParent}a.Om=b;a.Pm=c}function $e(a,b){return b.pageX?b.pageX-a.Om:b.clientX-a.$b.offsetLeft+document.body.scrollLeft}
function af(a,b){return b.pageY?b.pageY-a.Pm:b.clientY-a.$b.offsetTop+document.body.scrollTop}function xe(a,b){if(b==null)b=window.event;a.Mh=true;a.Nh=true;if(b){a.Kj=$e(a,b);a.Lj=af(a,b);a.Ib=a.Kj;a.Jb=a.Lj}var c=se(a);if(c==null)return false;var d=false;if(a.kn)d=a.kn();if(!d){d=c.ba;d!=null&&d.Yd(b);d=b;for(var e=0;e<c.Nc.length;++e)c.Nc[e].Yd(d)}return De(a,b,true)}function bf(a){if(a.Gi){a.Ib=0;a.Jb=0;a.Kj=0;a.Lj=0}else{a.Kj=a.Ib;a.Lj=a.Jb}}
function Ae(a,b){if(b==null)b=window.event;a.Mh=false;var c=se(a);if(c==null)return false;if(b){a.Ib=$e(a,b);a.Jb=af(a,b)}var d=false;if(a.ln)d=a.ln();if(!d){d=c.ba;d!=null&&d.sd(b);d=b;for(var e=0;e<c.Nc.length;++e)c.Nc[e].sd(d)}return De(a,b,true)}function Ce(a,b){a=se(a);if(a!=null){var c=a.ba;c!=null&&c.Nf(b);for(c=0;c<a.Nc.length;++c)a.Nc[c].Nf(b)}}
function we(a,b){if(b==null)b=window.event;if(b){a.Ib=$e(a,b);a.Jb=af(a,b)}if(a.Gi){var c=b.movementY||b.mozMovementY||b.webkitMovementY||0;a.Ib=b.movementX||b.mozMovementX||b.webkitMovementX||0;a.Jb=c}c=se(a);if(c==null)return false;var d=c.ba;d!=null&&d.Le(b);d=b;for(var e=0;e<c.Nc.length;++e)c.Nc[e].Le(d);return De(a,b,true)}m=ke.prototype;m.Lb=null;m.ln=null;m.kn=null;m.pl=null;m.ql=null;m.sl=null;
function cf(a,b,c){a=a.T;if(a==null)return null;var d=a.La,e=a.qd;if(d==null||e==null)return null;d=F(d,e);var f=new Gb;f.Bk(d);d=Ib(f);e=Jb(f).substract(d);f=Lb(f).substract(d);var g=a.Qb();a=a.Pb();c=c/a;return d.add(y(e,b/g)).add(y(f,c))}
function df(a,b){var c=new D(false),d=a.T;if(!d.La)return null;d.La.va(c);c=F(c,d.qd);a=d.Qb()/2;d=d.Pb()/2;if(d==0||a==0)return null;b=new t(b.c,b.b,b.d);b.W=1;c=c;var e=b.e();e.za=b.W;b.c=e.c*c.p+e.b*c.v+e.d*c.w+e.za*c.J;b.b=e.c*c.u+e.b*c.q+e.d*c.A+e.za*c.K;b.d=e.c*c.s+e.b*c.t+e.d*c.n+e.za*c.B;b.W=e.c*c.G+e.b*c.H+e.d*c.I+e.za*c.L;c=b.W==0?1:1/b.W;if(b.d<0)return null;e=new Oa;e.c=a*b.c*c+a;e.b=d-d*b.b*c;return e}function nc(a,b){if(b!=null)a.kg=b}
function Ze(a,b,c){if(b){for(var d=0;d<b.ja.length;++d){var e=b.ja[d];if(e)if(e.k()=="collisionresponse")e.Hc(c);else if(e.k()=="onclick"||e.k()=="onmove")e.ia=c;else if(e.k()=="gameai")e.ia=c;else if(e.k()=="3rdpersoncamera")e.ia=c}for(d=0;d<b.Z.length;++d)(e=b.Z[d])&&Ze(a,e,c)}}
ke.prototype.ym=function(a){if(!a||!this.la)return false;if(this.bn==null)return false;for(var b=null,c=-1,d=0;d<this.la.Mb.length;++d)if(a==this.la.Mb[d].l){c=d;b=this.la.Mb[d];break}if(c==-1)return false;a=(new Ie).ym(this.bn,b,c,this.up,this.fb,this.Ae,this);if(a!=null){b=this.la.Og()==b;this.la.Mb[c]=a;b&&this.sk(a)}return true};function pe(a){if(!a.Fh&&!a.si){a.Ej.style.display="none";a.Ej=null}}
function ne(a,b,c){if(a.$b!=null){var d=document.createElement("div");a.$b.parentNode.appendChild(d);var e=document.createElement("div");oe(a);var f=b?23:100,g=b?30:0,j=a.Om+(a.$b.width-200)/2,k=a.Pm+a.$b.height/2;b||(k+=30);c=c.replace("$PROGRESS$","");e.style.cssText="position: absolute; left:"+j+"px; top:"+k+"px; color:#ffffff; padding:5px; background-color:#000000; height:"+f+"px; width:200px; border-radius:5px; border:1px solid #777777;  opacity:0.5;";c='<p style="margin:0; padding-left:'+g+
'px; padding-bottom:5px;">'+c+"</p> ";if(b)c+='<img style="position:absolute; left:5px; top:3px;" src="copperlichtdata/loading.gif" />';e.innerHTML=c;d.appendChild(e);if(b)a.Ej=d}}
function Be(a){function b(){var d=a.$b;if(a.Qo){d.Mq=d.requestPointerLock||d.mozRequestPointerLock||d.webkitRequestPointerLock;d.Mq()}}function c(){var d=a.$b;a.Gi=document.PointerLockElement===d||document.pointerLockElement===d||document.mozPointerLockElement===d||document.webkitPointerLockElement===d?true:false}document.addEventListener("fullscreenchange",b,false);document.addEventListener("mozfullscreenchange",b,false);document.addEventListener("webkitfullscreenchange",b,false);document.addEventListener("pointerlockchange",
c,false);document.addEventListener("mozpointerlockchange",c,false);document.addEventListener("webkitpointerlockchange",c,false)}function ef(a,b,c){if(c==null)c=a.$b;a.Qo=b;c.requestFullscreen=c.requestFullscreen||c.sr||c.mozRequestFullScreen||c.msRequestFullscreen||c.webkitRequestFullscreen;c.requestFullscreen()};function $(){this.i=-1;this.f=new t;this.S=new t;this.ma=new t(1,1,1);this.X=true;this.l="";this.kb=0;this.Ha=-1;this.ub=null;this.Z=[];this.ja=[];this.Y=new D;this.cb=this.r=null}m=$.prototype;m.gb=function(){this.f=new t;this.S=new t;this.ma=new t(1,1,1);this.Z=[];this.ja=[];this.Y=new D};m.f=null;m.S=null;m.ma=null;m.X=true;m.l="";m.Ha=-1;m.cb=null;m.ub=null;m.k=l("none");m.ob=function(){return new z};
function J(a,b){for(var c=0;c<a.ja.length;++c){var d=a.ja[c];if(d.k()==b)return d}return null}function ff(a,b){for(var c=0;c<a.ja.length;++c){var d=a.ja[c].Jf(b);if(d!=null)return d}return null}function gf(a){var b=a.ob().e();zb(a.Y,b);return b}
function hf(a,b,c,d,e){b.l=new String(a.l);b.X=a.X;b.kb=a.kb;b.f=a.f.e();b.S=a.S.e();b.ma=a.ma.e();b.i=a.i;b.r=a.r;c&&vc(c,b);for(var f=0;f<a.Z.length;++f){var g=a.Z[f];if(g){var j=-1;if(c&&c.r)j=Yc(c.r);g=g.h(b,g.Ha,j);if(g!=null){g.Ha=j;vc(b,g)}}}for(f=0;f<a.ja.length;++f)Zb(b,a.ja[f].h(a,a.r,d,e));if(a.Y)b.Y=a.Y.e()}$.prototype.h=l(null);function Zb(a,b){b!=null&&a.ja.push(b)}function jf(a,b){if(b!=null){var c;for(c=0;c<a.ja.length;++c)if(a.ja[c]===b){a.ja.splice(c,1);return}}}
function vc(a,b){if(b){b.r=a.r;b.ub&&b.ub.removeChild(b);b.ub=a;a.Z.push(b)}}$.prototype.removeChild=function(a){for(var b=0;b<this.Z.length;++b)if(this.Z[b]===a){a.ub=null;this.Z.splice(b,1);return}};$.prototype.Ka=function(a){if(this.X)for(var b=0;b<this.Z.length;++b)this.Z[b].Ka(a)};$.prototype.Lb=function(a,b){var c=false;if(this.X){var d,e=this.ja.length;for(d=0;d<e;){c=this.ja[d].hb(this,b)||c;var f=e;e=this.ja.length;f>=e&&++d}P(this);for(d=0;d<this.Z.length;++d)c=this.Z[d].Lb(a,b)||c}return c};
$.prototype.om=function(){var a=new D;vb(a,this.S);xb(a,this.f);if(this.ma.c!=1||this.ma.b!=1||this.ma.d!=1){var b=new D;yb(b,this.ma);a=F(a,b)}return a};function P(a){a.Y=a.ub!=null?F(a.ub.Y,a.om()):a.om()}$.prototype.yb=aa();function O(a){return new t(a.Y.J,a.Y.K,a.Y.B)}$.prototype.$c=l(0);$.prototype.uc=l(null);function kf(a){for(a=a;a;){if(!a.X)return false;a=a.ub}return true}$.prototype.Ho=aa();$.prototype.Ji=aa();function Ue(){this.gb();this.g=new z;this.Km=this.Bc=false;this.ga=new t(0,0,10);this.vb=new t(0,1,0);this.La=new D;this.wb=new D;this.jd=o.PI/2.5;this.Ic=4/3;this.Mg=0.1;this.Lg=3E3;this.Zi=this.yf=true;this.Ee=false;tb(this.La,this.jd,this.Ic,this.Mg,this.Lg)}Ue.prototype=new $;function lf(a){tb(a.La,a.jd,a.Ic,a.Mg,a.Lg)}Ue.prototype.k=l("camera");function Ve(a,b){if(!o.D(a.Ic,b)){a.Zi=false;a.Ic=b;lf(a)}}function mf(a,b){if(!o.D(a.jd,b))if(!isNaN(b)){a.jd=b;lf(a)}}
function pc(a,b){if(b){a.ga=b.e();if(a.yf){P(a);a.S=Ja(b.substract(O(a)))}}}Ue.prototype.Lb=function(a,b){a=$.prototype.Lb.call(this,a,b);this.Ee||nf(this);return a};function nf(a){var b=O(a),c=a.ga.e();if(b.D(c))c.c+=1;ub(a.wb,b,c,a.vb)}m=Ue.prototype;m.Ka=function(a){if(a.ba===this){of(a,this,2);$.prototype.Ka.call(this,a)}};m.yb=function(a){this.Ee||nf(this);if(this.Ic==0||this.Zi){Te(this,a.width,a.height);this.Ic==0&&Ve(this,0.75)}this.La.va(a.La);this.wb.va(a.qd)};
m.Yd=function(a){for(var b=0;b<this.ja.length;++b)this.ja[b].Yd(a)};m.Nf=function(a){for(var b=0;b<this.ja.length;++b)this.ja[b].Nf(a)};m.sd=function(a){for(var b=0;b<this.ja.length;++b)this.ja[b].sd(a)};m.Le=function(a){for(var b=0;b<this.ja.length;++b)this.ja[b].Le(a)};m.Je=function(a){for(var b=false,c=0;c<this.ja.length;++c)if(this.ja[c].Je(a))b=true;return b};m.Ke=function(a){for(var b=false,c=0;c<this.ja.length;++c)if(this.ja[c].Ke(a))b=true;return b};
m.h=function(a,b,c){var d=new Ue;hf(this,d,a,b,c);if(this.ga)d.ga=this.ga.e();if(this.vb)d.vb=this.vb.e();if(this.La)d.La=this.La.e();if(this.wb)d.wb=this.wb.e();d.jd=this.jd;d.Ic=this.Ic;d.Mg=this.Mg;d.Lg=this.Lg;if(this.g)d.g=this.g.e();return d};function Te(a,b,c){if(!(b==0||c==0))if(o.D(a.Ic,0)||a.Zi){Ve(a,b/c);a.Zi=true}};function pf(){this.gb();this.g=new z;this.Bc=false;this.O=null;this.ir=true;this.cb=null}pf.prototype=new $;m=pf.prototype;m.ob=function(){if(this.O)return this.O.g;return this.g};m.nq=da("O");m.Uo=ba("O");m.k=l("mesh");m.Ka=function(a){var b=this.O;if(this.X&&b){for(var c=false,d=false,e=0;e<b.pa.length;++e)if(ed(b.pa[e].N))c=true;else d=true;c&&of(a,this,qf);d&&of(a,this,rf);$.prototype.Ka.call(this,a)}};
m.yb=function(a){a.Hc(this.Y);for(var b=0;b<this.O.pa.length;++b){var c=this.O.pa[b];if(ed(c.N)==(this.r.Hb==qf)){Hd(a,c.N);Id(a,c)}}};m.$c=function(){if(this.O)return this.O.pa.length;return 0};m.uc=function(a){if(this.O!=null)if(a>=0&&a<this.O.pa.length)return this.O.pa[a].N;return null};m.h=function(a,b,c){var d=new pf;hf(this,d,a,b,c);if(this.O)d.O=this.O.h();d.$h=this.$h;d.Bc=this.Bc;if(this.g)d.g=this.g.e();return d};function sf(){this.O=new md;var a=[0,1,2,0,2,3],b=new kd;this.O.vd(b);b.N.Tb=true;b.fa=a;b.m.push(this.Qa(-1,-1,-1,0,0,1,1,1));b.m.push(this.Qa(1,-1,-1,0,0,1,0,1));b.m.push(this.Qa(1,1,-1,0,0,1,0,0));b.m.push(this.Qa(-1,1,-1,0,0,1,1,0));b=new kd;this.O.vd(b);b.N.Tb=true;b.fa=a;b.m.push(this.Qa(1,-1,-1,-1,0,0,1,1));b.m.push(this.Qa(1,-1,1,-1,0,0,0,1));b.m.push(this.Qa(1,1,1,-1,0,0,0,0));b.m.push(this.Qa(1,1,-1,-1,0,0,1,0));b=new kd;this.O.vd(b);b.N.Tb=true;b.fa=a;b.m.push(this.Qa(-1,-1,1,1,0,0,1,1));
b.m.push(this.Qa(-1,-1,-1,1,0,0,0,1));b.m.push(this.Qa(-1,1,-1,1,0,0,0,0));b.m.push(this.Qa(-1,1,1,1,0,0,1,0));b=new kd;this.O.vd(b);b.N.Tb=true;b.fa=a;b.m.push(this.Qa(1,-1,1,0,0,-1,1,1));b.m.push(this.Qa(-1,-1,1,0,0,-1,0,1));b.m.push(this.Qa(-1,1,1,0,0,-1,0,0));b.m.push(this.Qa(1,1,1,0,0,-1,1,0));b=new kd;this.O.vd(b);b.N.Tb=true;b.fa=a;b.m.push(this.Qa(1,1,-1,0,-1,0,1,1));b.m.push(this.Qa(1,1,1,0,-1,0,0,1));b.m.push(this.Qa(-1,1,1,0,-1,0,0,0));b.m.push(this.Qa(-1,1,-1,0,-1,0,1,0));b=new kd;this.O.vd(b);
b.N.Tb=true;b.fa=a;b.m.push(this.Qa(1,-1,1,0,1,0,1,1));b.m.push(this.Qa(1,-1,-1,0,1,0,0,1));b.m.push(this.Qa(-1,-1,-1,0,1,0,0,0));b.m.push(this.Qa(-1,-1,1,0,1,0,1,0))}sf.prototype=new pf;m=sf.prototype;m.k=l("sky");m.Qa=function(a,b,c,d,e,f,g,j){d=new Nb(true);d.f.c=a;d.f.b=b;d.f.d=c;d.Ba.c=g;d.Ba.b=j;return d};m.Ka=function(a){if(this.X){of(a,this,1);$.prototype.Ka.call(this,a)}};
m.yb=function(a){var b=this.r.ba;if(b&&this.O){var c=new D(false);this.Y.va(c);xb(c,O(b));b=(b.Mg+b.Lg)*0.5;var d=new D;yb(d,new t(b,b,b));a.Hc(F(c,d));c=this.O;if(c!=null)for(b=0;b<c.pa.length;++b){d=c.pa[b];Hd(a,d.N);Id(a,d)}}};m.h=function(a,b,c){var d=new sf;hf(this,d,a,b,c);if(this.O)d.O=this.O.e();d.$h=this.$h;d.Bc=this.Bc;if(this.g)d.g=this.g.e();return d};new pf;function tf(){this.gb();this.g=new z;this.Cg=this.gi=10;this.Ch=false;this.Ec=new kd;this.Vg=new Nb(true);this.Wg=new Nb(true);this.Xg=new Nb(true);this.Yg=new Nb(true);var a=this.Ec.fa;a.push(0);a.push(2);a.push(1);a.push(0);a.push(3);a.push(2);a=this.Ec.m;a.push(this.Vg);a.push(this.Wg);a.push(this.Xg);a.push(this.Yg);this.Vg.Ba.c=1;this.Vg.Ba.b=1;this.Wg.Ba.c=1;this.Wg.Ba.b=0;this.Xg.Ba.c=0;this.Xg.Ba.b=0;this.Yg.Ba.c=0;this.Yg.Ba.b=1;for(var b=0;b<4;++b)A(this.g,a[b].f)}tf.prototype=new $;m=tf.prototype;
m.ob=da("g");m.k=l("billboard");m.Ka=function(a){if(this.X){of(a,this,ed(this.Ec.N)?qf:rf);$.prototype.Ka.call(this,a)}};
m.yb=function(a){var b=this.r.ba;if(b)if(this.Ch){e=O(this);var c=O(b),d=b.vb;b=b.ga.substract(c);b.normalize();c=Ha(d,b);za(c)==0&&c.set(d.b,d.c,d.d);c.normalize();Ca(c,0.5*this.gi);d=Ha(c,b);d.normalize();Ca(d,0.5*this.Cg);this.Ch&&d.set(0,-0.5*this.Cg,0);Ca(b,1);wa(this.Vg.f,e);this.Vg.f.qa(c);this.Vg.f.qa(d);wa(this.Wg.f,e);this.Wg.f.qa(c);sa(this.Wg.f,d);wa(this.Xg.f,e);sa(this.Xg.f,c);sa(this.Xg.f,d);wa(this.Yg.f,e);sa(this.Yg.f,c);this.Yg.f.qa(d);this.Ec.update(true);e=new D(true);a.Hc(e);
Hd(a,this.Ec.N);Id(a,this.Ec)}else{var e=O(this);a.ek==null&&ae(a);d=a.ek;b=new D(true);yb(b,new t(this.gi*0.5,this.Cg*0.5,0));c=a.qd.e();xb(c,new t(0,0,0));var f=new D(true);ob(c,f);xb(f,e);b=F(f,b);a.Hc(b);Hd(a,this.Ec.N);Id(a,d)}};m.$c=l(1);m.uc=function(){return this.Ec.N};m.h=function(a,b,c){var d=new tf;hf(this,d,a,b,c);if(this.g)d.g=this.g.e();d.gi=this.gi;d.Cg=this.Cg;d.Ch=this.Ch;d.Ec.N=this.Ec.N.e();return d};function uf(){this.gb();this.g=new z;this.wa=new kd;this.Ga=new t(0,-0.03,0);this.Ub=new t(0,0,0);this.ik=this.Aj=0;this.bb=[]}uf.prototype=new $;m=uf.prototype;m.Ga=null;m.ld=10;m.Ub=null;m.df=1E3;m.Jh=2E3;m.Kh=200;m.gg=10;m.Gj=20;m.Jj=4278190080;m.Hj=4294967295;m.hg=5;m.ig=5;m.eg=7;m.Lh=7;m.uh=false;m.vh=500;m.qj=0;m.Yf=false;m.uj=500;m.Dd=null;m.sg=false;m.ak=20;m.bk=20;m.Vm=false;
m.h=function(a,b,c){var d=new uf;hf(this,d,a,b,c);if(this.g)d.g=this.g.e();d.Ga=this.Ga.e();d.ld=this.ld;d.Ub=this.Ub.e();d.df=this.df;d.Jh=this.Jh;d.Kh=this.Kh;d.gg=this.gg;d.Gj=this.Gj;d.Jj=this.Jj;d.Hj=this.Hj;d.hg=this.hg;d.ig=this.ig;d.eg=this.eg;d.Lh=this.Lh;d.uh=true;d.vh=this.vh;d.qj=this.qj;d.Yf=this.Yf;d.uj=this.uj;d.Dd=this.Dd;d.sg=this.sg;d.ak=this.ak;d.bk=this.bk;d.wa.N=this.wa.N.e();return d};m.ob=da("g");m.k=l("particlesystem");
m.Ka=function(a){if(this.X){of(a,this,ed(this.wa.N)?qf:rf);$.prototype.Ka.call(this,a)}};m.$c=l(1);m.uc=function(){return this.wa.N};
m.Lb=function(a,b){var c=false;if(this.X)if(this.Aj==0){this.Aj=b;c=false}else{c=b-this.Aj;this.Aj=b;if(this.X){var d=false;d=this.Gj-this.gg;var e=1E3/(d?this.gg+Math.random()*d:this.gg);d=this.bb.length;this.ik+=c;if(this.ik<=e)d=false;else{e=this.ik/e+0.5;this.ik=0;if(d+e>this.Kh)e-=d+e-this.Kh;if(e<=0)d=false;else{var f=this.Ga.e();jb(this.Y,f);for(var g=ib(this.Y).getLength(),j=xa(this.Ub),k=d;k<d+e;++k){var n=new vf;n.bd=new t(0,0,0);if(!j){if(this.Ub.c!=0)n.bd.c=Math.random()*this.Ub.c-this.Ub.c*
0.5;if(this.Ub.b!=0)n.bd.b=Math.random()*this.Ub.b-this.Ub.b*0.5;if(this.Ub.d!=0)n.bd.d=Math.random()*this.Ub.d-this.Ub.d*0.5}n.startTime=b;n.Qi=f.e();if(this.ld){var p=f.e(),q=Math.random()*this.ld*2-this.ld;q*=o.Bd;var h=Math.cos(q);q=Math.sin(q);var w=p.c,u=p.b;p.c=w*h-u*q;p.b=w*q+u*h;q=Math.random()*this.ld*2-this.ld;q*=o.Bd;h=Math.cos(q);q=Math.sin(q);w=p.b;u=p.d;p.b=w*h-u*q;p.d=w*q+u*h;Ka(p,Math.random()*this.ld*2-this.ld);n.Qi=p}n.yi=this.Jh-this.df==0?b+this.df:b+this.df+Math.random()*(this.Jh-
this.df);n.color=o.qo(this.Jj,this.Hj,Math.random()*100/100);n.Xo=n.color;n.Yo=n.Qi.e();if(this.hg==this.eg&&this.ig==this.Lh){n.Mi=this.hg;n.Ni=this.ig}else{p=Math.random()*100/100;h=1-p;n.Mi=this.hg*p+this.eg*h;n.Ni=this.ig*p+this.Lh*h}n.Mi*=g;n.Ni*=g;n.Dm=n.Mi;n.Em=n.Ni;mb(this.Y,n.bd);this.bb.unshift(n)}d=true}}if(!this.uh&&!this.Yf&&!this.sg)e=false;else{e=0;f=null;if(this.uh)for(e=0;e<this.bb.length;++e){f=this.bb[e];if(f.yi-b<this.vh)f.color=o.qo(f.Xo,this.qj,(f.yi-b)/this.vh)}if(this.Yf){g=
Fa(this.Dd,ib(this.Y));for(e=0;e<this.bb.length;++e){f=this.bb[e];j=(b-f.startTime)/this.uj;j=o.sc(j,0,1);j=1-j;f.Qi=La(f.Yo,g,j)}}if(this.sg){g=ib(this.Y).c;for(e=0;e<this.bb.length;++e){f=this.bb[e];j=(b-f.startTime)/(f.yi-f.startTime);f.Dm=f.Mi+this.ak*j*g;f.Em=f.Ni+this.bk*j*g}}e=true}d=e||d;e=new t(this.Y.J,this.Y.K,this.Y.B);this.wa.g.reset(e.c,e.b,e.d);if(this.bb.length!=0)d=true;for(e=0;e<this.bb.length;){f=this.bb[e];if(b>f.yi)this.bb.splice(e,1);else{f.bd.qa(y(f.Qi,c));A(this.wa.g,f.bd);
++e}}c=this.eg*0.5;this.wa.g.M.c+=c;this.wa.g.M.b+=c;this.wa.g.M.d+=c;this.wa.g.C.c-=c;this.wa.g.C.b-=c;this.wa.g.C.d-=c;c=new D(false);ob(this.Y,c);zb(c,this.wa.g);c=d}else c=false}return $.prototype.Lb.call(this,a,b)||c};m.Ka=function(a){if(this.X){if(this.bb.length!=0)of(a,this,ed(this.wa.N)?qf:rf);$.prototype.Ka.call(this,a)}};
m.yb=function(a){if(this.r.ba)if(this.bb.length!=0){var b=a.Cd;if(this.Vm)a.Cd=false;if(this.bb.length*4>this.wa.m.length||this.bb.length*6>this.wa.fa.length){for(var c=this.wa.m.length,d=this.wa.m;this.wa.m.length<this.bb.length*4;){var e=null;e=new Nb(true);e.Ba.set(0,0);d.push(e);e=new Nb(true);e.Ba.set(0,1);d.push(e);e=new Nb(true);e.Ba.set(1,1);d.push(e);e=new Nb(true);e.Ba.set(1,0);d.push(e)}c=c;d=this.bb.length*6;e=this.wa.fa;for(var f=this.wa.fa.length;f<d;f+=6){e.push(0+c);e.push(2+c);e.push(1+
c);e.push(0+c);e.push(3+c);e.push(2+c);c+=4}}c=a.qd;d=new t(-c.s,-c.t,-c.n);e=0;var g=null;for(f=0;f<this.bb.length;++f){var j=this.bb[f];g=0.5*j.Dm;var k=new t(c.p*g,c.v*g,c.w*g);g=-0.5*j.Em;var n=new t(c.u*g,c.q*g,c.A*g);g=this.wa.m[0+e];g.f=j.bd.add(k).add(n);g.oa=j.color;g.j=d;g=this.wa.m[1+e];g.f=j.bd.add(k).substract(n);g.oa=j.color;g.j=d;g=this.wa.m[2+e];g.f=j.bd.substract(k).substract(n);g.oa=j.color;g.j=d;g=this.wa.m[3+e];g.f=j.bd.substract(k).add(n);g.oa=j.color;g.j=d;e+=4}c=new D(true);
a.Hc(c);this.wa.update(false,true);Hd(a,this.wa.N);Id(a,this.wa,this.bb.length*2*3);if(this.Vm)a.Cd=b}};function vf(){this.Qi=this.bd=null;this.Xo=this.color=this.yi=this.startTime=0;this.Yo=null;this.Ni=this.Mi=this.Em=this.Dm=0};function wf(){this.Vh=new t(0,0,0);this.oa=new oa;this.Ea=100;this.hh=0.01;this.Ga=null;this.Ah=false}m=wf.prototype;m.e=function(){var a=new wf;a.Vh=this.Vh.e();a.oa=this.oa.e();a.Ea=this.Ea;a.hh=this.hh;a.Ah=this.Ah;a.Ga=this.Ga!=null?this.Ga.e():null;return a};m.Vh=null;m.oa=null;m.hh=null;m.Ea=null;m.Ga=null;m.Ah=false;function xf(){this.Za=new wf;this.g=new z;this.gb()}xf.prototype=new $;m=xf.prototype;m.k=l("light");m.Za=null;
m.h=function(a,b,c){var d=new xf;hf(this,d,a,b,c);d.Za=this.Za.e();d.g=this.g.e();return d};m.Ka=function(a){this.X&&of(a,this,yf);$.prototype.Ka.call(this,a);this.Za.Vh=O(this)};m.ob=da("g");m.yb=function(a){this.Za.Ah?Ud(a,this.Za):Td(a,this.Za)};function zf(){this.gb();this.g=new z;this.Jg=0;this.Ze=false;this.Eb=[]}zf.prototype=new $;m=zf.prototype;m.Jg=0;m.Ze=false;m.Eb=[];m.ob=da("g");m.k=l("path");m.h=function(a,b,c){var d=new zf;hf(this,d,a,b,c);if(this.g)d.g=this.g.e();d.Jg=this.Jg;d.Ze=this.Ze;d.Eb=[];for(a=0;a<this.Eb.length;++a)d.Eb.push(this.Eb[a].e());return d};function Af(a,b){if(b<0||b>=a.Eb.length)return new t(0,0,0);a.Y||P(a);b=a.Eb[b];b=b.e();mb(a.Y,b);return b}
function Bf(a,b,c){if(a.Ze)return b<0?c+b:b>=c?b-c:b;return b<0?0:b>=c?c-1:b}
function Cf(a,b,c){var d=a.Eb.length;if(a.Ze)b*=d;else{b=o.sc(b,0,1);b*=d-1}var e=new t;if(d==0)return e;if(d==1)return e;b=b;var f=o.fq(b),g=Math.floor(b)%d,j=a.Eb[Bf(a,g-1,d)];e=a.Eb[Bf(a,g+0,d)];b=a.Eb[Bf(a,g+1,d)];var k=a.Eb[Bf(a,g+2,d)],n=2*f*f*f-3*f*f+1;d=-2*f*f*f+3*f*f;g=f*f*f-2*f*f+f;f=f*f*f-f*f;j=b.substract(j);Ca(j,a.Jg);k=k.substract(e);Ca(k,a.Jg);e=y(e,n);e.qa(y(b,d));e.qa(y(j,g));e.qa(y(k,f));if(!c){a.Y||P(a);mb(a.Y,e)}return e};function Df(){this.gb();this.g=new z;this.mn=this.Ih=this.pe=0;this.op=false;this.Kg=this.gl=this.hn=0;this.og=false;this.Mc=null;this.Sp=false;this.nn=this.Vl=0}Df.prototype=new $;Df.prototype.ob=da("g");Df.prototype.k=l("sound");Df.prototype.Ka=function(a){if(this.X){of(a,this,rf);$.prototype.Ka.call(this,a)}};
function Ef(a,b,c,d){var e=a.Kg;if(d)if(b)if(d=d.ba){var f=O(d);d.ga.substract(f);c=f.xb(c);if(!(c<a.pe)){c-=a.pe;d=a.Ih-a.pe;if(d>0){if(c>d)c=d;d=10;if(c!=0)d=a.pe/c;e*=d;if(e>10)e=10}else e=10}if(e>1)e=1;if(b)try{b.src.cc.volume=e}catch(g){}}}function Ff(a,b){if(!a.Mc&&a.Nb){a.Sp=false;a.Mc=Kc(o.Vd,a.Nb,b);if(!a.og){b=O(a);Ef(a,a.Mc,b,a.r)}}}
Df.prototype.Lb=function(a,b){try{var c=O(this);this.Mc&&!this.og&&Ef(this,this.Mc,c,a);switch(this.mn){case 0:break;case 1:if(this.Mc&&je(this.Mc)){this.Mc=null;var d=this.hn-this.gl;if(d<2)d=2;this.Vl=b+Math.random()*d+this.gl}else if(!this.Mc&&(!this.Vl||b>this.Vl))this.Nb&&Ff(this,false);break;case 2:this.Mc||this.Nb&&Ff(this,true);break;case 3:if(!this.nn)if(this.Nb){Ff(this,false);++this.nn}break}}catch(e){}return false};
Df.prototype.h=function(a,b,c){var d=new Df;hf(this,d,a,b,c);if(this.g)d.g=this.g.e();return d};function Gf(a){this.gb();this.Ra=a;this.g=new z;this.gf=this.ff=100;this.uf=this.vf=50;this.jf=this.hf=0.5;this.xf=1/6;this.wf=1/6;this.Bg=this.Nd=true;this.Jc=0;this.ze=this.Fa=null;this.rg=true;this.We=this.Ik=false;this.Fg=1;this.hd=this.eb="";this.zf=0;this.Qh=this.zh=this.Rh=this.vj=this.rl=this.eh=false;this.ji=this.ki=null;this.Rm=this.Sm="";this.fj=0}Gf.prototype=new $;m=Gf.prototype;m.hd="";m.zf=0;m.Fg=1;m.ho=l(false);m.ob=da("g");m.k=l("2doverlay");
m.Bm=function(a){this.eb=a;this.We=this.eb!=null&&this.eb!="";if(this.hd=="")this.hd="12;default;arial;normal;bold;true"};m.Ka=function(a){if(this.X){of(a,this,Qe);$.prototype.Ka.call(this,a)}};
m.yb=function(a){var b=Hf(this,true,a),c=false;if(this.Ra!=null&&this.eh){c=this.Ra.Ib;var d=this.Ra.Jb;c=b.x<=c&&b.y<=d&&b.x+b.Ua>=c&&b.y+b.Sa>=d}if(c&&this.Rh)Pd(a,b.x,b.y,b.Ua,b.Sa,this.zh,true);else this.Bg&&Pd(a,b.x,b.y,b.Ua,b.Sa,this.Jc,true);d=this.Fa;if(c&&this.ze&&this.Qh)d=this.ze;if(d!=null&&d.mc){var e=d.Qb(),f=d.Pb();if(this.rg){if(e&&f&&b.Sa&&b.Ua){var g=b.Ua;e=g*(f/e);if(e>b.Sa){f=b.Sa/e;g*=f;e*=f}b.Ua=g;b.Sa=e;Qd(a,b.x,b.y,b.Ua,b.Sa,d,true,null,null,null,!this.Ik)}}else Qd(a,b.x,b.y,
b.Ua,b.Sa,d,true,null,null,null,!this.Ik)}if(this.We&&this.hd&&this.eb!=""){a:{e=b.Ua;(d=this.ki==null||false)||(d=this.Sm!=this.eb||this.Rm!=this.hd);if(d){If(this,a);d=document.createElement("canvas");if(d!=null){d.width=1;d.height=1;g=null;try{g=d.getContext("2d");if(g==null)break a}catch(j){break a}var k=this.hd;f=12;var n="Arial",p=false,q=false;if(k.indexOf("#fnt_")==0)k=k.substr(5);k=k.split(";");for(var h=0;h<k.length;++h){var w=k[h],u=w.toLowerCase();if(h==0)f=parseInt(u);else if(h==2)n=
w;else if(h==3){if(u.indexOf("italic")!=-1)p=true}else if(h==4)if(u.indexOf("bold")!=-1)q=true}k="";if(p)k+="italic ";if(q)k+="bold ";this.fj=f*96/72;k+=this.fj+"px ";k+=n;f=k;g.font=f;if(this.Fg==2){n=[];p=this.eb;q=g;w=h=k="";u=p.length;for(var K=0,C=e-6,v="c",G=0;G<u;++G){v=p.charAt(G);var H=false;if(v=="\r"){H=true;v=" ";if(p.charAt(G+1)=="\n"){p=p.substr(0,G).concat(p.substr(G+2));--u}}else if(v=="\n"){H=true;v=" "}if(v==" "||v==0||G==u-1){if(h.length){var M=q.measureText(w).width,Y=q.measureText(h).width;
if(K+Y+M>C){K=Y;n.push(k);k=h}else{k=k.concat(w);k=k.concat(h);K+=M+Y}w=h=""}w=w.concat(v);if(H){k=k.concat(w);k=k.concat(h);n.push(k);w=h=k="";K=0}}else h=h.concat(v)}k=k.concat(w);k=k.concat(h);n.push(k);p=this.fj*1.2;k=n.length;q=0;d.width=e;d.height=Math.max(1,k*p);g.fillStyle="rgba(0, 0, 0, 1)";g.fillRect(0,0,d.width,d.height);g.fillStyle="rgba(255, 255, 255, 1)";g.textBaseline="top";g.font=f;for(e=0;e<n.length;++e){g.fillText(n[e],0,q);q+=p}}else{e=g.measureText(this.eb);d.width=e.width;d.height=
this.fj*1.2;g.fillStyle="rgba(0, 0, 0, 1)";g.fillRect(0,0,d.width,d.height);g.fillStyle="rgba(255, 255, 255, 1)";g.textBaseline="top";g.font=f;g.fillText(this.eb,0,0)}this.ji=this.ki=d=bd(a,d,true);this.Sm=this.eb;this.Rm=this.hd}}}d=this.ki;g=this.zf;if(c){if(this.ji)d=this.ji;g=this.vj}if(d){c=d.mg;e=d.lg;this.Fg==1?Rd(a,b.x+(b.Ua-c)/2,b.y+(b.Sa-e)/2,c,e,d,g):Rd(a,b.x,b.y,c,e,d,g)}}else If(this,a)};function If(a,b){b.deleteTexture(a.ki);b.deleteTexture(a.ji);a.ki=null;a.ji=null}
Gf.prototype.$c=l(0);function Hf(a,b,c){b=c.Qb();c=c.Pb();var d={};if(a.Nd){d.x=a.ff;d.y=a.gf;d.Ua=a.vf;d.Sa=a.uf}else{d.x=a.hf*b;d.y=a.jf*c;d.Ua=a.xf*b;d.Sa=a.wf*c}return d}
Gf.prototype.h=function(a,b,c){var d=new Gf;hf(this,d,a,b,c);d.ff=this.ff;d.gf=this.gf;d.vf=this.vf;d.uf=this.uf;d.hf=this.hf;d.jf=this.jf;d.xf=this.xf;d.wf=this.wf;d.Nd=this.Nd;d.Bg=this.Bg;d.Jc=this.Jc;d.Fa=this.Fa;d.ze=this.ze;d.rg=this.rg;d.We=this.We;d.Fg=this.Fg;d.eb=this.eb;d.hd=this.hd;d.zf=this.zf;d.eh=this.eh;d.rl=this.rl;d.vj=this.vj;d.Rh=this.Rh;d.zh=this.zh;d.Qh=this.Qh;return d};function Jf(a,b){Gf.call(this,a);this.Vf=null;this.ic=this.hc=0;this.Mj=false;this.Lc=this.wj=this.xn=this.wn=this.Dl=this.El=0;Zb(this,new Kf(a,b,this))}Jf.prototype=new Gf;Jf.prototype.k=l("mobile2dinput");Jf.prototype.ho=l(true);
Jf.prototype.yb=function(a){var b=Hf(this,true,a),c=false;if(this.Ra!=null){var d=this.Ra.Ib,e=this.Ra.Jb;this.Mj=b.x<=d&&b.y<=e&&b.x+b.Ua>=d&&b.y+b.Sa>=e;if(this.eh)c=this.Mj}if(c&&this.Rh)Pd(a,b.x,b.y,b.Ua,b.Sa,this.zh,true);else this.Bg&&Pd(a,b.x,b.y,b.Ua,b.Sa,this.Jc,true);d=this.Fa;if(c&&this.ze&&this.Qh)d=this.ze;e=c=0;if(d!=null&&d.mc){var f=d.Qb(),g=d.Pb();if(this.rg){if(f&&g&&b.Sa&&b.Ua){c=b.Ua;e=c*(g/f);if(e>b.Sa){f=b.Sa/e;c*=f;e*=f}b.Ua=c;b.Sa=e;Qd(a,b.x,b.y,b.Ua,b.Sa,d,true);c=b.Ua;e=
b.Sa}}else{Qd(a,b.x,b.y,b.Ua,b.Sa,d,true);c=b.Ua;e=b.Sa}}this.El=c;this.Dl=e;this.wn=b.x;this.xn=b.y;if(this.wj==0&&this.Vf!=null&&this.Vf.mc&&d!=null&&d.mc){f=this.hc*Math.sqrt(1-0.5*this.ic*this.ic);g=this.ic*Math.sqrt(1-0.5*this.hc*this.hc);f=(f+1)*0.5;g=(g+1)*0.5;var j=1/(d.Qb()/Number(this.Vf.Qb()));d=1/(d.Pb()/Number(this.Vf.Pb()));j=j*c;d=d*e;Qd(a,b.x+f*c-j*0.5,b.y+g*e-d*0.5,j,d,this.Vf,true)}};function Lf(){this.gb();this.g=new z;this.Bc=false;this.cb=this.Ia=null;this.Dh=0;this.Cb=[];this.Bb=0.25;this.Te=r();this.tb=this.Ta=this.Sk=0;this.Zb=false;this.Ac=0;this.fd=250;this.ee=true;this.hj=false;this.bg=[];this.$i=0;this.Un=false;this.hl=20;this.Ab=[]}Lf.prototype=new $;o.An=function(){this.xa=null;this.Pj=this.ag=-1};Lf.prototype.ob=da("g");Lf.prototype.dc=function(a){if(!this.Ia)return false;a=td(this.Ia,a);if(!a)return false;Mf(this,a.xd,a.P);this.Bb=a.Cc;return true};
function jc(a,b,c){if(!a.Ia)return false;var d=a.Ia;if(!d)return false;var e=td(d,b);if(e){Mf(a,e.xd,e.P);e.Cc!=0&&Nf(a,e.Cc);a.Zb=c}else if(b){b=b.toLowerCase();if(b=="all"){Mf(a,0,Math.floor(d.ed));d.Nk!=0&&Nf(a,d.Nk);a.Zb=c}else if(b=="none"){Mf(a,0,0);a.Zb=c}}return true}m=Lf.prototype;m.Uo=function(a){if(a){this.Ia=a;this.g=a.ob();Mf(this,0,Math.floor(a.ed))}};m.k=l("animatedmesh");
m.Ka=function(a){if(this.X&&this.Ia){var b=this.Cb,c=false,d=false;if(b!=null)for(var e=0;e<b.length;++e)if(ed(b[e]))c=true;else d=true;c&&of(a,this,qf);d&&of(a,this,rf);$.prototype.Ka.call(this,a)}};m.$c=function(){if(this.Cb!=null)return this.Cb.length;if(this.O)return this.O.pa.length;return 0};m.uc=function(a){if(this.Cb)if(a>=0&&a<this.Cb.length)return this.Cb[a];else if(this.Ia&&this.Ia.wd&&a>=0&&this.Cb.length==a&&a<256){a=new dd;this.Cb.push(a);return a}return null};
m.h=function(a,b,c){var d=new Lf;hf(this,d,a,b,c);d.Ia=this.Ia;if(this.g)d.g=this.g.e();d.Bc=this.Bc;d.cb=this.cb;d.Dh=this.Dh;d.Cb=[];for(a=0;a<this.Cb.length;++a)d.Cb.push(this.Cb[a].e());d.Bb=this.Bb;d.Te=this.Te;d.Sk=this.Sk;d.Ta=this.Ta;d.tb=this.tb;d.Zb=this.Zb;d.Ac=this.Ac;d.hl=this.hl;d.fd=this.fd;d.ee=this.ee;d.hj=false;d.bg=[];for(a=d.$i=0;a<this.Ab.length;++a){b=new o.An;b.xa=this.Ab[a].xa;b.ag=this.Ab[a].ag;b.Pj=this.Ab[a].Pj;d.Ab.push(b)}return d};function Nf(a,b){a.Bb=b}
function Of(a,b){a.Zb=b}function Mf(a,b,c){if(!a.Ia)return false;var d=Math.floor(a.Ia.ed)-1,e=a.Ta,f=a.tb;if(c<b){a.Ta=o.sc(c,0,d);a.tb=o.sc(b,a.Ta,d)}else{a.Ta=o.sc(b,0,d);a.tb=o.sc(c,a.Ta,d)}if(e!=a.Ta||f!=a.tb){b=a.Ac;a.Ac=o.sc(a.Ta,a.Ta,a.tb);a.Te=r()-Math.floor((a.Ac-a.Ta)/a.Bb);a.ee&&a.fd&&Pf(a,b)}return true}
function Qf(a){var b=a.Ia;if(b){var c=false;if((c=Rf(a,a.Ac))||b.Fm){a:{for(c=0;c<a.Cb.length;++c)if(a.Cb[c].Dc){c=true;break a}c=false}if(b.Ed){b.Fm=false;rd(b,null,null);var d=0,e=0,f;for(d=0;d<b.sa.length;++d){var g=b.sa[d];for(e=0;e<g.fh.length;++e){f=b.$a[g.fh[e]];f.Ce=g.Xe.e()}}for(d=0;d<b.$a.length;++d){f=b.kk[d];for(e=0;e<f.length;++e)f[e]=false}for(d=0;d<b.nf.length;++d)sd(b,b.nf[d],null,c)}b.rb.C.set(0,0,0);b.rb.M.set(0,0,0);if(b.$a.length){c=b.$a[0];ld(c);b.rb.C=c.g.C.e();b.rb.M=c.g.M.e();
for(d=1;d<b.$a.length;++d){c=b.$a[d];ld(c);if(c.Ce==null){A(b.rb,c.g.C);A(b.rb,c.g.M)}else{e=c.g.e();zb(c.Ce,e);A(b.rb,e.C);A(b.rb,e.M)}}}a.g=b.ob().e();for(c=0;c<b.$a.length;++c)b.$a[c].update(true)}a.Sk=a.Ac}}
Lf.prototype.Lb=function(a,b){var c=r();if(this.Dh==0||c-this.Dh>this.hl){var d;d=0;if(this.Ta==this.tb)d=this.Ta;else if(this.Bb==0)d=this.Ta;else{d=0;if(this.Zb){var e=false;d=Math.abs(Math.floor((this.tb-this.Ta)/this.Bb));if(this.Bb>0){d=this.Ta+(b-this.Te)%d*this.Bb;e=d<this.Ac}else{d=this.tb-(b-this.Te)%d*-this.Bb;e=d>this.Ac}e&&this.ee&&Pf(this,this.Ac)}else if(this.Bb>0){d=(b-this.Te)*this.Bb;d=this.Ta+d;if(d>this.tb)d=this.tb}else{d=(b-this.Te)*-this.Bb;d=this.tb-d;if(d<this.Ta)d=this.Ta}d=
d}this.Ac=d;this.Dh=c}a=$.prototype.Lb.call(this,a,b);this.Ab.length!=0&&Sf(this);return a};Lf.prototype.yb=function(a){var b=this.r.ej;if(b)if(!Mb(b,gf(this)))return;if(b=this.Ia){a.Hc(this.Y);!b.Ed||Qf(this);this.Un=true;for(var c=0;c<b.$a.length;++c){var d=b.$a[c];if(c<this.Cb.length)d.N=this.Cb[c];if(ed(d.N)==(this.r.Hb==qf)){d.Ce!=null&&a.Hc(F(this.Y,d.Ce));Hd(a,d.N);Id(a,d);d.Ce!=null&&a.Hc(this.Y)}}}};
function Tf(a,b){b=b.length;if(b>a.bg.length)for(;a.bg.length<b;){var c={};c.xc=new t(0,0,0);c.Sb=new t(1,1,1);c.yc=new Ab;a.bg.push(c)}}function Pf(a,b){if(a.Un){var c=a.Ia;if(c){Rf(a,b);a.$i=r();a.hj=true;Tf(a,c.sa);for(b=0;b<c.sa.length;++b){var d=a.bg[b],e=c.sa[b];d.xc=e.xc.e();d.Sb=e.Sb.e();d.yc=e.yc.e()}}}}
function Rf(a,b){var c=a.Ia;if(c){var d=1;if(a.hj){var e=r();if(e-a.$i>a.fd)a.hj=false;else{d=(e-a.$i)/a.fd;Tf(a,c.sa);for(e=0;e<c.sa.length;++e){var f=a.bg[e],g=c.sa[e];g.xc=f.xc.e();g.Sb=f.Sb.e();g.yc=f.yc.e()}}}a=d;if(!c.Ed||o.D(c.Yk,b)&&a==1)c=false;else{c.Yk=b;if(a<0)c=false;else{if(o.D(a,1))for(d=0;d<c.sa.length;++d){e=c.sa[d];f=e.xc.e();g=e.Sb.e();var j=e.yc.e();qd(c,b,e,f,e.Ko,g,e.So,j,e.Ro);e.xc=f.e();e.Sb=g.e();e.yc=j.e()}else for(d=0;d<c.sa.length;++d){e=c.sa[d];var k=e.xc.e(),n=e.Sb.e(),
p=e.yc.e();f=k.e();g=n.e();j=p.e();qd(c,b,e,f,e.Ko,g,e.So,j,e.Ro);e.xc=La(k,f,a);e.Sb=La(n,g,a);Cb(e.yc,p,j,a)}for(b=0;b<c.sa.length;++b){a=c.sa[b];if(a.kf.length||a.xe.length||a.of.length){if(!a.yc)a.yc=new Ab;if(!a.xc)a.xc=new t;a.dg=Db(a.yc);d=a.dg;e=a.xc;d.p+=e.c*d.G;d.u+=e.b*d.G;d.s+=e.d*d.G;d.v+=e.c*d.H;d.q+=e.b*d.H;d.t+=e.d*d.H;d.w+=e.c*d.I;d.A+=e.b*d.I;d.n+=e.d*d.I;d.J+=e.c*d.L;d.K+=e.b*d.L;d.B+=e.d*d.L;d.Pa=false;a.Zm=false;if(a.xe.length&&a.Sb&&!(o.D(a.Sb.c,1)&&o.D(a.Sb.b,1)&&o.D(a.Sb.d,
1))){e=a.Sb;d.p*=e.c;d.u*=e.c;d.s*=e.c;d.G*=e.c;d.v*=e.b;d.q*=e.b;d.t*=e.b;d.H*=e.b;d.w*=e.d;d.A*=e.d;d.n*=e.d;d.I*=e.d}}else a.dg=a.Hh.e()}c=c.Fm=true}}return c}}Lf.prototype.Ho=function(){if(this.r!=null)for(var a=0;a<this.Ab.length;){var b=0,c=this.Ab[a].Pj;if(c!=-1)b=Uf(this.r,this,c);if(b&&b.k()=="dummytrans"){this.Ab[a].xa=b;++a}else this.Ab.splice(a,1)}};
function Sf(a){var b=a.Ia;if(b&&b.Ed){Rf(a,a.Ac);rd(b,null,null);b=b.sa;for(var c=0;c<a.Ab.length;++c){var d=a.Ab[c];if(d.ag>=0&&d.ag<b.length&&d.xa!=null){var e=b[d.ag];if(e)d.xa.qg=e.Xe.e()}}}}Lf.prototype.Ji=function(a,b){for(var c=0;c<this.Ab.length;++c)if(this.Ab[c].xa==a)this.Ab[c].xa=b&&b.k()=="dummytrans"?b:null};function Vf(){this.g=new z;this.rp=this.Yp=0}Vf.prototype=new $;function Wf(){this.gb();this.g=new z;this.qg=new D}Wf.prototype=new $;Wf.prototype.h=function(a,b,c){var d=new Wf;hf(this,d,a,b,c);if(this.g)d.g=this.g.e();if(this.qg)d.qg=this.qg;return d};Wf.prototype.om=da("qg");Wf.prototype.k=l("dummytrans");function Xf(){this.gb();this.g=new z}Xf.prototype=new $;Xf.prototype.k=l("terrain");function Yf(){this.Um=0;this.lk=new Oa(1,1);this.Wn=this.Xn=0.5;this.ti=o.If(190,255,255,255);this.Qm=true;this.Qn=o.If(190,0,100,0);this.Pk=false;this.bl=0;this.dn=new D;this.ij=false;this.N=new dd;this.N.Dc=false;this.N.i=-1;this.N.fe=false;this.Ym=this.lf=null}Yf.prototype=new pf;m=Yf.prototype;m.k=l("water");
m.Ka=function(a){if(this.X){of(a,this,qf);$.prototype.Ka.call(this,a);var b=a.ba,c=r(),d=false;if(this.bl){d=100;if(b){var e=O(b),f=Qa(this.ob()).getLength();e=O(this).xb(e);if(e>f)d*=e/f;if(d>1E3)d=1E3;b.wb.D(this.dn)||(d=10);this.dn=b.wb.e()}d=this.bl+d<c}else d=true;if(d){this.bl=c;of(a,this,Oe)}if(this.Pk)of(a,this,Qe);else if(b){b=O(b);c=O(this);if(b.b<c.b){c=gf(this);b.c>=c.C.c&&b.c<=c.M.c&&b.d>=c.C.d&&b.d<=c.M.d&&of(a,this,Qe)}}}};m.Lb=function(a,b){pf.prototype.Lb.call(this,a,b);return true};
m.yb=function(a){var b=this.r.ba;if(b&&this.O){if((b=this.r.ej)&&this.r.Hb!=Qe)if(!Mb(b,gf(this)))return;if(this.r.Hb==qf){if(!(this.N.i==-1||this.lf==null))if(!this.ij){a.Hc(this.Y);if(b=this.O){this.g=b.g;this.N.db=this.lf;if(b&&b.pa&&b.pa.length>0)this.N.rc=b.pa[0].N.db;for(var c=0;c<b.pa.length;++c){var d=b.pa[c];if(d){Hd(a,this.N);Id(a,d)}}}}}else if(this.r.Hb==Oe){if(Zf(this,a)){c=a.mh;a.$f=true;if($d(a,this.lf,true,true,this.r.ih)){this.ij=true;b=this.r.ba;d=b.La;var e=b.wb,f=b.vb,g=b.ga,j=
b.f,k=b.yf,n=b.Ee;b.Ee=true;b.yf=false;var p=O(this).b,q=g.e(),h=j.e();h.b=-j.b+2*p;b.f=h;q.b=-g.b+2*p;b.ga=q;var w=new D;ub(w,h,q,new t(0,1,0));b.wb=w;q=new Wa;p=new t(0,p,0);h=new t(0,1,0);q.j=h.e();Xa(q,p);p=q.e();q=y(p.j,-p.Ya);mb(w,q);h=p.j.e();h.normalize();var u=ib(w);if(!o.D(u.c,0)&&!o.D(u.b,0)&&!o.D(u.d,0)&&(!o.D(u.c,1)||!o.D(u.b,1)||!o.D(u.d,1))){h.c*=1/(u.c*u.c);h.b*=1/(u.b*u.b);h.d*=1/(u.d*u.d)}jb(w,h);h.normalize();p.j=h.e();Xa(p,q);w=new D;q=w=d.e();h=o.Wo(p.j.c+q.w)/q.p;u=o.Wo(p.j.b+
q.A)/q.q;h=-2/(h*p.j.c+u*p.j.b+-1*p.j.d+(1+q.n)/q.B*p.Ya);q.s=p.j.c*h;q.t=p.j.b*h;q.n=p.j.d*h+1;q.B=p.Ya*h;this.Ym=w;Pe(this.r,a,this);b.Ee=n;b.La=d;b.wb=e;b.ga=g;b.f=j;b.vb=f;b.yf=k;a.$f=false;$d(a,c,false,true);this.ij=false}a.$f=false}}else if(this.r.Hb==Qe&&!this.ij){this.Qm&&!this.Pk&&Pd(a,0,0,a.Qb(),a.Pb(),this.Qn,true);this.Pk&&Qd(a,10,10,250,200,this.lf,false)}}};m.h=function(a,b,c){var d=new Yf;hf(this,d,a,b,c);if(this.O)d.O=this.O.e();d.$h=this.$h;d.Bc=this.Bc;if(this.g)d.g=this.g.e();return d};
function Zf(a,b){if(a.Bp)return a.lf!=null;a.Bp=true;$f(a,b);if(!a.lf)return false;var c=b.U;a.N.i=Xd(b,a.Xq,a.mq,true,c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,function(){var d=b.U,e=Yd(b,a.N.i);if(e){var f=d.getUniformLocation(e,"mWaterColor");d.uniform4f(f,o.ad(a.ti)/255,o.Zc(a.ti)/255,o.Yc(a.ti)/255,o.Wd(a.ti)/255);f=r()/1E3%1E3;var g=d.getUniformLocation(e,"mWaveMovement");d.uniform2f(g,a.lk.c*f,a.lk.b*f);f=d.getUniformLocation(e,"mWaveLength");d.uniform1f(f,a.Xn*100);e=d.getUniformLocation(e,"mWaveHeight");
d.uniform1f(e,a.Wn)}});return true}Yf.prototype.Xq="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\tuniform float mWaveLength;\t\t\t\t\t\t\t\t\t\tuniform vec2 mWaveMovement;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec2 WavesTexCoord;\t\t\t\t\t\t\t\t\t\tvarying vec3 TexCoord;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 pos = worldviewproj * vPosition;\t\t\t\t\t        gl_Position = pos;\t\t\t\t\t\t\t\t\t\t\t\tWavesTexCoord = (vPosition.xz / mWaveLength) + mWaveMovement;\t\t\tTexCoord.x = 0.5 * (pos.w + pos.x);\t\t\t\t\t\t\t\tTexCoord.y = 0.5 * (pos.w + pos.y);\t\t\t\t\t\t\t\tTexCoord.z = pos.w;\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
Yf.prototype.mq="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform float\t\tmWaveHeight;\t\t\t\t\t\t\t\tuniform vec4\t\tmWaterColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 WavesTexCoord;\t\t\t\t\t\t\t\t\t\tvarying vec3 TexCoord;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 normalClr = texture2D(texture2, WavesTexCoord.xy);\t\t\tvec2 waveMovement = mWaveHeight * (normalClr.xy - 0.5);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec2 projTexCoord = clamp((TexCoord.xy / TexCoord.z) + waveMovement, 0.0, 1.0);\t\t\t\tvec4 reflectiveColor = texture2D(texture1, vec2(projTexCoord.x, -projTexCoord.y) );\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgl_FragColor = mWaterColor * reflectiveColor;\t\t\t\t\tgl_FragColor.a = mWaterColor.a;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
function $f(a,b){if(b!=null){var c=b.Qb(),d=b.Pb(),e=512,f=512;switch(a.Um){case 0:e=c/2;f=d/2;break;case 1:e=c/3;f=d/3;break;case 2:e=c/4;f=d/4;break}e=yd(b,e);f=yd(b,f);e=Math.min(e,f);f=Math.min(e,f);if(e<64)e=64;if(f<64)f=64;a.lf=Zd(b,e,f)}}function ag(a,b){a.Ym.va(b.La)};function bg(){this.gb()}m=bg.prototype;
m.gb=function(){this.Ma=new $;this.Ma.r=this;this.l="";this.ih=0;this.zd=null;this.Rb=new oa;this.Rb.pc=0;this.Rb.kc=0;this.Rb.gc=0;this.Dd=1;this.Cd=false;this.Vb=o.If(255,200,200,200);this.wh=0.0010;this.ui=1;this.vi=4;this.Eh=null;this.Na=0;this.ba=null;this.Rk=false;this.Cj=new D;this.Up=null;this.Wj=2;this.Hb=0;this.zg=[];this.Ag=[];this.cf=[];this.Xj=[];this.Tj=[];this.Nc=[];this.Qp=this.Ap=0;this.Xp=false;this.ej=null;this.Tn=false;this.qh=[];this.Zk=new t;this.Dn=false};m.rk=l("unknown");
m.Nn=false;m.tf=null;m.Kl=null;m.nd=null;function cg(a,b){if(a.tf)return true;if(a.Nn)return false;a.Nn=true;if(!a.tf){a.tf=Zd(b,512,512,false);if(!a.tf)return false;a.Kl=new dd;b=Xd(b,b.Wq,b.hq);if(b==-1){a.tf=null;return false}a.Kl.i=b}return true}
function Ne(a,b){if(!cg(bg.prototype,b))return false;var c=b.mh;if($d(b,a.tf,true,true,0)){var d=a.ba,e=d.La.e(),f=d.wb.e(),g=d.vb.e(),j=d.ga.e(),k=d.f.e(),n=d.yf,p=d.Ee;d.Ee=true;d.yf=false;var q=new t(-60,40,-60);ub(d.wb,q,new t(0,0,0),new t(0,1,0));tb(d.La,o.PI/2.5,4/3,0.1,3E3);a.nd=new D;a.nd=F(a.nd,d.La);a.nd=F(a.nd,d.wb);a.Hb=dg;q=null;if(a.ba){q=O(a.ba);d.La.va(b.La);d.wb.va(b.qd)}q=eg(a,b,q);a.Hb=rf;Hd(b,a.Kl);for(i=0;i<a.zg.length;++i){var h=a.zg[i];if(h.k()=="mesh")if(q==null||Va(q,gf(h))){b.Hc(h.Y);
for(var w=0;w<h.O.pa.length;++w){var u=h.O.pa[w];ed(u.N)||Id(b,u)}}}d.Ee=p;d.La=e;d.wb=f;d.ga=j;d.f=k;d.vb=g;d.yf=n;$d(b,c,false,true);return true}}function eg(a,b,c){var d=null,e=null,f=b.La;b=b.qd;if(f!=null&&b!=null&&c!=null){e=new Gb;e.Bk(F(f,b));if(a.Xp)d=e.ob(c)}a.ej=e;return d}
function Pe(a,b,c){a.Hb=dg;var d=null;if(a.ba){d=O(a.ba);a.ba.yb(b)}a.Hb=fg;a.Gn&&a.Gn.yb(b);Sd(b);b.Rb=a.Rb.e();b.Cd=a.Cd;b.Vb.Pf=1;b.Vb.pc=o.ad(a.Vb)/255;b.Vb.kc=o.Zc(a.Vb)/255;b.Vb.gc=o.Yc(a.Vb)/255;b.wh=a.Cd?a.wh:0;b.ui=a.ui;b.vi=a.vi;var e,f=0;d!=null&&a.cf.length>0&&a.cf.sort(function(j,k){j=ya(d,O(j));k=ya(d,O(k));if(j>k)return 1;if(j<k)return-1;return 0});a.Hb=yf;for(e=0;e<a.cf.length;++e)a.cf[e].yb(b);f+=a.cf.length;c&&ag(c,b);c=eg(a,b,d);a.Hb=rf;for(e=0;e<a.zg.length;++e){var g=a.zg[e];
if(c==null||Va(c,gf(g))){g.yb(b);f+=1}}a.Hb=qf;d!=null&&a.Ag.length>0&&a.Ag.sort(function(j,k){j=ya(d,O(j));k=ya(d,O(k));if(j<k)return 1;if(j>k)return-1;return 0});for(e=0;e<a.Ag.length;++e){g=a.Ag[e];if(c==null||Va(c,gf(g))){g.yb(b);f+=1}}a.Ap=f}bg.prototype.getName=da("l");bg.prototype.Am=ba("l");function gg(a,b){a.ba=b}function Ke(a){a.Rk=true}
function of(a,b,c){if(c==null)c=rf;switch(c){case fg:a.Gn=b;break;case rf:a.zg.push(b);break;case yf:a.cf.push(b);break;case dg:break;case qf:a.Ag.push(b);break;case Qe:a.Tj.push(b);break;case Oe:a.Xj.push(b);break}}function Se(a,b){if(a.Ma==null)return null;var c=[];hg(a,a.Ma,b,c);return c}function hg(a,b,c,d){b.k()==c&&d.push(b);for(var e=0;e<b.Z.length;++e)hg(a,b.Z[e],c,d)}function sc(a,b){if(a.Ma==null)return null;var c=[];ig(a,a.Ma,b,c);return c}
function ig(a,b,c,d){J(b,c)!=null&&d.push(b);for(var e=0;e<b.Z.length;++e)ig(a,b.Z[e],c,d)}function jg(a,b){if(a.Ma==null)return null;return kg(a,a.Ma,b)}function kg(a,b,c){if(b.l==c)return b;for(var d=0;d<b.Z.length;++d){var e=kg(a,b.Z[d],c);if(e)return e}return null}function Sb(a,b){if(a.Ma==null)return null;return Uf(a,a.Ma,b)}function Uf(a,b,c){if(b.Ha==c)return b;for(var d=0;d<b.Z.length;++d){var e=Uf(a,b.Z[d],c);if(e)return e}return null}
function rg(a,b){if(b!=null){for(var c=0;c<a.Nc.length;++c)if(a.Nc[c]===b)return;a.Nc.push(b)}}
function Ye(a,b,c){var d=Se(a,"mesh");if(d==null)return null;var e=null;if(c){c.clear();e=c}else e=new sg;for(c=0;c<d.length;++c){var f=d[c];if(f&&f.Bc){var g=null;if(f.cb)g=f.cb;else{var j=g=null;if(f.ub&&f.ub.k()=="terrain"){g=hd;j=id}g=f.O&&nd(f.O)>100?new tg(f.O,f,64,g,j):new ug(f.O,f,g,j)}if(b&&f.cb==null)f.cb=g;Zc(e,g)}}d=Se(a,"animatedmesh");for(c=0;c<d.length;++c)if((a=d[c])&&a.Ia&&!a.Ia.Ed&&a.Ia.ii&&!a.Ia.ii.M.D(a.Ia.ii.C)){g=a.cb?a.cb:new vg(a.Ia.ii,a);if(b&&a.cb==null)a.cb=g;Zc(e,g)}return e}
function Wc(a,b,c){var d={};d.Ie=b;d.Pq=c+r();a.qh.push(d)}function wg(a,b,c,d,e){if(b&&b.X&&(b.k()=="2doverlay"||b.k()=="mobile2dinput"))if(!e||e&&b.ho()){var f=Hf(b,true,a.Eh);if(f.x<=c&&f.y<=d&&f.x+f.Ua>=c&&f.y+f.Sa>=d)return b}for(f=0;f<b.Z.length;++f){var g=wg(a,b.Z[f],c,d,e);if(g)return g}return null}function Yc(a){for(var b=0;b<1E3;++b){var c=Math.round(Math.random()*1E4+10);if(Sb(a,c)==null)return c}return-1}
bg.prototype.Ji=function(a,b){if(a&&b){for(var c=0;c<a.Z.length&&c<b.Z.length;++c){var d=a.Z[c],e=b.Z[c];d&&e&&d.k()==e.k()&&b.Ji(d,e)}return-1}};var fg=1,rf=0,yf=2,dg=3,qf=4,Qe=5,Oe=6;function xg(){this.gb()}xg.prototype=new bg;xg.prototype.rk=l("panorama");function yg(){this.gb();this.Mk=new t;this.kj=new t}yg.prototype=new bg;yg.prototype.rk=l("free");function Ie(){this.a=this.la=null;this.Qk="";this.Db=0;this.aa=this.fb=null;this.Uj="";this.Ln=this.Ae=null;this.fn=false;this.jp=function(a){var b="";a=new Uint8Array(a);for(var c=0;c<a.byteLength;c++)b+=String.fromCharCode(a[c]);return b};this.qq=function(a,b,c,d,e){this.Qk=b;this.fb=c;this.aa=e;this.Ae=d;if(this.fb!=null)Z().fb=c;if(a!=null&&b.indexOf(".ccbz")!=-1)a=this.jp(a);if(a==null||a.length==0){la(o.na,"Error: Could not load file '"+b+"'");a=navigator.appVersion;a!=null&&a.indexOf("Chrome")!=
-1&&la(o.na,"<i>For using local files with Chrome, add the parameter '--allow-file-access-from-files' when starting the browser.<br/>Or use Firefox instead. Or run it from a web server. Or from CopperCube.</i>",true);return null}if(b.indexOf(".ccbz")!=-1)a=JSInflate.pq(a);else if(b.indexOf(".ccbjs")!=-1)a=o.aq(a);this.la=b=new le;this.Vo();this.a=new Ad(a);if(!this.vm())return null;this.Ln=a;return b};this.Vo=function(){var a=this.Qk,b=a.lastIndexOf("/");if(b!=-1)a=a.substring(0,b+1);this.Uj=a};this.vm=
function(){if(S(this.a)!=1701014630)return false;S(this.a);Ed(this.a,4);for(var a=0;Bd(this.a)>0;){var b=this.pb();++a;if(a==1&&b!=1)return false;switch(b){case 1:this.vq();break;case 12:this.wq();break;default:this.ya()}}return true};this.ya=function(){this.a.Oa=0+this.Db};this.pb=function(){var a=0;a=Ed(this.a,2);var b=0;this.gj=b=Ed(this.a,4);this.Db=this.a.Oa+b;return a};this.tn=function(){var a=new D(false);this.Gp(a);return a};this.Gp=function(a){for(var b=0;b<16;++b)rb(a,b,W(this.a))};this.Ip=
function(){var a=new Ab;a.za=W(this.a);a.c=W(this.a);a.b=W(this.a);a.d=W(this.a);return a};this.Oo=function(a){for(var b=0,c=[],d=[0,12416,925824,63447168,4194836608,2181570688],e=[],f=0;f<a;++f)e.push(Ed(this.a,1));for(;b<a;){f=0;var g=this.Qq[e[b]];if(b+g>=a)return c.join("");for(var j=g;j>=0;--j){f+=e[b];++b;if(j!=0)f<<=6}if(b>a)break;f-=d[g];if(f<1114111)c.push(this.eq(f));else return c.join("")}return c.join("")};this.R=function(){var a=Ed(this.a,4);if(a>104857600)return"";if(a<=0)return"";return this.Oo(a)};
this.Qq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,
3,3,4,4,4,4,5,5,5,5];this.eq=function(a){if(a>65535){a-=65536;return String.fromCharCode(55296+(a>>10),56320+(a&1023))}else return String.fromCharCode(a)};this.vq=function(){for(var a=this.Db;Bd(this.a)>0&&this.a.Oa<a;)switch(this.pb()){case 1004:this.la.nh=S(this.a);break;case 20:this.Iq();break;case 2:var b=null;switch(S(this.a)){case 0:b=new yg;this.Mo(b);break;case 1:b=new xg;this.No(b);break;default:this.ya()}this.la.am(b);break;default:this.ya()}};this.ym=function(a,b,c,d,e,f,g){this.Qk=d;this.fb=
e;this.aa=g;this.Ae=f;this.a=new Ad(a);this.Vo();S(this.a);S(this.a);Ed(this.a,4);a=-1;d=this.pb();if(d!=1)return null;for(b=this.Db;Bd(this.a)>0&&this.a.Oa<b;){d=this.pb();switch(d){case 2:d=S(this.a);++a;if(a==c){c=null;switch(d){case 0:c=new yg;this.Mo(c);break;case 1:c=new xg;this.No(c);break;default:this.ya()}return c}else this.ya();default:this.ya()}}return null};this.Iq=function(){S(this.a);this.la.ip=this.R();for(var a=this.Db;Bd(this.a)>0&&this.a.Oa<a;)switch(this.pb()){case 35:S(this.a);
S(this.a);S(this.a);S(this.a);var b=S(this.a);if((b&1)!=0)this.la.Sn=true;this.ya();break;case 37:b=S(this.a);S(this.a);if((b&1)!=0)if(o.na==null)o.na=new ea(elementIdOfCanvas,showFPSCounter);else ga(o.na);if((b&2)!=0){S(this.a);this.R()}break;default:this.ya()}};this.Mo=function(a){var b=this.Db;for(this.Jq(a);Bd(this.a)>0&&this.a.Oa<b;)switch(this.pb()){case 1007:a.Mk=this.Q();a.kj=this.Q();break;case 8:this.Jp(a);break;case 1008:a.Dd=W(this.a);break;case 1009:a.Cd=R(this.a);a.wh=W(this.a);a.Vb=
S(this.a);break;case 1010:R(this.a);a.ui=W(this.a);a.vi=W(this.a);break;default:this.ya()}};this.No=function(){this.ya()};this.Q=function(){var a=new t;a.c=W(this.a);a.b=W(this.a);a.d=W(this.a);return a};this.Al=function(){var a=new oa;a.pc=W(this.a);a.kc=W(this.a);a.gc=W(this.a);a.Pf=W(this.a);return a};this.hr=function(){var a=W(this.a),b=W(this.a),c=W(this.a),d=W(this.a);if(a>1)a=1;if(b>1)b=1;if(c>1)c=1;if(d>1)d=1;return o.If(d*255,a*255,b*255,c*255)};this.Zh=function(){var a=new Oa;a.c=W(this.a);
a.b=W(this.a);return a};this.qc=function(){var a=new z;a.C=this.Q();a.M=this.Q();return a};this.Jq=function(a){if(this.pb()==26){a.l=this.R();a.ih=S(this.a)}else this.tp()};this.tp=function(){this.a.position-=10};this.Jp=function(a){for(var b=this.Db;Bd(this.a)>0&&this.a.Oa<b;)switch(this.pb()){case 9:this.vn(a,a.Ma,0);break;default:this.ya()}};this.vn=function(a,b,c){if(b!=null){var d=this.Db,e=S(this.a),f=S(this.a),g=this.R(),j=this.Q(),k=this.Q(),n=this.Q(),p=R(this.a),q=S(this.a),h=null,w=0;if(c==
0){b.X=p;b.l=g;b.kb=q}for(;Bd(this.a)>0&&this.a.Oa<d;)switch(this.pb()){case 9:this.vn(a,h?h:b,c+1);break;case 10:switch(e){case 2037085030:h=new sf;h.i=e;h.f=j;h.S=k;h.ma=n;h.X=p;h.l=g;h.kb=q;h.Ha=f;h.r=a;this.wm(h);vc(b,h);h=h;P(h);break;case 1752395110:h=new pf;h.i=e;h.f=j;h.S=k;h.ma=n;h.X=p;h.l=g;h.kb=q;h.Ha=f;h.r=a;this.wm(h);vc(b,h);h=h;P(h);break;case 1835950438:h=new Lf;h.i=e;h.f=j;h.S=k;h.ma=n;h.X=p;h.l=g;h.kb=q;h.Ha=f;h.r=a;this.Aq(h);vc(b,h);h=h;P(h);break;case 1953526632:h=new Vf(this.aa,
null);h.i=e;h.f=j;h.S=k;h.ma=n;h.X=p;h.l=g;h.kb=q;h.Ha=f;h.r=a;this.Dq(h);vc(b,h);h=h;P(h);break;case 1819042406:h=new tf;h.i=e;h.f=j;h.S=k;h.ma=n;h.X=p;h.l=g;h.kb=q;h.Ha=f;h.r=a;this.Bq(h);vc(b,h);h=h;P(h);break;case 1835098982:h=new Ue;h.i=e;h.f=j;h.S=k;h.ma=n;h.X=p;h.l=g;h.kb=q;h.r=a;h.Ha=f;this.Cq(h);vc(b,h);h=h;P(h);break;case 1751608422:h=new xf;h.i=e;h.f=j;h.S=k;h.ma=n;h.X=p;h.l=g;h.kb=q;h.Ha=f;h.r=a;this.Eq(h);vc(b,h);h=h;P(h);break;case 1935946598:h=new Df;h.i=e;h.f=j;h.S=k;h.ma=n;h.X=p;
h.l=g;h.kb=q;h.Ha=f;h.r=a;this.zq(h);vc(b,h);h=h;P(h);break;case 1752461414:h=new zf;h.i=e;h.f=j;h.S=k;h.ma=n;h.X=p;h.l=g;h.kb=q;h.Ha=f;h.r=a;this.Fq(h);vc(b,h);h=h;P(h);break;case 1954112614:h=new Wf;h.i=e;h.f=j;h.S=k;h.ma=n;h.X=p;h.l=g;h.kb=q;h.Ha=f;h.r=a;h.g=this.qc();for(var u=0;u<16;++u)rb(h.qg,u,W(this.a));vc(b,h);h=h;P(h);break;case 1868837478:h=new Gf(this.aa);h.i=e;h.f=j;h.S=k;h.ma=n;h.X=p;h.l=g;h.kb=q;h.Ha=f;h.r=a;this.yq(h);vc(b,h);h=h;P(h);break;case 1668575334:h=new uf;h.i=e;h.f=j;h.S=
k;h.ma=n;h.X=p;h.l=g;h.kb=q;h.Ha=f;h.r=a;this.Hq(h);vc(b,h);h=h;P(h);break;case 1835283046:h=new Jf(this.aa,a);h.i=e;h.f=j;h.S=k;h.ma=n;h.X=p;h.l=g;h.kb=q;h.Ha=f;h.r=a;this.xq(h);vc(b,h);h=h;P(h);break;case 1920103526:h=new Xf;h.i=e;h.f=j;h.S=k;h.ma=n;h.X=p;h.l=g;h.kb=q;h.Ha=f;h.r=a;h.g=this.qc();vc(b,h);h=h;P(h);this.ya();break;case 1920235366:h=new Yf;h.i=e;h.f=j;h.S=k;h.ma=n;h.X=p;h.l=g;h.kb=q;h.Ha=f;h.r=a;this.Lq(h);vc(b,h);h=h;P(h);break;default:if(c==0)a.Rb=this.Al();this.ya();break}break;case 11:u=
this.sn();h&&h.uc(w)&&h.uc(w).Bk(u);++w;break;case 25:u=h;if(u==null&&c==0)u=a.Ma;this.Fp(u,a);break;default:this.ya()}h&&h.Ho()}};this.wm=function(a){var b=this.Db;a.g=this.qc();R(this.a);R(this.a);a.Bc=R(this.a);for(R(this.a);Bd(this.a)>0&&this.a.Oa<b;)switch(this.pb()){case 14:var c=this.Hp();a.O=c;break;default:this.ya()}};this.Hp=function(){var a=new md;a.g=this.qc();for(var b=this.Db;Bd(this.a)>0&&this.a.Oa<b;)switch(this.pb()){case 15:var c=this.un();c!=null&&a.vd(c);break;default:this.ya()}return a};
this.un=function(){var a=new kd;a.g=this.qc();for(var b=this.Db;Bd(this.a)>0&&this.a.Oa<b;)switch(this.pb()){case 11:a.N=this.sn();break;case 16:for(var c=Math.floor(this.gj/2),d=0;d<c;++d)a.fa.push(Ed(this.a,2));break;case 17:c=Math.floor(this.gj/36);for(d=0;d<c;++d){var e=new Nb;e.f=this.Q();e.j=this.Q();e.oa=S(this.a);e.Ba=this.Zh();e.Eg=new Oa;a.m.push(e)}break;case 18:c=Math.floor(this.gj/44);for(d=0;d<c;++d){e=new Nb;e.f=this.Q();e.j=this.Q();e.oa=S(this.a);e.Ba=this.Zh();e.Eg=this.Zh();a.m.push(e)}break;
case 19:c=this.gj/60;a.Rd=[];a.yd=[];for(d=0;d<c;++d){e=new Nb;e.f=this.Q();e.j=this.Q();e.oa=S(this.a);e.Ba=this.Zh();e.Eg=new Oa;a.Rd.push(this.Q());a.yd.push(this.Q());a.m.push(e)}break;default:this.ya()}return a};this.sn=function(){var a=new dd;a.i=S(this.a);S(this.a);S(this.a);S(this.a);S(this.a);W(this.a);S(this.a);S(this.a);R(this.a);R(this.a);a.Dc=R(this.a);a.Gf=R(this.a);Dd(this.a,1);a.fe=R(this.a);R(this.a);R(this.a);R(this.a);for(var b=0;b<4;++b){var c=this.md();switch(b){case 0:a.db=c;
break;case 1:a.rc=c;break}R(this.a);R(this.a);R(this.a);if(Ed(this.a,2)!=0)switch(b){case 0:a.Tb=true;break;case 1:break}}return a};this.Bl=function(){return this.R()};this.Cl=function(){var a=this.Uj+this.Bl();return ee(o.Vd,a,true)};this.md=function(){var a=this.Bl(),b=this.Uj+a;if(this.fb!=null&&a!="")return vd(this.fb,b,true);return null};this.Dq=function(a){var b=this.Db;a.g=this.qc();a.Yp=S(this.a);for(a.rp=S(this.a);Bd(this.a)>0&&this.a.Oa<b;)switch(this.pb()){case 3:this.Gq(a);break;default:this.ya()}};
this.Gq=function(a){var b=this.Db;a.caption=this.R();a.Hg=this.md();this.Zh();S(this.a);a.or=this.R();for(a.wr=R(this.a);Bd(this.a)>0&&this.a.Oa<b;)switch(this.pb()){case 6:a.lr=true;a.qr=this.R();break;case 4:a.mr=true;a.sk=this.R();break;case 5:a.nr=true;a.xr=this.R();a.yr=this.R();break;default:this.ya()}};this.Cq=function(a){a.g=this.qc();a.ga=this.Q();a.vb=this.Q();a.jd=W(this.a);a.Ic=W(this.a);a.Mg=W(this.a);a.Lg=W(this.a);a.Km=R(this.a);lf(a)};this.Lq=function(a){S(this.a);a.Um=S(this.a);a.lk.c=
W(this.a);a.lk.b=W(this.a);a.Xn=W(this.a);a.Wn=W(this.a);a.ti=S(this.a);a.Qm=R(this.a);a.Qn=S(this.a);this.wm(a)};this.Eq=function(a){a.g=this.qc();if(S(this.a)==2)a.Za.Ah=true;a.Za.oa=this.Al();this.Al();R(this.a);a.Za.Ga=this.Q();var b=W(this.a);a.Za.Ea=b;if(b!=0)a.Za.hh=1/b};this.Bq=function(a){a.Ec.g=this.qc();a.g=a.Ec.g;a.gi=W(this.a);a.Cg=W(this.a);var b=Dd(this.a,1);a.Ch=(b&2)!=0};this.zq=function(a){a.g=this.qc();a.Nb=this.Cl();a.pe=W(this.a);a.Ih=W(this.a);a.mn=S(this.a);a.op=R(this.a);a.hn=
S(this.a);a.gl=S(this.a);a.Kg=W(this.a);a.og=R(this.a);S(this.a)};this.Fq=function(a){a.g=this.qc();a.Jg=W(this.a);a.Ze=R(this.a);S(this.a);for(var b=S(this.a),c=0;c<b;++c)a.Eb.push(this.Q())};this.Hq=function(a){a.Ga=this.Q();a.ld=S(this.a);a.Ub=this.Q();a.df=S(this.a);a.Jh=S(this.a);a.Kh=S(this.a);a.gg=S(this.a);a.Gj=S(this.a);a.Jj=S(this.a);a.Hj=S(this.a);a.hg=W(this.a);a.ig=W(this.a);a.eg=W(this.a);a.Lh=W(this.a);var b=S(this.a);if(b&1){a.uh=true;a.vh=S(this.a);a.qj=S(this.a)}else a.uh=false;
if(b&2){a.Yf=true;a.uj=S(this.a);a.Dd=this.Q()}else a.Yf=false;if(b&4){a.sg=true;a.ak=W(this.a);a.bk=W(this.a)}else a.sg=false};this.xq=function(a){S(this.a);a.Nd=R(this.a);if(a.Nd){a.ff=S(this.a);a.gf=S(this.a);a.vf=S(this.a);a.uf=S(this.a)}else{a.hf=W(this.a);a.jf=W(this.a);a.xf=W(this.a);a.wf=W(this.a)}a.Bg=R(this.a);a.Jc=S(this.a);a.Fa=this.md();a.ze=this.md();a.rg=R(this.a);a.Vf=this.md();a.wj=S(this.a);if(a.wj==1)a.Lc=S(this.a)};this.yq=function(a){if(S(this.a)&1)a.Ik=true;a.Nd=R(this.a);if(a.Nd){a.ff=
S(this.a);a.gf=S(this.a);a.vf=S(this.a);a.uf=S(this.a)}else{a.hf=W(this.a);a.jf=W(this.a);a.xf=W(this.a);a.wf=W(this.a)}a.Bg=R(this.a);a.Jc=S(this.a);a.Fa=this.md();a.ze=this.md();a.rg=R(this.a);a.We=R(this.a);a.Fg=Dd(this.a,1);a.eb=this.R();a.hd=this.R();a.zf=S(this.a);a.eh=R(this.a);a.rl=R(this.a);a.vj=S(this.a);a.Rh=R(this.a);a.zh=S(this.a);a.Qh=R(this.a)};this.Fp=function(a,b){if(a){var c=null;switch(S(this.a)){case 100:b=new ac;b.we=this.Q();c=b;break;case 101:b=new Xb;b.$=this.Q();b.P=this.Q();
b.pd=S(this.a);b.Yb=R(this.a);Yb(b);c=b;break;case 102:b=new zg;b.kh=this.Q();b.Ga=this.Q();b.Ea=W(this.a);b.hi=W(this.a);b.gb();c=b;break;case 103:b=new Ag;b.Ea=this.Q();W(this.a);b.Wi=!o.D(W(this.a),0);W(this.a);b.Cf=this.Q();c=S(this.a);S(this.a);S(this.a);if(c&1)b.jk=true;b.Gb=W(this.a);c=b;break;case 104:b=new We(a,this.aa);b.fg=W(this.a);b.Kb=W(this.a);b.ac=W(this.a);b.me=W(this.a);b.se=R(this.a);c=S(this.a);if(c&1){b.yk=false;b.Sg=true}else{b.yk=true;b.Sg=false}if(c&2)b.Nj=S(this.a);if(a){b.Zo=
o.Ii(a.jd);b.tm=b.Zo+10;b.Yq=(b.tm-b.Do)/50}c=b;break;case 105:b=new Bg(a,this.aa);b.Ea=W(this.a);b.ac=W(this.a);b.se=R(this.a);c=S(this.a);if(c&2){b.Hn=true;b.Gb=W(this.a)}if(c&4){b.Lm=true;b.re=W(this.a);b.oe=W(this.a);b.wi=W(this.a)}c=b;break;case 106:var d=new Cg(b);d.pi=S(this.a);d.Fj=R(this.a);d.Th=this.R();d.Qj=R(this.a);d.Qe=this.Q();d.Xf=Dd(this.a,1);d.jh=this.R();c=S(this.a);if(c&1)d.ni=S(this.a);if(d.Xf==3||d.Xf==4)d.o=this.jb(b);c=d;break;case 107:c=new zc(b,this.aa);c.Ue=R(this.a);c.zc=
R(this.a);S(this.a);c.o=this.jb(b);c=c;break;case 108:d=new Dg(b);d.sh=S(this.a);d.Vj=S(this.a);d.Yh=W(this.a);d.yg=S(this.a);c=S(this.a);if(c&1){d.Mm=1;d.zl=this.Q()}d.o=this.jb(b);c=d;break;case 109:b=new Eg;b.od=S(this.a);b.Bf=S(this.a);b.Gg=S(this.a);b.Yb=R(this.a);c=S(this.a);b.Wa=[];for(d=0;d<c;++d)b.Wa.push(this.md());c=b;break;case 110:c=new Fg(b,this.aa);c.Ue=R(this.a);c.zc=R(this.a);S(this.a);c.de=this.jb(b);c.be=this.jb(b);c=c;break;case 111:c=new Gg(b);c.Ig=S(this.a);S(this.a);c.o=this.jb(b);
c=c;break;case 112:c=new Hg(b,this.aa);c.cg=S(this.a);c.Lc=S(this.a);c.cr=R(this.a);S(this.a);c.o=this.jb(b);c=c;break;case 113:d=new Ig(b);d.cd=S(this.a);d.Jd=W(this.a);d.ah=W(this.a);d.Sf=R(this.a);d.Wb=S(this.a);d.gk=this.R();d.gh=this.R();d.Uh=W(this.a);d.ci=S(this.a);d.zb=this.Q();d.Qd=this.R();d.Ud=this.R();d.mj=this.R();d.Yi=this.R();if(d.cd==3)d.Sh=S(this.a);c=S(this.a);if(c&1)d.ng=S(this.a);else{d.ng=1E4;if(d.Jd!=0)d.ng=d.Uh/(d.Jd/1E3)}d.dd=this.jb(b);d.$d=this.jb(b);d.ce=this.jb(b);d.ae=
this.jb(b);c=d;break;case 114:b=new Jg;b.di=S(this.a);b.zb=this.Q();b.sj=S(this.a);b.ke=W(this.a);b.hk=W(this.a);c=S(this.a);b.zc=c&1?true:false;c=b;break;case 115:b=new Kg(b,this.aa);S(this.a);b.$j=W(this.a);b.Kb=W(this.a);b.ac=W(this.a);b.me=W(this.a);b.zb=this.Q();b.Qd=this.R();b.Ud=this.R();b.zj=this.R();b.Zj=this.R();c=S(this.a);if(c&1)b.oj=true;if(c&2){b.qi=true;b.Ti=W(this.a);b.Wf=W(this.a)}if(c&4)b.vl=true;c=b;break;case 116:c=new Lg(b);c.hp=R(this.a);S(this.a);c.o=this.jb(b);c=c;break;case 117:c=
new o.Re(b);c.Xb=this.R();S(this.a);this.rn(c.oc,b);c=c;break;default:this.ya();return}c&&Zb(a,c)}else this.ya()};this.rn=function(a,b){for(var c=S(this.a),d=0;d<c;++d){var e=new Mg;e.i=S(this.a);e.l=this.R();switch(e.i){case 1:e.jc=W(this.a);break;case 2:e.Sc=this.R();break;case 6:e.Ef=this.Q();break;case 7:e.li=this.md();break;case 9:e.$g=this.jb(b);break;case 0:case 4:case 5:case 8:case 3:default:e.lc=S(this.a);break}a.push(e)}};this.jb=function(a){if(S(this.a)){var b=new Rc(a);this.Dp(b,a);return b}return null};
this.Dp=function(a,b){var c=this.pb();if(c!=29)this.ya();else for(var d=this.Db;Bd(this.a)>0&&this.a.Oa<d;){c=this.pb();if(c==30)(c=this.Cp(S(this.a),b))&&Sc(a,c);else this.ya()}};this.wq=function(){for(var a=this.Db;Bd(this.a)>0&&this.a.Oa<a;)switch(this.pb()){case 13:var b=S(this.a),c=this.R(),d=S(this.a);if(b&4){if(b=od(this.Ae,c))b.sa.length>0||b.$a.length>0?this.ya():this.Kq(b,d)}else if(b&8){b=null;try{b=this.Oo(d)}catch(e){la(o.na,"error reading script: "+e)}if(b!=null){d=Z();Ng(d,b)}}this.ya();
break;default:this.ya()}};this.Aq=function(a){a.g=this.qc();R(this.a);S(this.a);var b=S(this.a),c=S(this.a);a.Bb=W(this.a);Dd(this.a,1);a.Zb=R(this.a);var d=S(this.a);if(d==0){a.fd=250;a.ee=true}else if(d&1){a.fd=S(this.a);a.ee=a.fd>0}a.Uo(this.Ep(a));a.Ta=b;a.tb=c;if(d&2){b=S(this.a);for(c=0;c<b;++c){d=new o.An;d.Pj=S(this.a);d.ag=S(this.a);a.Ab.push(d)}}};this.Ep=function(a){var b=this.Bl(),c=od(this.Ae,b);if(c==null){c=new o.Ol;c.l=b;c!=null&&this.Ae.fl.push(c);c=c}if(a!=null&&c!=null){if(c.wd==
null)c.wd=[];c.wd.push(a)}return c};this.Kq=function(a,b){if(a!=null){var c=S(this.a);a.Nk=W(this.a);if(c&1)a.ii=this.qc();c=this.Db;b=this.a.Oa+b;for(var d=[],e=0;Bd(this.a)>0&&this.a.Oa<c&&this.a.Oa<b;){var f=this.pb();if(f==33){f=new o.Lp;f.l=this.R();f.Hh=this.tn();f.yh=this.tn();a.sa.push(f);e=S(this.a);d.push(f);e>=0&&e<d.length&&d[e].Z.push(f);e=S(this.a);for(var g=0;g<e;++g)f.fh.push(S(this.a));g=S(this.a);for(e=0;e<g;++e){var j=new o.Mp;j.frame=W(this.a);j.position=this.Q();f.kf.push(j)}g=
S(this.a);for(e=0;e<g;++e){j=new o.Op;j.frame=W(this.a);j.scale=this.Q();f.xe.push(j)}g=S(this.a);for(e=0;e<g;++e){j=new o.Np;j.frame=W(this.a);j.rotation=this.Ip();f.of.push(j)}g=S(this.a);for(e=0;e<g;++e){j=new o.Pp;j.xi=Ed(this.a,2);j.Ri=S(this.a);j.Oi=W(this.a);f.Ff.push(j)}}else if(f==15){f=this.un();f!=null&&a.vd(f)}else if(f==34){f=new o.Oh;f.l=this.R();f.xd=W(this.a);f.P=W(this.a);f.Cc=W(this.a);a.jl.push(f)}else this.ya()}try{a.Yk=-1;a.vp=-1;b=c=0;var k,n;for(d=0;d<a.sa.length;++d){f=false;
for(c=0;c<a.sa.length;++c){n=a.sa[c];for(e=0;e<n.Z.length;++e)if(n.Z[e]===a.sa[d])f=true}f||a.nf.push(a.sa[d])}for(c=0;c<a.$a.length;++c){d=[];a.kk.push(d);k=a.$a[c];var p=k.m.length;for(f=0;f<p;++f)d.push(false)}a.Ed=false;d=p=0;var q,h;for(p=0;p<a.sa.length;++p){h=a.sa[p];if(h.kf.length||h.xe.length||h.of.length||h.Ff.length){a.Ed=true;break}}if(a.Ed)for(p=a.ed=0;p<a.sa.length;++p){h=a.sa[p];if(h.kf.length){var w=h.kf[h.kf.length-1];if(w.frame>a.ed)a.ed=w.frame}if(h.xe.length){var u=h.xe[h.xe.length-
1];if(u.frame>a.ed)a.ed=u.frame}if(h.of.length){var K=h.of[h.of.length-1];if(K.frame>a.ed)a.ed=K.frame}}if(a.Ed&&!a.on){a.on=true;for(p=0;p<a.sa.length;++p){h=a.sa[p];for(d=0;d<h.Ff.length;++d){var C=h.Ff[d],v=C.Ri;q=a.$a[C.xi];var G=q.m[v];C.Kn=G.f.e();C.Jn=G.j.e()}}}pd(a,null,null);for(c=0;c<a.sa.length;++c){n=a.sa[c];for(b=0;b<n.fh.length;++b){k=a.$a[n.fh[b]];k.Ce=n.Xe.e()}}if(a.$a.length==0){a.rb.C.set(0,0,0);a.rb.M.set(0,0,0)}else{k=a.$a[0];a.rb.C=k.g.C.e();a.rb.M=k.g.M.e();for(c=1;c<a.$a.length;++c){k=
a.$a[c];if(k.Ce==null){A(a.rb,k.g.C);A(a.rb,k.g.M)}else{var H=k.g.e();zb(k.Ce,H);A(a.rb,H.C);A(a.rb,H.M)}}}}catch(M){la(o.na,"error finalizing skinned mesh: "+M)}if(a.wd&&a.wd.length){for(e=0;e<a.wd.length;++e)(k=a.wd[e])&&Mf(k,k.Ta,k.tb);a.wd=null}}};this.Cp=function(a,b){var c=0;switch(a){case 0:c=new Vb;c.xj=S(this.a);c.qf=S(this.a);c.ca=R(this.a);S(this.a);return c;case 1:b=new Wb;b.te=S(this.a);b.Pc=S(this.a);b.ca=R(this.a);b.ha=this.Q();if(b.te==4)b.Xi=this.Q();b.mf=R(this.a);b.Oc=S(this.a);
c=S(this.a);if(c&1){b.Sd=true;b.Tc=S(this.a)}return b;case 2:b=new $b;b.Hl=S(this.a);b.ug=S(this.a);b.ca=R(this.a);b.ha=this.Q();b.Yj=false;c=S(this.a);if(c&1){b.Yj=true;b.Wl=S(this.a)}return b;case 3:c=new bc;c.Jl=S(this.a);c.vg=S(this.a);c.ca=R(this.a);c.ha=this.Q();S(this.a);return c;case 4:c=new fc;c.od=S(this.a);c.bc=S(this.a);c.ca=R(this.a);c.Hg=this.md();if(c.od==1)c.Tk=S(this.a);S(this.a);return c;case 5:b=new Jc;c=S(this.a);b.ef=(c&1)!=0;b.Nb=this.Cl();b.pe=W(this.a);b.Ih=W(this.a);b.Kg=
W(this.a);b.og=R(this.a);b.Qc=S(this.a);b.pg=R(this.a);b.wl=this.Q();return b;case 6:c=new Nc;c.In=S(this.a);return c;case 7:c=new gc;S(this.a);c.Wk=this.R();return c;case 8:c=new hc;S(this.a);c.Zl=this.R();c.ga=this.R();return c;case 9:c=new ic;c.tg=S(this.a);c.ca=R(this.a);c.Yb=R(this.a);c.Gk=this.R();S(this.a);return c;case 10:c=new kc(this.aa);c.pf=this.R();S(this.a);return c;case 11:c=new mc(this.aa);c.Rf=S(this.a);S(this.a);return c;case 12:b=new oc;b.te=S(this.a);b.Pc=S(this.a);b.ca=R(this.a);
b.ha=this.Q();b.mf=R(this.a);b.Oc=S(this.a);c=S(this.a);if(c&1){b.Sd=true;b.Tc=S(this.a)}return b;case 13:a=new rc;a.fi=S(this.a);a.ie=S(this.a);a.bj=W(this.a);a.sf=S(this.a);a.Uc=W(this.a);c=S(this.a);if(c&1){a.rf=S(this.a);a.dk=R(this.a);a.bh=this.Q()}if(c&2)a.Zg=this.jb(b);if(c&4)a.ck=this.Q();return a;case 14:this.ya();return null;case 15:c=new Rb;S(this.a);c.bc=S(this.a);c.ca=R(this.a);c.eb=this.R();return c;case 16:c=new Bc;S(this.a);c.Ob=this.R();c.tl=S(this.a);c.Df=S(this.a);c.Td=this.R();
return c;case 17:a=new Hc;c=S(this.a);a.Ob=this.R();a.dj=S(this.a);a.Df=S(this.a);a.Td=this.R();a.o=this.jb(b);if(c&1)a.mi=this.jb(b);return a;case 18:c=new Ic;c.ei=S(this.a);c.ca=R(this.a);S(this.a);return c;case 19:c=new Oc;S(this.a);c.Ob=this.R();c.Dj=R(this.a);return c;case 20:c=new Uc(this.aa);S(this.a);c.pf=this.R();this.fn=true;return c;case 22:c=new Xc;c.wg=S(this.a);c.Jk=R(this.a);S(this.a);c.o=this.jb(b);return c;case 23:c=new Vc;c.xg=S(this.a);c.Ok=R(this.a);c.Sl=S(this.a);S(this.a);return c;
case 24:c=new Og;c.Xb=this.R();S(this.a);this.rn(c.oc,b);return c;case 25:a=new $c(this.aa);c=S(this.a);a.ef=(c&1)!=0;a.cj=S(this.a);a.Xl=this.R();S(this.a);a.Qc=S(this.a);a.pg=R(this.a);a.el=S(this.a);a.Vi=this.jb(b);a.Ui=this.jb(b);return a;case 26:c=new Lc;S(this.a);c.Nb=this.Cl();return c;default:this.ya()}return null}};function Pg(){this.i=-1}m=Pg.prototype;m.k=l("none");m.hb=l(false);m.Yd=aa();m.Nf=aa();m.sd=aa();m.Le=aa();m.Je=l(false);m.Ke=l(false);m.reset=aa();m.Jf=l(null);m.h=l(null);function We(a,b){this.i=-1;this.vc=0;this.se=false;this.Sg=true;this.Di=this.Fe=this.Oe=this.Me=this.He=this.um=this.yk=false;this.Nj=0;this.Rg=new t(0,0,0);this.xm=this.Zd=this.rm=0;this.Do=20;this.tm=100;this.Yq=(this.tm-this.Do)/50;this.Zo=90;this.vc=r();this.Da=a;this.aa=b;this.Hd=this.Gd=-1;this.dl=true;a&&qc(this,a.ga)}We.prototype=new Pg;m=We.prototype;m.k=l("camerafps");m.fg=88;m.Kb=0.06;m.ac=200;m.me=0;m.se=false;m.Ij=true;function Xe(a,b){a.Ij=b}
function qc(a,b){if(a.Da!=null){b=b.substract(a.Da.f);b=Ja(b);a.Zd=b.c;a.xm=b.b;if(a.Zd>a.fg)a.Zd-=360}}m=We.prototype;
m.hb=function(a){if(this.Da==null)return false;if(this.Da.r.ba!==this.Da)return false;var b=r(),c=b-this.vc;if(c==0)return false;if(c>250)c=250;this.vc=b;var d=new t(0,0,0);if(this.Ij&&(this.Oe||this.Fe)){var e=this.Da.f.substract(this.Da.ga);if(this.se)e.b=0;e.normalize();this.Oe&&d.qa(y(e,this.Kb*-c));this.Fe&&d.qa(y(e,this.Kb*c))}if(this.Ij&&(this.He||this.Me)){e=Ha(this.Da.f.substract(this.Da.ga),this.Da.vb);e.normalize();if(this.He){e=y(e,this.Kb*-c);d.qa(e)}if(this.Me){e=y(e,this.Kb*c);d.qa(e)}}if(this.Nj!=
0){e=d.e();if(xa(e)){if(this.rm!=0&&!xa(this.Rg)){e=b-this.rm;if(e>0&&e<this.Nj){e=this.Rg.getLength()*(1-e/this.Nj)*c;var f=this.Rg.e();f.normalize();Ca(f,e*0.5);d.qa(f)}else this.Rg.set(0,0,0)}}else{this.Rg=e;Ca(this.Rg,1/c);this.rm=b}}d.normalize();Ca(d,c*this.Kb);this.Da.f.qa(d);pc(this.Da,this.Da.ga.add(d));d=new t(0,0,1);e=new D;vb(e,new t(this.Zd,this.xm,0));mb(e,d);e=false;if(this.aa!=null)e=this.aa.Gi;var g=0;var j=f=2.0E-5,k=false;if(this.aa!=null&&a.r!=null&&!e){k=a.r;k=k.Ma==null||k.Eh==
null?null:wg(k,k.Ma,this.aa.Ib,this.aa.Jb,true);k=k!=null}if(this.Sg){f*=3;j*=3}if(!k)if(e)g=this.aa.Jb;else if(this.yk){var n=this.aa.T.Pb(),p=this.aa.Jb;if(n>0&&p>0&&this.aa.Nh)g=Math.sin((p-n/2)/n)*100*0.5}else if(this.Sg||this.um)if(this.aa.Mh){n=this.aa.Jb;g=this.Hd==-1?0:n-this.Hd;if(g!=0)this.aa.$k=b;this.Hd=n}else this.Hd=-1;g+=0;c=c;if(c>100)c=100;if(g>300)g=300;if(g<-300)g=-300;this.Zd+=g*c*this.ac*j;if(this.Zd<-this.fg)this.Zd=-this.fg;if(this.Zd>this.fg)this.Zd=this.fg;g=0;if(!k)if(e)g=
this.aa.Ib;else if(this.yk){b=this.aa.T.Qb();j=this.aa.Ib;if(b>0&&j>0&&this.aa.Nh)g=Math.sin((j-b/2)/b)*100*0.5}else if(this.Sg||this.um)if(this.aa.Mh){j=this.aa.Ib;g=this.Gd==-1?0:j-this.Gd;if(g!=0)this.aa.$k=b;this.Gd=j}else this.Gd=-1;g+=0;if(g>300)g=300;if(g<-300)g=-300;this.xm+=g*c*this.ac*f;if(e||this.Sg||this.um)bf(this.aa);if(this.Ij)if(this.Di){if(this.dl)if((a=J(a,"collisionresponse"))&&!a.je){this.dl=false;if(a.Fd==0)a.Fd=this.me*100}}else this.dl=true;pc(this.Da,this.Da.f.add(d));return false};
m.Yd=function(a){Pg.prototype.Yd.call(this,a)};m.Nf=aa();m.sd=function(a){Pg.prototype.sd.call(this,a)};m.Le=function(a){Pg.prototype.Le.call(this,a)};m.Ki=function(a,b){if(b==37||b==65){if(this.He=a)this.Me=false;return true}if(b==39||b==68){if(this.Me=a)this.He=false;return true}if(b==38||b==87){if(this.Oe=a)this.Fe=false;return true}if(b==40||b==83){if(this.Fe=a)this.Oe=false;return true}if(b==32){this.Di=a;return true}return false};m.Je=function(a){return this.Ki(true,a.keyCode)};
m.Ke=function(a){return this.Ki(false,a.keyCode)};function Bg(a,b){this.i=-1;this.ac=1E4;this.Ea=100;this.se=false;this.vc=r();this.Da=a;this.aa=b;this.Hn=false;this.Pd=this.Od=this.Gb=0;this.Lm=false;this.wi=this.oe=this.re=0;this.Fc=90;this.nl=-66666;this.Hd=this.Gd=-1}Bg.prototype=new Pg;m=Bg.prototype;m.k=l("cameramodelviewer");m.ac=0.06;m.Ea=100;m.se=false;
m.hb=function(){if(this.Da==null)return false;if(this.Da.r.ba!==this.Da)return false;var a=r(),b=a-this.vc;if(b>250)b=250;this.vc=a;a=this.Da.f.e();var c=this.Da.ga.e(),d=c.substract(O(this.Da)),e=0,f=0;if(this.aa.Mh){var g=this.aa.Ib,j=this.aa.Jb;e=(this.Gd==-1?0:g-this.Gd)*this.ac/5E4;f=(this.Hd==-1?0:j-this.Hd)*this.ac/5E4;this.Gd=g;this.Hd=j}else this.Hd=this.Gd=-1;if(this.Hn&&this.Gb!=0){if(o.ra(e)){e=this.Od;this.Od*=0.9;if(this.Od>0)this.Od=Math.max(0,this.Od-b/this.Gb);else if(this.Od<0)this.Od=
Math.min(0,this.Od+b/this.Gb)}else this.Od=e*(this.Gb/1E3);if(o.ra(f)){f=this.Pd;this.Pd*=0.9;if(this.Pd>0)this.Pd=Math.max(0,this.Pd-b/this.Gb);else if(this.Pd<0)this.Pd=Math.min(0,this.Pd+b/this.Gb)}else this.Pd=f*(this.Gb/1E3)}d=Ha(d,this.Da.vb);d.b=0;d.normalize();if(!o.ra(e)){Ca(d,b*e);a.qa(d)}if(!this.se&&!o.ra(f)){e=this.Da.vb.e();e.normalize();b=a.add(y(e,b*f));f=b.e();f.b=c.b;e=this.Ea/10;if(f.xb(c)>e)a=b}if(this.se){if(o.D(this.nl,-66666))this.nl=a.b;a.b=this.nl}bf(this.aa);if(this.Lm){b=
o.Ii(this.Da.jd);if(this.Fc<this.re)this.Fc=this.re;if(this.Fc>this.oe)this.Fc=this.oe;f=this.wi;f=Math.abs(this.Fc-b)/8;if(f<this.wi)f=this.wi;if(b<this.oe-f&&b<this.Fc){b+=f;if(b>this.oe)b=this.oe}if(b>this.re+f&&b>this.Fc){b-=f;if(b<this.re)b=this.re}mf(this.Da,o.ko(b))}d=a.substract(c);va(d,this.Ea);a=c.add(d);this.Da.f=a;return false};m.Nf=function(a){this.Fc+=a*this.wi;if(this.Fc<this.re)this.Fc=this.re;if(this.Fc>this.oe)this.Fc=this.oe};function Cg(a){this.pi=5E3;this.Fj=this.Uk=this.Pn=false;this.Qj=true;this.ni=0;this.cl=true;this.Xf=Qg;this.fk=false;this.Id=a;this.Na=0;this.Pn=false;this.Ld=this.Bj=null;this.fk=false;this.Th=null;this.ni=0;this.jh=this.Qe=null;this.cn=0;this.$n=false}Cg.prototype=new Pg;var Qg=0;Cg.prototype.k=l("followpath");
Cg.prototype.h=function(a,b,c,d){a=new Cg;a.pi=this.pi;a.Fj=this.Fj;a.Qj=this.Qj;a.Th=this.Th;a.ni=this.ni;a.Qe=this.Qe?this.Qe.e():null;a.Xf=this.Xf;a.jh=this.jh;a.o=this.o?this.o.h(c,d):null;return a};
Cg.prototype.hb=function(a,b){if(a==null||!this.Id||!this.pi)return false;if(a!==this.Bj){if(this.Bj=a)this.Uk=this.Bj.k()=="camera";return false}if(!this.Ld)if(!this.Pn)if(this.Th.length)if(this.Id){var c=jg(this.Id,this.Th);c&&c.k()=="path"&&Rg(this,c)}if(this.Ld==null)return false;c=false;var d=null;if(this.Uk&&this.Qj){c=!this.cl;d=a;if(this.Id.ba!==d){if(this.Ld.Eb.length)d.f=Af(this.Ld,0);this.cl=true;return false}else this.cl=false;if(!this.Na||!c)this.Na=b}if(!this.Na)this.Na=this.Id.Na;d=
(b-this.Na+this.ni)/this.pi;if(d>1&&!this.Ld.Ze)switch(this.Xf){case Qg:d%=1;break;case 1:d=1;break;case 2:d=1;if(!this.fk){if(this.Id)if(this.jh.length)if((c=jg(this.Id,this.jh))&&c.k()=="camera"){(b=this.Id.Eh)&&Te(c,b.Qb(),b.Pb());this.Id.ba=c}this.fk=true}break;case 3:if(d>this.cn+1&&this.o!=null){this.o.execute(a);this.cn=d}d%=1;break;case 4:d=1;if(!this.$n&&this.o!=null){this.o.execute(a);this.$n=true}break}else this.fk=false;b=Cf(this.Ld,d);c=!b.D(a.f);a.f=b;if(this.Fj&&this.Ld.Eb.length){d=
Cf(this.Ld,d+0.0010);if(!o.ra(d.xb(b))){var e=d.substract(b);va(e,100);if(this.Uk){d=a;a=b.add(e);c=c||!a.D(d.ga);pc(d,a)}else{if(!this.Qe||xa(this.Qe))d=Ja(e);else{d=new D;vb(d,Ja(e));b=new D;vb(b,this.Qe);d=F(d,b);d=wb(d)}c=c||!d.D(a.S);a.S=d}}}return c};function Rg(a,b){a.Ld=b}Cg.prototype.Jf=function(a){if(this.o)return Tc(this.o,a);return null};function Xb(a,b,c,d,e,f){this.$=new t(0,0,0);this.P=new t(40,40,40);this.Na=r();this.pd=3E3;this.Mn=this.dh=this.ph=this.Yb=false;this.Fn=null;this.En=0;this.Qf=this.lj=false;this.th=0;if(a)this.$=a.e();if(b)this.P=b.e();if(c)this.pd=c;if(d)this.Yb=d;Yb(this);if(e)this.ph=e;if(f)this.dh=f}Xb.prototype=new Pg;Xb.prototype.k=l("flystraight");
Xb.prototype.h=function(a,b,c,d){a=new Xb;a.$=this.$.e();a.P=this.P.e();a.ha=this.ha.e();a.Yl=this.Yl;a.Tl=this.Tl;a.pd=this.pd;a.Yb=this.Yb;a.dh=this.dh;a.lj=this.lj;a.Qf=this.Qf?this.Qf.h(c,d):null;a.th=this.th;return a};
Xb.prototype.hb=function(a,b){var c=b-this.Na,d=false;if(c!=0){var e=this.$.e();if(!this.Yb&&c>=this.pd){e=this.P.e();d=true}else e.qa(y(this.ha,c%this.pd*this.Tl));if(this.dh){if(a.k()=="camera"){pc(a,e);var f=J(a,"camerafps");f!=null&&qc(f,e)}}else a.f=e;if(this.Mn&&this.Na!=b){if(a){P(a);b=gf(a);e=false;f=sc(a.r,"gameai");for(var g=0;g<f.length;++g)if(f[g]!==this.Fn){var j=J(f[g],"gameai");if(!(j&&!(j.Wb>0)))if(Va(b,gf(f[g]))){wc(j,this.En,f[g]);e=true;break}}b=e}else b=false;d=b||d}if(d){if(a.r)a.r.Zk=
a.f.e();if(this.Qf){d=true;if(this.th>0&&c>this.th)d=false;d&&this.Qf.execute(a)}this.ph&&jf(a,this);this.lj&&a.r&&Wc(a.r,a,0)}return true}return false};function Yb(a){a.ha=a.P.substract(a.$);a.Yl=a.ha.getLength();a.ha.normalize();a.Tl=a.Yl/a.pd};function zg(a,b,c,d){this.kh=new t;this.Ga=new t(0,1,0);this.ri=new t;this.De=new t;this.Na=r();this.hi=0.01;this.Ea=100;if(a)this.kh=a.e();if(b)this.Ea=b;if(c)this.Ga=c.e();if(d)this.hi=d;this.gb()}zg.prototype=new Pg;zg.prototype.k=l("flycircle");zg.prototype.h=function(){var a=new zg;a.kh=this.kh.e();a.Ga=this.Ga.e();a.ri=this.ri.e();a.De=this.De.e();a.hi=this.hi;a.Ea=this.Ea;return a};
zg.prototype.hb=function(a,b){b=b-this.Na;if(b!=0){b=b*this.hi;b=y(this.ri,Math.cos(b)).add(y(this.De,Math.sin(b)));Ca(b,this.Ea);a.f=this.kh.add(b);return true}return false};zg.prototype.gb=function(){this.Ga.normalize();this.De=this.Ga.b!=0?new t(50,0,0):new t(0,50,0);this.De=Ha(this.De,this.Ga);this.De.normalize();this.ri=Ha(this.De,this.Ga);this.ri.normalize()};function ac(a){this.we=new t;if(a)this.we=a.e();this.Na=r();this.yn=false;this.Gl=0;this.Nm=null}ac.prototype=new Pg;ac.prototype.k=l("rotation");ac.prototype.h=function(){var a=new ac(this.ua,this.Ra);a.we=this.we.e();a.Na=this.Na;return a};
ac.prototype.hb=function(a,b){var c=b-this.Na;if(this.yn){if(this.Gl-this.Na==0)return false;b=(b-this.Na)/(this.Gl-this.Na);if(b>1){a.S=this.we.e();jf(a,this)}else{c=new Ab;var d=y(this.we,o.Bd);Fb(c,d.c,d.b,d.d);var e=new Ab;d=y(this.Nm,o.Bd);Fb(e,d.c,d.b,d.d);Cb(e,e,c,b);d=new t;Eb(e,d);Ca(d,o.ue);a.S=d;return true}}else if(c!=0){a.S.qa(y(this.we,c/10));this.Na=b;return true}return false};function Eg(a,b,c){this.Wa=[];this.Yb=true;this.Bf=20;this.il=this.Gg=this.od=0;if(a)this.Wa=a;if(b)this.Bf=b;if(c==true)this.loop=false}Eg.prototype=new Pg;Eg.prototype.k=l("animatetexture");Eg.prototype.h=function(){var a=new Eg;a.Wa=this.Wa;a.Yb=this.Yb;a.Bf=this.Bf;a.od=this.od;a.Gg=this.Gg;return a};
Eg.prototype.hb=function(a,b){if(a==null||this.Wa==null)return false;var c=false,d=null;if(this.Wa.length){var e=this.il==0?a.r.Na:this.il;d=b-e;var f=e+this.Bf*this.Wa.length;e=0;e=!this.Yb&&b>=f?this.Wa.length-1:this.Bf>0?Math.floor(d/this.Bf%this.Wa.length):0;if(e<this.Wa.length)if(this.od==1){if(this.Gg>=0&&this.Gg<a.$c())if((d=a.uc(this.Gg))&&d.db!==this.Wa[e]){d.db=this.Wa[e];c=true}}else{b=a.$c();for(f=0;f<b;++f)if((d=a.uc(f))&&d.db!==this.Wa[e]){d.db=this.Wa[e];c=true}}}return c};
Eg.prototype.reset=function(){this.il=r()};function zc(a,b,c,d){this.Ra=b;this.Vp=0;this.Kp=false;this.er=null;this.ua=a;this.xh=c;this.af=false;this.Ue=true;this.zc=false;this.Be=this.ia=this.o=null;d!=true&&rg(a,this)}zc.prototype=new Pg;m=zc.prototype;m.k=l("onclick");m.h=function(a,b,c,d){a=new zc(this.ua,this.Ra);a.Ue=this.Ue;a.zc=this.zc;a.o=this.o?this.o.h(c,d):null;a.ia=this.ia;return a};m.hb=function(a){this.Be=a;a=this.af;this.af=false;return a};
m.sd=function(a){var b=this.Be;if(!b)return false;if(b.r!==this.ua)return false;if(r()-this.Ra.$k<250)return false;var c=$e(this.Ra,a);a=af(this.Ra,a);if(this.Ra.Gi){a=this.ua.Eh;if(!a)return false;c=a.Qb()/2;a=a.Pb()/2}if(this.Be.ub==null){this.Be=null;return false}if(kf(b)&&Sg(this,b,c,a)){this.af=true;this.xh&&this.xh();this.xk(b);Ke(this.ua);return true}};m.xk=function(a){this.o&&this.o.execute(a)};
function Sg(a,b,c,d){if(b==null)return false;if(b.k()=="2doverlay"){var e=Hf(b,false,a.Ra.T);if(e.x<=c&&e.y<=d&&e.x+e.Ua>=c&&e.y+e.Sa>=d)return true}c=cf(a.Ra,c,d);if(c==null)return false;d=a.ua.ba;if(d==null)return false;d=O(d);e=new Ma;e.$=d;e.P=c;return Ac(a,a.ua,b,e,a.Ue,a.zc,a.ia,null)}function xc(a,b,c,d,e,f){if(!e||!b)return 999999999999;if(a=e.Ng(c,d,true,null,f))return c.xb(a);return 999999999999}
function Ac(a,b,c,d,e,f,g,j){var k=c.ob(),n=0;n=new D(false);if(ob(c.Y,n))if(Ua(k,lb(n,d.$),lb(n,d.P))){n=null;if(c.nq&&c.O)n=c;e=n==null||e;if(!e){k=n.cb;if(k==null){k=n.O&&nd(n.O)>100?new tg(n.O,n,0):new ug(n.O,n);n.cb=k}if(k){k=k.Ng(d.$,d.P,true,null,true);if(k!=null)if(f){n=xc(a,b,d.$,k,g,true);a=k.xb(d.$);if(n+o.Tp<a)return false;else{if(j!=null)j.Ja=k.xb(d.$);return true}}else{if(j!=null)j.Ja=d.$.xb(Pa(gf(c)));return true}}else e=true}if(e)if(f){d=d.$.e();k=gf(c);n=Qa(k);Ca(n,0.5);f=o.uq(n.c,
n.b,n.d);f=Math.sqrt(f*f+f*f);c=Pa(gf(c));n=xc(a,b,d,c,g,true);a=c.xb(d)-f;if(n<a)return false;else{if(j!=null)j.Ja=a;return true}}else{if(j!=null)j.Ja=d.$.xb(Pa(gf(c)));return true}}return false}zc.prototype.Jf=function(a){if(this.o)return Tc(this.o,a);return null};function Fg(a,b){this.Ra=b;this.ua=a;this.de=this.be=null;this.cm=this.Ul=0}Fg.prototype=new zc(null,null,null,true);Fg.prototype.k=l("onmove");Fg.prototype.h=function(a,b,c,d){a=new Fg(this.ua,this.Ra);a.Ue=this.Ue;a.zc=this.zc;a.o=this.o?this.o.h(c,d):null;a.ia=this.ia;a.be=this.be?this.be.h(c,d):null;a.de=this.de?this.de.h(c,d):null;return a};
Fg.prototype.hb=function(a){var b=this.Ul==0,c=r();if(b||c-this.Ul>100){this.Ul=c;c=Sg(this,a,this.Ra.Ib,this.Ra.Jb);if(b)this.cm=c;else if(c!=this.cm){if((this.cm=c)&&this.be)this.be.execute(a);else!c&&this.de&&this.de.execute(a);return true}}return false};Fg.prototype.Jf=function(a){var b=null;if(this.de)if(b=Tc(this.de,a))return b;if(this.be)if(b=Tc(this.be,a))return b;return null};function Dg(a,b,c,d,e){this.Vp=0;this.Ak=a;this.Yh=this.Mm=this.Vj=this.sh=0;this.zl=null;this.yg=0;this.o=null;this.xh=d;if(b)this.Yh=b;if(c)this.yg=c;if(e)this.sh=1;this.Vk=false}Dg.prototype=new Pg;m=Dg.prototype;m.k=l("oncollide");m.h=function(a,b,c,d){a=new Dg(this.Ak);a.sh=this.sh;a.Vj=this.Vj;a.Yh=this.Yh;a.yg=this.yg;a.o=this.o?this.o.h(c,d):null;return a};
m.hb=function(a){if(a==null||this.Ak==null)return false;var b=false,c=null;if(this.Vj==0)c=this.Ak.ba;else if(this.yg!=-1)c=Sb(this.Ak,this.yg);if(c){if(a===c)return false;var d=O(c),e=O(a),f=false;switch(this.Mm){case 0:f=d.xb(e)<this.Yh;break;case 1:e=new D(false);if(ob(a.Y,e)){d=d.e();mb(e,d);f=new z;f.C=y(this.zl,-0.5);f.M=y(this.zl,0.5);f=f.Qg(d)}}switch(this.sh){case 0:if(f&&!this.Vk){this.xk(c,a);b=true}break;case 1:if(!f&&this.Vk){this.xk(c,a);b=true}break}this.Vk=f}return b};
m.xk=function(a,b){this.xh&&this.xh.call(a,b);this.o&&this.o.execute(a)};m.Jf=function(a){if(this.o)return Tc(this.o,a);return null};function Ag(a,b,c,d){this.Ea=a;this.Wi=true;this.Cf=b;this.ia=c;this.Gb=d;this.Rn=false;this.$e=this.xa=null;this.ne=new t(0,0,0);this.je=false;this.Fd=this.Xm=0;this.jk=false;if(this.Ea==null)this.Ea=new t(30,50,30);if(this.Cf==null)this.Cf=new t(0,0,0);if(this.Gb==null)this.Gb=5.0E-4;this.reset()}Ag.prototype=new Pg;m=Ag.prototype;m.k=l("collisionresponse");m.h=function(){var a=new Ag;a.Ea=this.Ea.e();a.Wi=this.Wi;a.Cf=this.Cf.e();a.ne=this.ne.e();a.jk=this.jk;a.ia=this.ia;return a};
m.reset=function(){this.xa=null;this.$e=r()};m.Hc=ba("ia");
m.hb=function(a,b){var c=b-this.$e;if(!this.ia)return false;if(c>150)c=150;if(c==0)return false;this.$e=b;if(this.xa!==a){this.xa=a;this.ne=a.f.e();return false}var d=a.f.e(),e=a.f.substract(this.ne),f=new t(0,-0.1*a.r.Dd,0);if(!this.Wi)f.b=0;d=y(f,c);if(this.je){f=(b-this.Xm)/1E3;if(f>5)f=5;Ca(d,f)}else Ca(d,0.0010);if(this.Fd>0){e.b+=this.Fd*0.0010*c;this.Fd-=c;if(this.Fd<0)this.Fd=0}c=e.add(d);if(!xa(c)){if(!this.Rn)this.Gb=this.Ea.getLength()*0.0010;c=null;if(a&&a.k()=="camera")c=a;var g;if(c)g=
c.ga.substract(c.f);f=new B;var j={};j.Ja=0;this.ia.Li(a);var k=this.ia,n=this.ne.substract(this.Cf),p=this.Ea,q=this.Gb;if(!k||p.c==0||p.b==0||p.d==0)d=n;else{var h={};h.Wh=n.e();h.yl=e.e();h.tc=p.e();h.Ei=9.99999999E7;h.Nq=k;h.Oq=q;h.Ck=0;h.Bi=new t;k=Ga(h.Wh,h.tc);e=Ga(h.yl,h.tc);k=Tg(this,0,h,k,e);j.Ja=0;if(!xa(d)){h.Wh=Fa(k,h.tc);h.yl=d.e();h.Ck=0;e=Ga(d,h.tc);k=Tg(this,0,h,k,e);j.Ja=h.Ck==0?1:0;if(j.Ja<0.5&&h.Ci){d=fb(h.Ci);d.normalize();if(!(Math.abs(d.b)>Math.abs(d.c)&&Math.abs(d.b)>Math.abs(d.d)))j.Ja=
1}}if(h.Ck&&f!=null){f.V=h.Ci.V.e();f.da=h.Ci.da.e();f.ea=h.Ci.ea.e();Ea(f.V,h.tc);Ea(f.da,h.tc);Ea(f.ea,h.tc)}Ea(k,h.tc);d=k}this.ia.Li(null);d.qa(this.Cf);if(j.Ja<0.5)this.je=false;else{if(!this.je)this.Xm=b;this.je=true}if(a.f.D(d)){this.ne=a.f.e();return false}a.f=d.e();if(this.jk)if(!this.je)if(!(xa(f.V)&&xa(f.da)&&xa(f.ea))){b=a.S.b;d=f.V.add(f.da).add(f.ea);Ca(d,1/3);f.V.c-=d.c;f.V.d-=d.d;f.da.c-=d.c;f.da.d-=d.d;f.ea.c-=d.c;f.ea.d-=d.d;Ka(f.V,b);Ka(f.da,b);Ka(f.ea,b);f.V.c+=d.c;f.V.d+=d.d;
f.da.c+=d.c;f.da.d+=d.d;f.ea.c+=d.c;f.ea.d+=d.d;b=fb(f);f=new t;f.c=Math.atan2(b.d,b.b)*o.ue;f.b=a.S.b;f.d=-Math.atan2(b.c,b.b)*o.ue;a.S=f}if(c&&g){b=true;for(f=0;f<a.ja.length;++f)if((d=a.ja[f])&&d.k()=="cameramodelviewer"){b=false;break}if(b)c.ga=a.f.add(g)}}this.ne.D(a.f);this.ne=a.f.e();return false};
function Tg(a,b,c,d,e){var f=c.Oq;if(b>5){a=e.e();va(a,f);return d.add(a)}c.Dk=e.e();c.Go=e.e();c.Go.normalize();c.mk=d.e();c.fm=false;c.Ei=9.99999999E7;var g=new z;c.Wh.va(g.C);c.Wh.va(g.M);A(g,c.Wh.add(c.yl));sa(g.C,c.tc);g.M.qa(c.tc);var j=[],k=new D,n=1/c.tc.b,p=1/c.tc.d;k.p=1/c.tc.c;k.q=n;k.n=p;k.Pa=false;c.Nq.Pg(g,k,j);for(g=0;g<j.length;++g)a:{k=j[g];var q=db(k);if(Za(q,c.Go)){var h=n=0,w=false,u=0;n=q.xb(c.mk);p=q.j.ka(c.Dk);if(o.ra(p))if(Math.abs(n)>=1)break a;else{w=true;h=0}else{p=1/p;
h=(-1-n)*p;n=(1-n)*p;if(h>n){p=n;n=h;h=p}if(h>1||n<0)break a;h=o.sc(h,0,1);o.sc(n,0,1)}n=new t;p=false;var K=1;if(!w){q=c.mk.substract(q.j).add(y(c.Dk,h));u=k.da.substract(k.V);var C=k.ea.substract(k.V);w=u.ka(u);var v=u.ka(C),G=C.ka(C),H=q.substract(k.V);u=H.ka(u);H=H.ka(C);C=u*G-H*v;u=H*w-u*v;if(C+u-(w*G-v*v)<0&&!(C<0||u<0)){p=true;K=h;n=q.e()}}if(!p){h=c.Dk.e();q=c.mk.e();w=za(h);var M=C=u=0;v={};v.Ja=0;u=w;C=2*h.ka(q.substract(k.V));M=za(k.V.substract(q))-1;if(Ug(a,u,C,M,K,v)){K=v.Ja;p=true;n=
k.V.e()}if(!p){C=2*h.ka(q.substract(k.da));M=za(k.da.substract(q))-1;if(Ug(a,u,C,M,K,v)){K=v.Ja;p=true;n=k.da.e()}}if(!p){C=2*h.ka(q.substract(k.ea));M=za(k.ea.substract(q))-1;if(Ug(a,u,C,M,K,v)){K=v.Ja;p=true;n=k.ea.e()}}G=k.da.substract(k.V);M=k.V.substract(q);H=za(G);var Y=G.ka(h),fa=G.ka(M);u=H*-w+Y*Y;C=H*2*h.ka(M)-2*Y*fa;M=H*(1-za(M))+fa*fa;if(Ug(a,u,C,M,K,v)){u=(Y*v.Ja-fa)/H;if(u>=0&&u<=1){K=v.Ja;p=true;n=k.V.add(y(G,u))}}G=k.ea.substract(k.da);M=k.da.substract(q);H=za(G);Y=G.ka(h);fa=G.ka(M);
u=H*-w+Y*Y;C=H*2*h.ka(M)-2*Y*fa;M=H*(1-za(M))+fa*fa;if(Ug(a,u,C,M,K,v)){u=(Y*v.Ja-fa)/H;if(u>=0&&u<=1){K=v.Ja;p=true;n=k.da.add(y(G,u))}}G=k.V.substract(k.ea);M=k.ea.substract(q);H=za(G);Y=G.ka(h);fa=G.ka(M);u=H*-w+Y*Y;C=H*2*h.ka(M)-2*Y*fa;M=H*(1-za(M))+fa*fa;if(Ug(a,u,C,M,K,v)){u=(Y*v.Ja-fa)/H;if(u>=0&&u<=1){K=v.Ja;p=true;n=k.ea.add(y(G,u))}}}if(p){p=K*c.Dk.getLength();if(!c.fm||p<c.Ei){c.Ei=p;c.Bi=n.e();c.fm=true;c.Ci=k;++c.Ck}}}}if(!c.fm)return d.add(e);j=d.add(e);d=d.e();if(c.Ei>=f){e=e.e();va(e,
c.Ei-f);d=c.mk.add(e);e.normalize();sa(c.Bi,y(e,f))}e=c.Bi.e();g=d.substract(c.Bi);g.normalize();k=new Wa;k.j=g.e();Xa(k,e);e=j.substract(y(g,k.xb(j))).substract(c.Bi);if(e.getLength()<f)return d;return Tg(a,b+1,c,d,e)}function Ug(a,b,c,d,e,f){a=c*c-4*b*d;if(a<0)return false;d=Math.sqrt(a);a=(-c-d)/(2*b);b=(-c+d)/(2*b);if(a>b){c=b;b=a;a=c}if(a>0&&a<e){f.Ja=a;return true}if(b>0&&b<e){f.Ja=b;return true}return false};function Gg(a){this.oi=0;this.ua=a;this.o=null;this.Ig=0;this.oi=r()}Gg.prototype=new Pg;Gg.prototype.k=l("timer");Gg.prototype.h=function(a,b,c,d){a=new Gg(this.ua);a.o=this.o?this.o.h(c,d):null;a.oi=this.oi;a.Ig=this.Ig;return a};Gg.prototype.hb=function(a){if(a==null)return false;if(this.Ig>0){var b=r();if(b-this.oi>this.Ig){this.oi=b;this.o&&this.o.execute(a);return true}}return false};
function Hg(a,b){this.ua=a;this.Aa=b;this.o=null;this.Ig=0;this.Kd=null;this.af=false;this!=null&&b.bi.push(this);this!=null&&b.ai.push(this);rg(a,this)}Hg.prototype=new Pg;m=Hg.prototype;m.k=l("keypress");m.h=function(a,b,c,d){a=new Hg(this.ua,this.Aa);a.cg=this.cg;a.Lc=this.Lc;a.o=this.o?this.o.h(c,d):null;return a};m.hb=function(a){this.Kd=a;a=this.af;this.af=false;return a};m.Je=function(a){if(this.cg==0&&a.keyCode==this.Lc){Vg(this);return true}return false};
m.Ke=function(a){if(this.cg==1&&a.keyCode==this.Lc){Vg(this);return true}return false};m.sd=function(a){if(this.cg==1)if(a.button>1&&this.Lc==2)Vg(this);else a.button<=1&&this.Lc==1&&Vg(this)};m.Yd=function(a){if(this.cg==0)if(a.button>1&&this.Lc==2)Vg(this);else a.button<=1&&this.Lc==1&&Vg(this)};m.Jf=function(a){if(this.o)return Tc(this.o,a);return null};
function Vg(a){if(a.Kd&&a.Kd.r===a.ua&&kf(a.Kd)&&se(a.Aa)===a.Kd.r){if(a.Kd.ub==null&&a.Kd.i!=-1){a.Kd=null;return}a.af=true;a.o&&a.o.execute(a.Kd);Ke(a.ua);return true}return null}
function Ig(a){this.ah=this.Jd=this.cd=0;this.Sf=false;this.Wb=100;this.ng=3E3;this.Sh=-1;this.gh=this.gk="";this.Uh=100;this.ci=0;this.zb=new t;this.Yi=this.mj=this.Ud=this.Qd="";this.ae=this.ce=this.$d=this.dd=null;this.al=this.ml=this.Kc=0;this.Uf=null;this.aj=this.Ve=this.Ad=this.lh=0;this.qp=null;this.Kk=this.Jm=this.Hk=false;this.Lk=new Ma;this.Oj=0;this.Be=this.ia=null;this.Af=a;this.en=0;this.Ql=new t;this.kl=null;this.ll=0}Ig.prototype=new Pg;Ig.prototype.k=l("gameai");
Ig.prototype.h=function(a,b,c,d){a=new Ig(this.Af);a.cd=this.cd;a.Jd=this.Jd;a.ah=this.ah;a.Sf=this.Sf;a.Wb=this.Wb;a.gk=this.gk;a.gh=this.gh;a.Uh=this.Uh;a.ci=this.ci;a.Sh=this.Sh;a.ng=this.ng;a.zb=this.zb?this.zb.e():null;a.Qd=this.Qd;a.Ud=this.Ud;a.mj=this.mj;a.Yi=this.Yi;a.dd=this.dd?this.dd.h(c,d):null;a.$d=this.$d?this.$d.h(c,d):null;a.ce=this.ce?this.ce.h(c,d):null;a.ae=this.ae?this.ae.h(c,d):null;return a};
Ig.prototype.hb=function(a,b){if(a==null||this.Af==null)return false;var c=b-this.en;if(c>150)c=150;this.en=b;var d=0,e=false;if(this.Be!==a){this.Be=a;P(a);this.Ql=O(a)}var f=O(a);if(this.Kc!=3)if(this.Kc==1){d=Wg(this,a);if(this.Uf.substract(f).getLength()<d){this.Kc=0;this.dc(a,0);e=true}else{e=false;if(this.Ad>2){d=this.Ad*(this.Jd/1E3);if(this.aj.substract(f).getLength()*1.2<d){this.Kc=0;this.dc(a,0);e=true}}if(!e){this.Ad+=c;e=this.Uf.substract(f);va(e,this.Jd/1E3*c);if(!this.Sf)e.b=0;a.f.qa(e)}e=
Xg(this,a,b-this.lh,this.Uf.substract(f),this.ci)}}else if(this.Kc==2){this.Ad+=c;if(!this.Hk&&this.Ad>this.Ve/2){this.Kk=true;this.dd&&this.dd.execute(a);this.Kk=false;e=this.Hk=true}if(this.Ad>this.Ve)this.Kc=0;else e=Xg(this,a,b-this.lh,this.Uf.substract(f),Math.min(this.ci,this.Ve))}else if(this.Kc==0)if(this.cd==1||this.cd==2||this.cd==3){if(this.ah<=0||!this.Be||this.gh.length==0||!this.Af)c=null;else if(!this.ml||b>this.ml){this.ll=this.ah;this.kl=null;Yg(this,this.Af.Ma,f,this.gh);this.ml=
b+500+Math.random()*1E3;c=this.kl}else c=null;if(c!=null){e=1E3;if(this.dd)if(d=Tc(this.dd,"Shoot"))e=d.Uc;d=e;!this.Jm&&this.$d&&this.$d.execute(a);e=this.Jm=true;if(O(c).xb(f)<d)if(!c||!a?false:Zg(this,Pa(gf(c)),Pa(gf(a)))){this.Lk.$=Pa(gf(a));this.Lk.P=Pa(gf(c));$g(this,a,c,O(c),f,b)}else ah(this,a,O(c),f,b);else ah(this,a,O(c),f,b)}else if(this.cd==2||this.cd==3)if(!this.al||b>this.al+this.ng){d=Wg(this,a);c=null;if(this.cd==3){var g=null;if(this.Sh!=-1&&this.Af!=null)g=Sb(this.Af,this.Sh);if(g!=
null&&g.k()=="path"){if(this.Oj>=g.Eb.length)this.Oj=0;c=Af(g,this.Oj)}++this.Oj}else{c=this.Uh;this.al=b;c=new t((Math.random()-0.5)*c,(Math.random()-0.5)*c,(Math.random()-0.5)*c);c.qa(this.Ql);if(!this.Sf)c.b=this.Ql.b}if(!(c.substract(f).getLength()<d)){ah(this,a,c,f,b);e=true}}}return e};
function Xg(a,b,c,d,e){if(!b)return false;if(b.k()=="camera")return false;if(!a.Sf)d.b=0;var f=new D;vb(f,Ja(d));d=new D;vb(d,a.zb);f=F(f,d);a=wb(f);f=b.S.e();c=Math.min(c,e)/e;c=o.sc(c,0,1);Ca(a,o.Bd);Ca(f,o.Bd);e=new Ab;Fb(e,a.c,a.b,a.d);d=new Ab;Fb(d,f.c,f.b,f.d);Cb(d,d,e,c);Eb(d,a);Ca(a,o.ue);if(b.S.D(a))return false;b.S=a;return true}function ah(a,b,c,d,e){a.Kc=1;a.Uf=c;a.lh=e;a.aj=d;a.Ad=0;a.Ve=0;a.dc(b,1)}
function $g(a,b,c,d,e,f){a.Kc=2;a.Uf=d;a.lh=f;a.qp=c;a.aj=e;a.Ad=0;a.Ve=500;a.Hk=false;b=a.dc(b,2);if(b!=0)a.Ve=b}function Zg(a,b,c){if(!a.ia||!a.Af)return true;if(a.ia.Ng(b,c,true,null,true)!=null)return false;return true}function Yg(a,b,c,d){if(b&&b.X){var e=false,f=c.xb(O(b));if(f<a.ll){var g=J(b,"gameai");if(g&&d!=""&&g!==a&&g.Wb>0)e=g.gk.indexOf(d)!=-1}if(e){a.ll=f;a.kl=b}for(e=0;e<b.Z.length;++e)Yg(a,b.Z[e],c,d)}}function Wg(a,b){if(b!=null)return 10;a=Qa(gf(b));a.b=0;return a.getLength()}
Ig.prototype.mm=function(a){switch(a){case 0:return this.Qd;case 1:return this.Ud;case 2:return this.Yi;case 3:return this.mj}return""};Ig.prototype.dc=function(a,b){if(!a||a.k()!="animatedmesh")return 0;var c=a.Ia;if(!c)return 0;if(c=td(c,this.mm(b))){Mf(a,c.xd,c.P);c.Cc!=0&&Nf(a,c.Cc);a.Zb=b==1||b==0;return(c.P-c.xd)*c.Cc*1E3}else{Mf(a,1,1);a.Zb=false}return 0};
function wc(a,b,c){if(c)if(a.Wb!=0){a.Wb-=b;if(a.Wb<0)a.Wb=0;if(a.Wb==0){a.ae!=null&&a.ae.execute(c);b=O(c);a.Kc=3;a.lh=0;a.aj=b;a.Ad=0;a.Ve=500;a.dc(c,3)}else a.ce!=null&&a.ce.execute(c)}}Ig.prototype.Jf=function(a){var b=null;if(this.dd)if(b=Tc(this.dd,a))return b;if(this.$d)if(b=Tc(this.$d,a))return b;if(this.ce)if(b=Tc(this.ce,a))return b;if(this.ae)if(b=Tc(this.ae,a))return b;return null};o.lp=[];function Cc(){this.Sc=this.l="";this.jc=this.lc=this.fc=0}
function Tb(a,b,c){if(a==null)return null;for(var d=a.toLowerCase(),e=o.lp,f=0;f<e.length;++f){var g=e[f];if(g!=null&&g.getName().toLowerCase()==d)return g}f=bh(a,c);if(f==null)c=null;else{c=new Cc;c.Am(a);Fc(c,0);d=f.Ie;if(f.Vc=="health"&&d!=null){d=J(d,"gameai");d!=null&&Fc(c,d.Wb)}else if(f.Vc=="movementspeed"&&d!=null){f=J(d,"gameai");g=J(d,"keyboardcontrolled");if(d=J(d,"camerafps"))Ec(c,d.Kb);else if(g)Ec(c,g.Kb);else f&&Ec(c,f.Jd)}else if(f.Vc=="damage"&&d!=null)(d=ff(d,"Shoot"))&&Fc(c,d.ie);
else if(f.Vc=="colsmalldistance"&&d!=null){d=J(d,"collisionresponse");d!=null&&Ec(c,d.Gb)}else f.Vc=="soundvolume"&&Ec(c,o.Vd.le*100);c=c}if(c)return c;if(b==true){b=new Cc;b.Am(a);e.push(b);return b}return null}
function Gc(a,b){var c=bh(a.l,b);if(c!=null){b=c.Ie;if(c.Vc=="health"&&b!=null){c=J(b,"gameai");if(c!=null){var d=c.Wb;a=ch(a);d=d-a;if(d>0)wc(c,d,b);else c.Wb=a}}else if(c.Vc=="movementspeed"&&b!=null){c=J(b,"gameai");d=J(b,"keyboardcontrolled");if(b=J(b,"camerafps"))b.Kb=Q(a);else if(d)d.Kb=Q(a);else if(c)c.Jd=Q(a)}else if(c.Vc=="damage"&&b!=null){if(b=ff(b,"Shoot"))b.ie=ch(a)}else if(c.Vc=="damage"&&b!=null){if(b=ff(b,"Shoot"))b.ie=ch(a)}else if(c.Vc=="colsmalldistance"&&b!=null){b=J(b,"collisionresponse");
if(b!=null){b.Gb=ch(a);b.Rn=true}}else c.Vc=="soundvolume"&&ie(o.Vd,Q(a)/100)}}function bh(a,b){if(a.length==0||b==null)return null;if(a[0]!="#")return null;var c=a.indexOf(".");if(c==-1)return null;var d=a.substr(c+1,a.length-c);if(d.length==0)return null;c=a.substr(1,c-1);a=null;if(c!="system"){a=jg(b,c);if(a==null)return null}b={};b.Ie=a;b.Vc=d;return b}Cc.prototype.getName=da("l");Cc.prototype.Am=ba("l");
function Ub(a){switch(a.fc){case 1:return String(a.lc);case 2:return a.jc%1==0?String(a.jc):a.jc.toFixed(6)}return a.Sc}function ch(a){switch(a.fc){case 0:return Math.floor(a.Sc);case 1:return a.lc;case 2:return a.jc}return 0}function Q(a){switch(a.fc){case 0:return Number(a.Sc);case 1:return a.lc;case 2:return a.jc}return 0}function Dc(a,b){a.fc=0;a.Sc=b}function Fc(a,b){a.fc=1;a.lc=b}function Ec(a,b){a.fc=2;a.jc=b}
function Kg(a,b){this.vc=0;this.ua=a;this.me=this.ac=this.$j=this.Kb=0;this.qi=this.vl=false;this.Wf=this.Ti=0;this.ke=15;this.zb=new t;this.Zj=this.zj=this.Ud=this.Qd="";this.an=this.$e=r();this.Di=this.Fe=this.Oe=this.Me=this.He=this.Kp=this.Nl=this.Vn=false;this.wc=0;this.Fk=false;this.nk=true;this.oj=false;this.Aa=b;this!=null&&b.bi.push(this);this!=null&&b.ai.push(this)}Kg.prototype=new Pg;m=Kg.prototype;m.k=l("keyboardcontrolled");
m.h=function(){var a=new Kg(this.ua,this.Aa);a.Kb=this.Kb;a.$j=this.$j;a.ac=this.ac;a.me=this.me;a.ke=this.ke;a.zb=this.zb?this.zb.e():null;a.Qd=this.Qd;a.Ud=this.Ud;a.zj=this.zj;a.Zj=this.Zj;a.qi=this.qi;a.Ti=this.Ti;a.Wf=this.Wf;a.oj=this.oj;return a};
m.Ki=function(a,b){if(b==37||b==65){if(this.He=a)this.Me=false;return true}if(b==39||b==68){if(this.Me=a)this.He=false;return true}if(b==38||b==87){if(this.Oe=a)this.Fe=false;return true}if(b==40||b==83){if(this.Fe=a)this.Oe=false;return true}if(b==32){this.Di=a;return true}return false};m.Je=function(a){this.Nl=a.shiftKey==1;return this.Ki(true,a.keyCode)};m.Ke=function(a){this.Nl=a.shiftKey==1;return this.Ki(false,a.keyCode)};
m.hb=function(a,b){var c=b-this.vc;if(c>250)c=250;this.vc=b;var d=false;this.$e=b;if(this.oj){var e=a.r.ba;if(e!=null){e=J(e,"3rdpersoncamera");if(e!=null){if(e.nc!==a)return false}else return false}}e=a.S;if(this.He){e.b-=c*this.ac*0.0010;d=true}if(this.Me){e.b+=c*this.ac*0.0010;d=true}var f=new D;vb(f,e);e=new t(0,0,1);var g=new D;vb(g,this.zb);f=F(f,g);jb(f,e);f=this.Nl;var j=(f?this.$j:this.Kb)*c,k=0;g=this.Fe;var n=this.Oe;if(this.qi&&c)if(n||g){if(this.Fk!=n)if(this.Wf==0)this.wc*=-1;else this.wc=
0;this.Fk=!g;k=j/c;this.wc+=this.Ti*k*(c/1E3);if(this.wc>k)this.wc=k;j=this.wc*c}else if(this.Wf==0)this.wc=0;else{k=j/Number(c);this.wc-=this.Wf*k*(c/1E3);if(this.wc<0)this.wc=0;j=this.wc*c}va(e,j);if(n||g||this.qi&&this.wc!=0){d=e.e();if(g||!(n||g)&&!this.Fk)Ca(d,-1);a.f.qa(d);this.Vn=d=true}if(n||g){this.dc(a,f?3:1,g);d=this.Vn=true}else{c=false;if(e=J(a,"collisionresponse"))c=e.je;if(!c&&(this.dc(a,1,false,true)||this.dc(a,3,false,true)||this.dc(a,2,false,true)))this.dc(a,0,false)}if(this.Di)if((c=
J(a,"collisionresponse"))&&!c.je){e=0;if(this.ua&&this.ua.Dd!=0)e=Math.floor(this.me*(1/this.ua.Dd)*2E3);if(!this.vl||this.vl&&b-this.an>e){if(c.Fd==0)c.Fd=this.me*100;this.dc(a,2,false);this.an=b;d=true}}return d};m.mm=function(a){switch(a){case 0:return this.Qd;case 1:return this.Ud;case 2:return this.zj;case 3:return this.Zj}return""};
m.dc=function(a,b,c,d){if(!a||a.k()!="animatedmesh")return false;var e=a.Ia;if(!e)return false;if(e=td(e,this.mm(b))){var f=1*e.Cc;if(c)f*=-1;if(d)return a.tb==e.P&&a.Ta==e.xd;if(!(a.tb==e.P&&a.Ta==e.xd&&o.D(a.Bb,f))){Mf(a,e.xd,e.P);f&&Nf(a,f);a.Zb=b==0||b==1||b==3}return false}else if(!d){Mf(a,1,1);a.Zb=false}return false};
function Jg(a){this.vc=0;this.ua=a;this.di=-1;this.ke=15;this.zb=new t;this.hk=this.sj=0;this.zc=false;this.$e=this.ia=0;this.Ye=new t;this.rh=new t;this.nc=null;this.On=false;this.nk=true}Jg.prototype=new Pg;Jg.prototype.k=l("3rdpersoncamera");Jg.prototype.h=function(){var a=new Jg(this.ua);a.di=this.di;a.ke=this.ke;a.zb=this.zb.e();a.sj=this.sj;a.hk=this.hk;a.zc=this.zc;a.ia=this.ia;return a};
Jg.prototype.hb=function(a,b){var c=b-this.vc;if(c>250)c=250;this.vc=b;var d=false;if(a==null)return false;d=a.r;if(!this.On)if(this.di!=-1)if(d!=null){if((d=Sb(d,this.di))&&d!==this.nc){this.nc=d;this.nk=true}this.On=true}if(!this.nc)return false;d=false;var e=a.ga.e();a.ga=O(this.nc);a.ga.qa(this.rh);a.ga.b+=this.hk;a.ga.D(e)||(d=true);if(this.nk){P(this.nc);P(a);this.rh=Qa(this.nc.ob());this.rh.b/=2;this.rh.c=0;this.rh.d=0;this.vc=b;this.nk=false}if(a.r.ba!==a)return false;if(xa(this.Ye)){this.Ye=
O(this.nc).substract(O(a));b=new D;vb(b,this.nc.S);e=this.Ye;var f=e.e();e.c=f.c*b.p+f.b*b.u+f.d*b.s;e.b=f.c*b.v+f.b*b.q+f.d*b.t;e.d=f.c*b.w+f.b*b.A+f.d*b.n}b=this.nc.S;e=new D;vb(e,b);b=new D;vb(b,this.zb);e=F(e,b);b=a.f.e();switch(this.sj){case 0:break;case 2:b=O(this.nc).substract(this.Ye);break;case 1:b=this.Ye.e();jb(e,b);b=O(this.nc).substract(b);e=O(a).xb(b);f=this.Ye.getLength();f=e>f*2.2;if(o.D(this.ke,0)||f)b=b;else{c=Math.sqrt(e)*(c/1E3)*this.ke;if(c>e)c=e;b=b.substract(a.f);va(b,c);b.qa(a.f);
b=b}break}if(this.zc&&this.ia!=null&&!a.f.D(b)){this.ia.Li(this.nc);c=new Ma;c.$=a.ga.e();c.P=b.e();var g=Na(c);e=g.getLength();f=this.Ye.getLength()/10;va(g,f);c.P.qa(g);g=new B;g=this.ia.Ng(c.$,c.P,true,g,true);if(g!=null){b=g.substract(c.$);g=b.getLength();if(g<f)g=f;g-=f;if(g>e)g=e;va(b,g);b=c.$.add(b)}this.ia.Li(null)}if(!a.f.D(b)){d=true;a.f=b}return d};function Lg(a){this.hp=this.zn=false;this.ua=a;this.o=null}Lg.prototype=new Pg;Lg.prototype.k=l("onfirstframe");
Lg.prototype.hb=function(a){if(this.zn)return false;this.zn=true;if(this.o){this.o.execute(a);return true}return false};function Kf(a,b,c){this.ua=b;this.ta=c;this.Ra=a;this.jg=false;rg(b,this);this.Xk=[];for(a=0;a<255;++a)this.Xk.push(false);this.Tf=[];this.Tf.push(new Oa(-1,0));this.Tf.push(new Oa(0,-1));this.Tf.push(new Oa(1,0));this.Tf.push(new Oa(0,1))}Kf.prototype=new Pg;Kf.prototype.k=l("mobileinput");
Kf.prototype.hb=function(){var a=false;if(this.ta.wj==1)dh(this,this.jg&&this.ta.Mj,this.ta.Lc);else if(Math.sqrt(this.ta.hc*this.ta.hc+this.ta.ic*this.ta.ic)<0.3||!this.jg){if(!this.jg){a=this.ta.hc!=0&&this.ta.ic!=0;this.ta.hc=0;this.ta.ic=0}dh(this,false,37);dh(this,false,38);dh(this,false,39);dh(this,false,40)}else for(var b=0;b<4;++b){var c=this.Tf[b].c-this.ta.hc,d=this.Tf[b].b-this.ta.ic;c=Math.sqrt(c*c+d*d)<1;dh(this,c,37+b)}return a};
function dh(a,b,c){if(a.Xk[c]!=b){a.Xk[c]=b;var d={};d.keyCode=c;b?ue(a.Ra,d):ve(a.Ra,d)}}Kf.prototype.sd=function(){this.jg=false};Kf.prototype.Yd=function(){this.jg=true};Kf.prototype.Le=function(a){if(this.jg&&this.ta.Mj&&this.ta.El!=0&&this.ta.Dl!=0){var b=$e(this.Ra,a)-this.ta.wn;a=af(this.Ra,a)-this.ta.xn;this.ta.hc=b/this.ta.El;this.ta.ic=a/this.ta.Dl;this.ta.hc=o.sc(this.ta.hc,0,1);this.ta.ic=o.sc(this.ta.ic,0,1);this.ta.hc=this.ta.hc*2-1;this.ta.ic=this.ta.ic*2-1}};function vector3d(a,b,c){if(a!==null){this.x=a;this.y=b;this.z=c}else this.z=this.y=this.x=0}m=vector3d.prototype;m.add=function(a){return new vector3d(this.x+a.x,this.y+a.y,this.z+a.z)};m.substract=function(a){return new vector3d(this.x-a.x,this.y-a.y,this.z-a.z)};m.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};m.normalize=function(){var a=this.getLength();if(a!=0){a=1/a;this.x*=a;this.y*=a;this.z*=a}};
m.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};m.x=0;m.y=0;m.z=0;function eh(){this.Eo=-1;this.Dg=[];this.Bh=false;this.Aa=this.T=this.fb=this.jj=this.sb=null;this.Hf=[];this.io=[];this.$m=0;this.Bn=false;this.ul=null;this.Cn={};this.Tm=0}o.Ca=null;function Z(){if(o.Ca==null)o.Ca=new eh;return o.Ca}function re(a,b){a.Aa=b}function Me(a){return a.Hf.length!=0}function Ng(a,b){try{eval(b)}catch(c){ma(o.na,c)}}function fh(a){++a.Eo;return a.Eo}
function Re(a,b){a.Bh=true;if(a.Hf.length!=null){a.T=b;for(b=0;b<a.Hf.length;++b)a.Hf[b]();a.T=null}a.Bh=false}
function gh(a,b,c,d,e){switch(c){case "Position Mode":b.Nd=d=="absolute (pixels)";break;case "Pos X (percent)":b.hf=d/100;break;case "Pos Y (percent)":b.jf=d/100;break;case "Width (percent)":b.vf=d;break;case "Height (percent)":b.uf=d;break;case "Pos X (pixels)":b.ff=d;break;case "Pos Y (pixels)":b.gf=d;break;case "Width (pixels)":b.xf=d/100;break;case "Height (pixels)":b.wf=d/100;break;case "Alpha":b.Jc=(d&255)<<24|b.Jc&16777215;break;case "Image":a=wd(a.fb,d);b.Fa=a;break;case "Background Color":b.Jc=
e;break;case "Draw Text":b.We=d?true:false;break;case "TextColor":b.zf=e;break;case "Text":b.eb=d;break}}
function hh(a,b,c){switch(c){case "Position Mode":return b.Nd;case "Pos X (percent)":return b.hf*100;case "Pos Y (percent)":return b.jf*100;case "Width (percent)":return b.vf;case "Height (percent)":return b.uf;case "Pos X (pixels)":return b.ff;case "Pos Y (pixels)":return b.gf;case "Width (pixels)":return b.xf*100;case "Height (pixels)":return b.wf*100;case "Alpha":return o.Wd(b.Jc);case "Image":return b.Fa?b.Fa.l:null;case "Background Color":return b.Jc;case "Draw Text":return b.We;case "TextColor":return b.zf;
case "Text":return b.eb}return null}o.Re=function(a){this.Xb=null;this.oc=[];this.bm=this.Zn=false;this.Md=-1;this.ao=false;this.ua=a};o.Re.prototype=new Pg;function ih(a,b,c){a.Zn=b;a.bm=c;if(!a.ao&&a.ua){b=Z().Aa;if(c){a!=null&&b.bi.push(a);a!=null&&b.ai.push(a)}rg(a.ua,a)}}o.Re.prototype.k=l("extensionscript");o.Re.prototype.h=function(a,b,c,d){a=new o.Re(b);a.Xb=this.Xb;for(b=0;b<this.oc.length;++b){var e=this.oc[b];e!=null?a.oc.push(e.h(c,d)):a.oc.push(null)}return a};
o.Re.prototype.hb=function(a,b){if(a==null)return false;if(this.Xb==null||this.Xb.length==0)return false;var c=Z();c.jj=this;this.Md==-1&&jh(this,a,c);if(this.Md!=-1)try{_ccbScriptCache[this.Md].onAnimate(a,b)}catch(d){ma(o.na,this.Xb+": "+d)}c.jj=null;return true};
function jh(a,b,c){var d="";a.Md=fh(c);d+="if (typeof _ccbScriptCache == 'undefined') _ccbScriptCache = new Array(); ";d+="_ccbScriptCache[";d+=a.Md;d+="] = new ";d+=a.Xb;d+="();";Ng(c,d);var e="_ccbScriptCache[";e+=a.Md;e+="].";d="try {";d+=kh(e,a.oc);d+="} catch(e) { }";Ng(c,d);d=false;if(b.k()=="camera")d=true;a.ao=d;d="try { ccbRegisterBehaviorEventReceiver(typeof ";d+=e;d+="onMouseEvent != 'undefined', typeof ";d+=e;d+="onKeyEvent != 'undefined'); } catch(e) { }";Ng(c,d)}
function lh(a,b,c){a.Zn&&_ccbScriptCache[a.Md].onMouseEvent(b,c)}m=o.Re.prototype;m.sd=function(a){var b=false;if(a&&a.button==2)b=true;lh(this,b?4:2,0)};m.Nf=function(a){lh(this,1,a)};m.Yd=function(a){var b=false;if(a&&a.button==2)b=true;lh(this,b?5:3,0)};m.Le=function(){lh(this,0,0)};m.Je=function(a){this.bm&&_ccbScriptCache[this.Md].onKeyEvent(a.keyCode,true)};m.Ke=function(a){this.bm&&_ccbScriptCache[this.Md].onKeyEvent(a.keyCode,false)};
function Mg(){this.i=-1;this.Ef=this.Sc=this.l=null;this.lc=this.jc=0;this.li=this.$g=null}Mg.prototype.h=function(a,b){var c=new Mg;c.i=this.i;c.l=this.l;c.Sc=this.Sc;c.Ef=this.Ef?this.Ef.e():null;c.jc=this.jc;c.lc=this.lc;if(this.$g)c.$g=this.$g.h(a,b);c.li=this.li;return c};
function kh(a,b){for(var c="",d=0;d<b.length;++d){var e=b[d];if(e!=null){c+=a;c+=e.l;c+=" = ";switch(e.i){case 1:c+=e.jc;c+="; ";break;case 2:c+='"';var f=e.Sc.split('"').join('\\"');c+=f;c+='"; ';break;case 3:c+=e.lc?"true":"false";c+="; ";break;case 6:c+="new vector3d(";c+=e.Ef.c;c+=", ";c+=e.Ef.b;c+=", ";c+=e.Ef.d;c+="); ";break;case 7:c+='"';c+=e.li?e.li.l:"";c+='"; ';break;case 8:c+="ccbGetSceneNodeFromId(";c+=e.lc;c+="); ";break;case 9:a:{f=Z();e=e.$g;for(var g=0;g<f.Dg.length;++g)if(f.Dg[g]===
e){f=g;break a}f.Dg.push(e);f=f.Dg.length-1}c+=f;c+="; ";break;case 0:case 5:case 4:default:c+=e.lc;c+="; ";break}}}return c}function Og(){this.i="ExtensionScript";this.oc=[];this.Xb=null}Og.prototype.h=function(a,b){var c=new Og;c.Xb=this.Xb;for(var d=0;d<this.oc.length;++d){var e=this.oc[d];e!=null?c.oc.push(e.h(a,b)):c.oc.push(null)}return c};
Og.prototype.execute=function(a){if(!(this.Xb==null||this.Xb.length==0||a==null)){var b=Z(),c="";c="_ccbScriptTmp = new ";c+=this.Xb;c+="();";Ng(b,c);c="try { ";c+=kh("_ccbScriptTmp.",this.oc);c+="} catch(e) { }";Ng(b,c);c="try { _ccbScriptTmp.execute(ccbGetSceneNodeFromId(";c+=a.Ha;c+=")); } catch(e) { }";Ng(b,c)}};function mh(a){var b=o.Ca.sb;if(b==null)return null;return Sb(b,a)}
function nh(a){var b=o.Ca.sb;if(a==null)return null;var c=a.Ha,d=Yc(b);c=a.h(a.ub,c,d);if(c!=null){c.Ha=d;b.Ji(a,c)}if((a=a.cb)&&b)if(a=a.h(c)){c.cb=a;b.zd&&Zc(b.zd,a)}return c}function oh(){var a=o.Ca.sb;if(a==null)return null;return a.ba}function ph(a){var b=o.Ca.sb;b!=null&&a!=null&&a.k()=="camera"&&gg(b,a)}function qh(a,b){if(a==null)return-1;if(b<0||b>=a.Z.length)return null;return a.Z[b]}function rh(){var a=o.Ca.sb;if(a==null)return null;return a.Ma}
function sh(a){if(a==null)return 0;return a.Z.length}function th(a){var b=o.Ca.sb;if(b==null)return null;return jg(b,a)}function uh(a){var b=o.Ca.sb;b!=null&&Wc(b,a,0)}function vh(a,b){a&&b&&vc(b,a)}function wh(a){if(a==null)return 0;return a.$c()}
function xh(a,b,c){if(a==null)return null;if(b<0||b>=a.$c())return null;a=a.uc(b);if(a==null)return null;if(c=="Type")switch(a.i){case 0:return"solid";case 2:return"lightmap";case 3:return"lightmap_add";case 4:return"lightmap_m2";case 5:return"lightmap_m4";case 11:return"reflection_2layer";case 12:return"trans_add";case 13:return"trans_alphach";case 16:return"trans_reflection_2layer"}else if(c=="Texture1")return a.db==null?"":a.db.l;else if(c=="Texture2")return a.rc==null?"":a.rc.l;else if(c=="Lighting")return a.Dc;
else if(c=="Backfaceculling")return a.kp;return null}function yh(){}
function zh(a,b,c,d){if(a!=null)if(!(b<0||b>=a.$c())){a=a.uc(b);if(a!=null){b=typeof d=="string"?d:null;var e=null;e=Z();if(c=="Type")if(b)switch(b){case "solid":a.i=0;break;case "lightmap":case "lightmap_add":case "lightmap_m2":case "lightmap_m4":a.i=2;break;case "reflection_2layer":a.i=11;break;case "trans_add":a.i=12;break;case "trans_alphach":a.i=13;break;case "trans_reflection_2layer":a.i=16;break}else{c=parseInt(d);if(c!=NaN)a.i=c}else if(c=="Texture1"){if(b!=null&&e.fb!=null){e=wd(e.fb,b);
if(e!=null)a.db=e}}else if(c=="Texture2"){if(b!=null&&e.fb!=null){e=wd(e.fb,b);if(e!=null)a.rc=e}}else if(c=="Lighting")a.Dc=d;else if(c=="Backfaceculling")a.kp=d}}}
function Ah(a,b,c,d,e){if(a!=null){var f=0,g=0,j=0,k=0;if(c!=null)k=c;if(d==null&&c!=null&&typeof c.x!="undefined"){f=c.x;g=c.y;j=c.z}if(d!=null&&e!=null){f=c;g=d;j=e;k=o.If(255,Math.floor(c),Math.floor(d),Math.floor(e))}var n=e=d=null,p=null,q=a.k();if(q=="camera")d=a;else if(q=="animatedmesh")e=a;else if(q=="light")n=a;else if(q=="2doverlay")p=a;if(b=="Visible")a.X=c;else if(b=="Position"){a.f.c=f;a.f.b=g;a.f.d=j}else if(b=="Rotation"){a.S.c=f;a.S.b=g;a.S.d=j}else if(b=="Scale"){a.ma.c=f;a.ma.b=
g;a.ma.d=j}else if(b=="Target")d!=null&&pc(d,new t(f,g,j));else if(b=="UpVector"){if(d!=null)d.vb=new t(f,g,j)}else if(b=="FieldOfView_Degrees")d!=null&&mf(d,o.ko(c));else if(b=="AspectRatio")d!=null&&Ve(d,c);else if(b=="Animation")e!=null&&jc(e,c,e.Zb);else if(b=="Looping")e!=null&&Of(e,c);else if(b=="FramesPerSecond")e!=null&&Nf(e,c*0.0010);else if(b=="AnimationBlending"){if(e!=null)e.ee=c}else if(b=="BlendTimeMs"){if(e!=null)e.fd=c}else if(b=="Radius"){if(n!=null)n.Za.Ea=c}else if(b=="Color"){if(n!=
null)n.Za.oa=o.jo(k)}else if(b=="Direction"){if(n!=null){n.Za.Ga=new t(f,g,j);n.Za.Ga.normalize()}}else if(b=="FogColor")o.Ca.sb.Vb=k;else if(b=="BackgroundColor"&&a===rh())o.Ca.sb.ih=k;else if(b=="AmbientLight")o.Ca.sb.Rb=o.jo(k);else if(b=="Name")a.l=c;else p!=null&&gh(Z(),p,b,c,k)}}
function Bh(a,b){if(a==null)return null;var c=null,d=null,e=null,f=null,g=a.k();if(g=="camera")c=a;else if(g=="animatedmesh")d=a;else if(g=="light")e=a;else if(g=="2doverlay")f=a;if(b=="Visible")return a.X;else if(b=="Position")return new vector3d(a.f.c,a.f.b,a.f.d);else if(b=="Rotation")return new vector3d(a.S.c,a.S.b,a.S.d);else if(b=="Scale")return new vector3d(a.ma.c,a.ma.b,a.ma.d);else if(b=="Target"){if(c!=null)return new vector3d(c.ga.c,c.ga.b,c.ga.d)}else if(b=="UpVector"){if(c!=null)return new vector3d(c.vb.c,
c.vb.b,c.vb.d)}else if(b=="FieldOfView_Degrees"){if(c!=null)return o.Ii(c.jd)}else if(b=="AspectRatio"){if(c!=null)return c.Ic}else if(b=="Animation")return"";else if(b=="Looping"){if(d!=null)return d.Zb}else if(b=="FramesPerSecond"){if(d!=null)return d.Bb*1E3}else if(b=="AnimationBlending"){if(d!=null)return d.ee}else if(b=="BlendTimeMs"){if(d!=null)return d.fd}else if(b=="Radius"){if(e!=null)return e.Za.Ea}else if(b=="Color"){if(e!=null)return o.If(255,e.Za.oa.pc*255,e.Za.oa.kc*255,e.Za.oa.gc*255)}else if(b==
"Direction"){if(e!=null)return e.Za.Ga}else if(b=="Name")return a.l;else if(b=="FogColor")return o.Ca.sb.Vb;else if(b=="BackgroundColor"&&a===rh())return o.Ca.sb.ih;else if(f!=null)return hh(Z(),f,b);return null}function Ch(a,b,c,d){if(a!=null){a.f.c=b;a.f.b=c;a.f.d=d;for(b=0;b<a.ja.length;++b){c=a.ja[b];c!=null&&c.k()=="collisionresponse"&&c.reset()}}}function Dh(a){Z().Hf.push(a)}function Eh(a){var b=Z();a=b.Hf.indexOf(a);a!=-1&&b.Hf.splice(a,1)}
function Fh(a,b,c,d,e){var f=Z();!f.Bh||f.T==null||Pd(f.T,b,c,d-b,e-c,a,true)}function Gh(a,b,c,d,e){a=Z();!a.Bh||a.T==null||Pd(a.T,b,c,d-b,e-c,4278190080,true)}function Hh(a,b,c,d,e){a=Z();!a.Bh||a.T==null||Pd(a.T,b,c,d-b,e-c,4278190080,true)}function Ih(a,b){var c=Z().Aa;a=cf(c,a,b);if(a!=null)return new vector3d(a.c,a.b,a.d);return null}function Jh(a,b,c){var d=Z().Aa;a=df(d,new t(a,b,c));return new vector3d(a.c,a.b,0)}
function Kh(a,b,c,d,e,f){var g=new Ma;g.$=new t(a,b,c);g.P=new t(d,e,f);a=o.Ca.sb;a=xc(zc.prototype,a,g.$,g.P,a.zd,true);if(a<999999999){b=Na(g);va(b,a);g=g.$.add(b);return new vector3d(g.c,g.b,g.d)}return null}function Lh(a,b,c,d,e,f,g){if(a==null)return false;if(a.Y==null)return false;b=new t(b,c,d);e=new t(e,f,g);return Ua(gf(a),b,e)}function Mh(){window.close()}function Nh(){}function Oh(a){var b=Z();a=vd(b.fb,a,true);if(a!=null)return a.l;return null}
function Ph(){var a=Z().Aa;if(a)return a.Ib;return 0}function Qh(){var a=Z().Aa;if(a)return a.Jb;return 0}function Rh(){var a=Z().Aa;if(a!=null&&a.T)return a.T.Qb();return 0}function Sh(){var a=Z().Aa;if(a!=null&&a.T)return a.T.Pb();return 0}function Th(){}function Uh(){}function Vh(a){var b=Z().Aa;if(b!=null)return lc(b,a,true);return false}function Wh(a){var b=o.Vd;a=de(b,a);a!=null&&Kc(b,a,false,1)}function Xh(a){Mc(o.Vd,a)}
function Yh(a){a=Tb(a,true,o.Ca.sb);if(a==null)return null;if(a.fc==0)return Ub(a);if(a.fc==1)return ch(a);if(a.fc==2)return Q(a);return null}function Zh(a,b){var c=o.Ca.sb;a=Tb(a,true,c);if(a!=null){typeof b=="number"?Ec(a,b):Dc(a,b);Gc(a,c)}}function $h(a,b){var c=Z().Aa;c&&ef(c,a,b)}function ai(){return null}function bi(){}function ci(){return"webgl"}function di(a,b){var c=o.Ca.sb;if(c!=null){if(b==null)b=c.Ma;if(a>=0&&a<o.Ca.Dg.length){a=o.Ca.Dg[a];a!=null&&a.execute(b)}}}
function ei(a){ma(o.na,a)}function fi(){}function gi(a,b){o.Ca.jj!=null&&ih(o.Ca.jj,a,b)}function hi(a,b){++o.Ca.$m;var c=o.Ca.$m;a=new na(a);var d=o.Ca.io,e={};e.rq=a;e.id=c;d.push(e);a.load(function(f){b&&b(f);for(f=0;f<d.length;++f)if(d[f].id==c){d.splice(f,1);break}});return c}function ii(a){for(var b=o.Ca.io,c=0;c<b.length;++c)if(b[c].id==a){b[c].rq.abort();b.splice(c,1);break}}
function ji(a,b,c,d){var e=Z(),f=e.Aa.T;if(f==null)return-1;c=f.ab[c];a=Xd(f,a,b,c.eo,c.fo,c.co);if(a!=-1){if(d!=null)e.Cn["_"+a]=d;if(!e.Bn){e.Bn=true;e.ul=f.Ph;f.Ph=function(g){e.ul&&e.ul();var j=e.Cn["_"+g];if(j!=null){e.Tm=g;j()}}}}return a}function ki(a,b,c,d,e,f){var g=Z(),j=g.Aa.T;if(j!=null){a=j.U;g=Yd(j,g.Tm);b=a.getUniformLocation(g,b);a.uniform4f(b,c,d,e,f)}}o.lm=null;function li(){return o.lm}
function mi(a,b,c){if(a){var d=J(a,"gameai");if(d)if(b=="cancel"){d.Kc=0;d.dc(a,0)}else if(b=="moveto"){b=new t(0,0,0);if(c!=null&&typeof c.x!="undefined"){b.c=c.x;b.b=c.y;b.d=c.z}ah(d,a,b,O(a),r())}else b=="attack"&&$g(d,a,c,O(c),O(a),r())}};function le(){this.nh=-1;this.ip="";this.Mb=[];this.Wp=2;this.Sn=false;this.ar=320;this.$q=200;this.am=function(a){this.Mb.push(a)};this.Og=function(){if(this.nh<0||this.nh>=this.Mb.length)return null;return this.Mb[this.nh]};this.To=function(a){for(var b=0;b<this.Mb.length;++b)if(this.Mb[b]===a){this.nh=b;return}}};o.$p=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);
o.aq=function(a){var b,c,d,e,f,g=o.$p;e=a.length;d=0;for(f="";d<e;){do b=g[a.charCodeAt(d++)&255];while(d<e&&b==-1);if(b==-1)break;do c=g[a.charCodeAt(d++)&255];while(d<e&&c==-1);if(c==-1)break;f+=String.fromCharCode(b<<2|(c&48)>>4);do{b=a.charCodeAt(d++)&255;if(b==61)return f;b=g[b]}while(d<e&&b==-1);if(b==-1)break;f+=String.fromCharCode((c&15)<<4|(b&60)>>2);do{c=a.charCodeAt(d++)&255;if(c==61)return f;c=g[c]}while(d<e&&c==-1);if(c==-1)break;f+=String.fromCharCode((b&3)<<6|c)}return f};function ni(){}m=ni.prototype;m.Mf=aa();m.Pg=function(a,b,c){this.Mf(b,c)};
m.Ng=function(a,b,c,d,e){if(!a||!b)return null;if(this.xa!=null&&e&&this.xa.X==false)return null;var f=new z;f.C=a.e();f.M=a.e();A(f,b);e=[];this.Pg(f,null,e);f=b.substract(a);f.normalize();for(var g,j=9.999999999E8,k=za(b.substract(a)),n=Math.min(a.c,b.c),p=Math.max(a.c,b.c),q=Math.min(a.b,b.b),h=Math.max(a.b,b.b),w=Math.min(a.d,b.d),u=Math.max(a.d,b.d),K=null,C=0;C<e.length;++C){var v=e[C];if(!(c&&!Za(db(v),f)))if(!(n>v.V.c&&n>v.da.c&&n>v.ea.c))if(!(p<v.V.c&&p<v.da.c&&p<v.ea.c))if(!(q>v.V.b&&q>
v.da.b&&q>v.ea.b))if(!(h<v.V.b&&h<v.da.b&&h<v.ea.b))if(!(w>v.V.d&&w>v.da.d&&w>v.ea.d))if(!(u<v.V.d&&u<v.da.d&&u<v.ea.d))if(!(ya(a,v.V)>=j&&ya(a,v.da)>=j&&ya(a,v.ea)>=j))if(g=v.nm(a,f)){var G=ya(g,a),H=ya(g,b);if(G<k&&H<k&&G<j){j=G;d&&v.va(d);K=g}}}if(K)return K.e();return null};m.qk=l(null);m.Li=aa();m.h=l(null);
function ug(a,b,c,d){if(a){this.xa=b;this.F=[];if(a!=null)for(b=0;b<a.pa.length;++b){var e=a.pa[b];if(e)if(!(c!=null&&e.N&&e.N.i==c))if(!(d!=null&&e.N&&e.N.i==d))for(var f=e.fa.length,g=0;g<f;g+=3)this.F.push(new B(e.m[e.fa[g]].f,e.m[e.fa[g+1]].f,e.m[e.fa[g+2]].f))}}}ug.prototype=new ni;
ug.prototype.Mf=function(a,b){if(this.xa.Y){a=a?F(a,this.xa.Y):this.xa.Y;var c;if(gb(a))for(c=0;c<this.F.length;++c)b.push(this.F[c]);else if(hb(a))for(c=0;c<this.F.length;++c)b.push(new B(nb(a,this.F[c].V),nb(a,this.F[c].da),nb(a,this.F[c].ea)));else for(c=0;c<this.F.length;++c)b.push(new B(lb(a,this.F[c].V),lb(a,this.F[c].da),lb(a,this.F[c].ea)))}};ug.prototype.Pg=function(a,b,c){this.Mf(b,c)};ug.prototype.qk=da("xa");ug.prototype.h=function(a){var b=new ug(null,a);b.xa=a;b.F=this.F;return b};
function vg(a,b){if(b){this.xa=b;this.F=[];if(a!=null){a=Ta(a);this.F.push(new B(a[3],a[0],a[2]));this.F.push(new B(a[3],a[1],a[0]));this.F.push(new B(a[3],a[2],a[7]));this.F.push(new B(a[7],a[2],a[6]));this.F.push(new B(a[7],a[6],a[4]));this.F.push(new B(a[5],a[7],a[4]));this.F.push(new B(a[5],a[4],a[0]));this.F.push(new B(a[5],a[0],a[1]));this.F.push(new B(a[1],a[3],a[7]));this.F.push(new B(a[1],a[7],a[5]));this.F.push(new B(a[0],a[6],a[2]));this.F.push(new B(a[0],a[4],a[6]))}}}vg.prototype=new ug;
vg.prototype.h=function(a){var b=new vg(null,a);b.xa=a;b.F=this.F;return b};function sg(){this.Rc=[];this.ol=null}sg.prototype=new ni;sg.prototype.Mf=function(a,b){for(var c=this.ol,d=0;d<this.Rc.length;++d){var e=this.Rc[d];c!=null&&c==e.qk()||e.Mf(a,b)}};sg.prototype.Pg=function(a,b,c){for(var d=this.ol,e=0;e<this.Rc.length;++e){var f=this.Rc[e];d!=null&&d==f.qk()||f.Pg(a,b,c)}};function Zc(a,b){a.Rc.push(b)}
function Le(a,b){for(var c=0;c<a.Rc.length;)if(a.Rc[c]===b){a.Rc.splice(c,1);return}else++c}sg.prototype.clear=function(){this.Rc=[]};sg.prototype.Ng=function(a,b,c,d,e){var f=9.999999999E8,g=null,j=null;if(d)j=new B;for(var k=0;k<this.Rc.length;++k){var n=this.Rc[k].Ng(a,b,c,j,e);if(n!=null){var p=ya(n,a);if(p<f){g=n.e();f=p;d&&j.va(d)}}}return g};sg.prototype.Li=ba("ol");o.Il=function(){this.F=[];this.g=new z;this.gd=[]};
function tg(a,b,c,d,e){this.np=this.mp=0;this.jn=c==null?64:c;if(a){this.xa=b;this.ve=new o.Il;this.F=[];for(b=0;b<a.pa.length;++b)if(c=a.pa[b])if(!(d!=null&&c.N&&c.N.i==d))if(!(e!=null&&c.N&&c.N.i==e))for(var f=c.fa.length,g=0;g<f;g+=3){var j=new B(c.m[c.fa[g]].f,c.m[c.fa[g+1]].f,c.m[c.fa[g+2]].f);this.ve.F.push(j);this.F.push(j)}oi(this,this.ve)}}tg.prototype=new ni;
function oi(a,b){++a.mp;b.g.C=b.F[0].V.e();b.g.M=b.g.C.e();for(var c,d=b.F.length,e=0;e<d;++e){c=b.F[e];A(b.g,c.V);A(b.g,c.da);A(b.g,c.ea)}if(!b.g.C.D(b.g.M)&&d>a.jn){d=Pa(b.g);for(var f=Ta(b.g),g=new z,j=0;j<8;++j){var k=[];g.C=d.e();g.M=d.e();A(g,f[j]);b.gd.push(new o.Il);for(e=0;e<b.F.length;++e){c=b.F[e];g.Qg(c.V)&&g.Qg(c.da)&&g.Qg(c.ea)?b.gd[j].F.push(c):k.push(c)}b.F=k;if(b.gd[j].F.length==0)b.gd[j]=null;else oi(a,b.gd[j])}}a.np+=b.F.length}
tg.prototype.Mf=function(a,b){ug.prototype.Mf.call(this,a,b)};tg.prototype.Pg=function(a,b,c){if(this.xa.Y){var d=new D;a=a.e();if(this.xa){d=this.xa.Y.e();pb(d);zb(d,a)}var e=d;e.p=1;e.u=0;e.s=0;e.G=0;e.v=0;e.q=1;e.t=0;e.H=0;e.w=0;e.A=0;e.n=1;e.I=0;e.J=0;e.K=0;e.B=0;e.L=1;e.Pa=true;if(b)d=b.e();if(this.xa)d=F(d,this.xa.Y);this.ve&&pi(this,this.ve,c,a,d)}};
function pi(a,b,c,d,e){if(Va(b.g,d)){var f=b.F.length,g;if(gb(e))for(g=0;g<f;++g)c.push(b.F[g]);else if(hb(e))for(g=0;g<f;++g)c.push(new B(nb(e,b.F[g].V),nb(e,b.F[g].da),nb(e,b.F[g].ea)));else for(g=0;g<f;++g)c.push(new B(lb(e,b.F[g].V),lb(e,b.F[g].da),lb(e,b.F[g].ea)));for(g=0;g<b.gd.length;++g){f=b.gd[g];f!=null&&pi(a,f,c,d,e)}}}tg.prototype.qk=da("xa");function qi(a,b){var c=new o.Il;c.F=b.F;c.g=b.g.e();for(var d=0;d<b.gd.length;++d){var e=b.gd[d],f=null;if(e)f=qi(a,e);c.gd.push(f)}return c}
tg.prototype.h=function(a){var b=new tg(null,a,this.jn);b.xa=a;b.F=this.F;b.ve=null;if(this.ve)b.ve=qi(this,this.ve);return b};(function(a){function b(){this.list=this.next=null}function c(){this.rd=this.Wc=this.Gc=0;this.Of=null}function d(N,U,V,s,x,ca){this.Se=16;this.yp=288;this.status=0;this.Ne=null;this.Xd=0;var T=new Array(this.Se+1),sb,ja,Ia,L,E,I,Ra,Sa=new Array(this.Se+1),Aa,ta,pa,ka=new c,Ob=new Array(this.Se);L=new Array(this.yp);var qa,$a=new Array(this.Se+1),cc,ab,dc;dc=this.Ne=null;for(E=0;E<T.length;E++)T[E]=0;for(E=0;E<Sa.length;E++)Sa[E]=0;for(E=0;E<Ob.length;E++)Ob[E]=null;for(E=0;E<L.length;E++)L[E]=0;
for(E=0;E<$a.length;E++)$a[E]=0;sb=U>256?N[256]:this.Se;Aa=N;ta=0;E=U;do{T[Aa[ta]]++;ta++}while(--E>0);if(T[0]==U){this.Ne=null;this.status=this.Xd=0}else{for(I=1;I<=this.Se;I++)if(T[I]!=0)break;Ra=I;if(ca<I)ca=I;for(E=this.Se;E!=0;E--)if(T[E]!=0)break;Ia=E;if(ca>E)ca=E;for(cc=1<<I;I<E;I++,cc<<=1)if((cc-=T[I])<0){this.status=2;this.Xd=ca;return}if((cc-=T[E])<0){this.status=2;this.Xd=ca}else{T[E]+=cc;$a[1]=I=0;Aa=T;ta=1;for(pa=2;--E>0;)$a[pa++]=I+=Aa[ta++];Aa=N;E=ta=0;do if((I=Aa[ta++])!=0)L[$a[I]++]=
E;while(++E<U);U=$a[Ia];$a[0]=E=0;Aa=L;ta=0;L=-1;qa=Sa[0]=0;pa=null;for(ab=0;Ra<=Ia;Ra++)for(N=T[Ra];N-- >0;){for(;Ra>qa+Sa[1+L];){qa+=Sa[1+L];L++;ab=(ab=Ia-qa)>ca?ca:ab;if((ja=1<<(I=Ra-qa))>N+1){ja-=N+1;for(pa=Ra;++I<ab;){if((ja<<=1)<=T[++pa])break;ja-=T[pa]}}if(qa+I>sb&&qa<sb)I=sb-qa;ab=1<<I;Sa[1+L]=I;pa=new Array(ab);for(ja=0;ja<ab;ja++)pa[ja]=new c;dc=dc==null?(this.Ne=new b):(dc.next=new b);dc.next=null;dc.list=pa;Ob[L]=pa;if(L>0){$a[L]=E;ka.Wc=Sa[L];ka.Gc=16+I;ka.Of=pa;I=(E&(1<<qa)-1)>>qa-Sa[L];
Ob[L-1][I].Gc=ka.Gc;Ob[L-1][I].Wc=ka.Wc;Ob[L-1][I].rd=ka.rd;Ob[L-1][I].Of=ka.Of}}ka.Wc=Ra-qa;if(ta>=U)ka.Gc=99;else if(Aa[ta]<V){ka.Gc=Aa[ta]<256?16:15;ka.rd=Aa[ta++]}else{ka.Gc=x[Aa[ta]-V];ka.rd=s[Aa[ta++]-V]}ja=1<<Ra-qa;for(I=E>>qa;I<ab;I+=ja){pa[I].Gc=ka.Gc;pa[I].Wc=ka.Wc;pa[I].rd=ka.rd;pa[I].Of=ka.Of}for(I=1<<Ra-1;(E&I)!=0;I>>=1)E^=I;for(E^=I;(E&(1<<qa)-1)!=$a[L];){qa-=Sa[L];L--}}this.Xd=Sa[1];this.status=cc!=0&&Ia!=1?1:0}}}function e(){if(Nd.length==ye)return-1;return Nd.charCodeAt(ye++)&255}
function f(N){for(;fa<N;){Y|=e()<<fa;fa+=8}}function g(N){return Y&ri[N]}function j(N){Y>>=N;fa-=N}function k(N,U,V){var s,x,ca;if(V==0)return 0;for(ca=0;;){f(Ba);x=bb.list[g(Ba)];for(s=x.Gc;s>16;){if(s==99)return-1;j(x.Wc);s-=16;f(s);x=x.Of[g(s)];s=x.Gc}j(x.Wc);if(s==16){v&=h-1;N[U+ca++]=C[v++]=x.rd}else{if(s==15)break;f(s);ra=x.rd+g(s);j(s);f(Pb);x=ze.list[g(Pb)];for(s=x.Gc;s>16;){if(s==99)return-1;j(x.Wc);s-=16;f(s);x=x.Of[g(s)];s=x.Gc}j(x.Wc);f(s);ec=v-x.rd-g(s);for(j(s);ra>0&&ca<V;){ra--;ec&=
h-1;v&=h-1;N[U+ca++]=C[v++]=C[ec++]}}if(ca==V)return V}cb=-1;return ca}function n(N,U,V){if(G==null){var s,x=new Array(288);for(s=0;s<144;s++)x[s]=8;for(;s<256;s++)x[s]=9;for(;s<280;s++)x[s]=7;for(;s<288;s++)x[s]=8;M=7;s=new d(x,288,257,lg,mg,M);if(s.status!=0){alert("HufBuild error: "+s.status);return-1}G=s.Ne;M=s.Xd;for(s=0;s<30;s++)x[s]=5;zip_fixed_bd=5;s=new d(x,30,0,ng,og,zip_fixed_bd);if(s.status>1){G=null;alert("HufBuild error: "+s.status);return-1}H=s.Ne;zip_fixed_bd=s.Xd}bb=G;ze=H;Ba=M;Pb=
zip_fixed_bd;return k(N,U,V)}function p(N,U,V){var s,x,ca,T,sb,ja,Ia,L=new Array(316);for(s=0;s<L.length;s++)L[s]=0;f(5);ja=257+g(5);j(5);f(5);Ia=1+g(5);j(5);f(4);s=4+g(4);j(4);if(ja>286||Ia>30)return-1;for(x=0;x<s;x++){f(3);L[pg[x]]=g(3);j(3)}for(;x<19;x++)L[pg[x]]=0;Ba=7;x=new d(L,19,19,null,null,Ba);if(x.status!=0)return-1;bb=x.Ne;Ba=x.Xd;T=ja+Ia;for(s=ca=0;s<T;){f(Ba);sb=bb.list[g(Ba)];x=sb.Wc;j(x);x=sb.rd;if(x<16)L[s++]=ca=x;else if(x==16){f(2);x=3+g(2);j(2);if(s+x>T)return-1;for(;x-- >0;)L[s++]=
ca}else{if(x==17){f(3);x=3+g(3);j(3)}else{f(7);x=11+g(7);j(7)}if(s+x>T)return-1;for(;x-- >0;)L[s++]=0;ca=0}}Ba=u;x=new d(L,ja,257,lg,mg,Ba);if(Ba==0)x.status=1;if(x.status!=0)return-1;bb=x.Ne;Ba=x.Xd;for(s=0;s<Ia;s++)L[s]=L[s+ja];Pb=K;x=new d(L,Ia,0,ng,og,Pb);ze=x.Ne;Pb=x.Xd;if(Pb==0&&ja>257)return-1;if(x.status!=0)return-1;return k(N,U,V)}function q(N,U,V){var s,x;for(s=0;s<V;){if(yc&&cb==-1)return s;if(ra>0){if(cb!=w)for(;ra>0&&s<V;){ra--;ec&=h-1;v&=h-1;N[U+s++]=C[v++]=C[ec++]}else{for(;ra>0&&s<
V;){ra--;v&=h-1;f(8);N[U+s++]=C[v++]=g(8);j(8)}if(ra==0)cb=-1}if(s==V)return s}if(cb==-1){if(yc)break;f(1);if(g(1)!=0)yc=true;j(1);f(2);cb=g(2);j(2);bb=null;ra=0}switch(cb){case 0:x=U+s;var ca=V-s,T=undefined;T=fa&7;j(T);f(16);T=g(16);j(16);f(16);if(T!=(~Y&65535))x=-1;else{j(16);ra=T;for(T=0;ra>0&&T<ca;){ra--;v&=h-1;f(8);N[x+T++]=C[v++]=g(8);j(8)}if(ra==0)cb=-1;x=T}break;case 1:x=bb!=null?k(N,U+s,V-s):n(N,U+s,V-s);break;case 2:x=bb!=null?k(N,U+s,V-s):p(N,U+s,V-s);break;default:x=-1;break}if(x==-1){if(yc)return 0;
return-1}s+=x}return s}var h=32768,w=0,u=9,K=6,C,v,G=null,H,M,Y,fa,cb,yc,ra,ec,bb,ze,Ba,Pb,Nd,ye,ri=new Array(0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535),lg=new Array(3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0),mg=new Array(0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99),ng=new Array(1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577),og=new Array(0,
0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13),pg=new Array(16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15),qg={};a.JSInflate=qg;qg.pq=function(N){var U,V,s;if(C==null)C=new Array(2*h);fa=Y=v=0;cb=-1;yc=false;ra=ec=0;bb=null;Nd=N;ye=0;U=new Array(1024);for(N="";(V=q(U,0,U.length))>0;)for(s=0;s<V;s++)N+=String.fromCharCode(U[s]);Nd=null;return N}})(this);jsdummyfunc=void 0;window.startCopperLichtFromFile=function(a,b,c,d,e){a=new ke(a,true,null,false,c,d,e);a.load(b);return a};window.CL3D=o;window.ccbGetSceneNodeFromId=mh;window.ccbCloneSceneNode=nh;window.ccbGetActiveCamera=oh;window.ccbSetActiveCamera=ph;window.ccbGetChildSceneNode=qh;window.ccbGetRootSceneNode=rh;window.ccbGetSceneNodeChildCount=sh;window.ccbGetSceneNodeFromName=th;window.ccbRemoveSceneNode=uh;window.ccbSetSceneNodeParent=vh;window.ccbGetSceneNodeMaterialCount=wh;
window.ccbGetSceneNodeMaterialProperty=xh;window.ccbSetSceneNodeMaterialProperty=zh;window.ccbSetSceneNodeProperty=Ah;window.ccbGetSceneNodeProperty=Bh;window.ccbSetSceneNodePositionWithoutCollision=Ch;window.ccbRegisterOnFrameEvent=Dh;window.ccbDrawColoredRectangle=Fh;window.ccbDrawTextureRectangle=Gh;window.ccbDrawTextureRectangleWithAlpha=Hh;window.ccbGet3DPosFrom2DPos=Ih;window.ccbGet2DPosFrom3DPos=Jh;window.ccbGetCollisionPointOfWorldWithLine=Kh;window.ccbEndProgram=Mh;
window.ccbDoesLineCollideWithBoundingBoxOfSceneNode=Lh;window.ccbLoadTexture=Oh;window.ccbGetMousePosX=Ph;window.ccbGetMousePosY=Qh;window.ccbGetScreenWidth=Rh;window.ccbGetScreenHeight=Sh;window.ccbSetCloseOnEscapePressed=Th;window.ccbSetCursorVisible=Uh;window.ccbSwitchToScene=Vh;window.ccbPlaySound=Wh;window.ccbStopSound=Xh;window.ccbGetCopperCubeVariable=Yh;window.ccbSetCopperCubeVariable=Zh;window.ccbReadFileContent=ai;window.ccbWriteFileContent=bi;window.ccbGetPlatform=ci;
window.ccbInvokeAction=di;window.ccbCleanMemory=yh;window.print=ei;window.system=fi;window.ccbRegisterBehaviorEventReceiver=gi;window.ccbUnregisterOnFrameEvent=Eh;window.ccbSwitchToFullscreen=$h;window.ccbDoHTTPRequest=hi;window.ccbCancelHTTPRequest=ii;window.ccbCreateMaterial=ji;window.ccbSetShaderConstant=ki;window.ccbSetPhysicsVelocity=Nh;window.ccbUpdatePhysicsGeometry=Nh;window.ccbAICommand=mi;window.ccbGetCurrentNode=li;
